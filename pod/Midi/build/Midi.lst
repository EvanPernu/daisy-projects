ARM GAS  /tmp/ccgxtOMv.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 28, 1
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 2
  10              		.eabi_attribute 34, 1
  11              		.eabi_attribute 18, 4
  12              		.file	"Midi.cpp"
  13              		.text
  14              	.Ltext0:
  15              		.cfi_sections	.debug_frame
  16              		.section	.text._ZN5daisy8DaisyPodD2Ev,"axG",%progbits,_ZN5daisy8DaisyPodD5Ev,comdat
  17              		.align	1
  18              		.p2align 2,,3
  19              		.weak	_ZN5daisy8DaisyPodD2Ev
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv5-d16
  26              	_ZN5daisy8DaisyPodD2Ev:
  27              	.LVL0:
  28              	.LFB2046:
  29              		.file 1 "../../libdaisy/src/daisy_pod.h"
   1:../../libdaisy/src/daisy_pod.h **** #pragma once
   2:../../libdaisy/src/daisy_pod.h **** #ifndef DSY_POD_BSP_H
   3:../../libdaisy/src/daisy_pod.h **** #define DSY_POD_BSP_H
   4:../../libdaisy/src/daisy_pod.h **** 
   5:../../libdaisy/src/daisy_pod.h **** #include "daisy_seed.h"
   6:../../libdaisy/src/daisy_pod.h **** 
   7:../../libdaisy/src/daisy_pod.h **** namespace daisy
   8:../../libdaisy/src/daisy_pod.h **** {
   9:../../libdaisy/src/daisy_pod.h **** /**
  10:../../libdaisy/src/daisy_pod.h ****     @brief Class that handles initializing all of the hardware specific to the Daisy Patch Board. \
  11:../../libdaisy/src/daisy_pod.h ****     Helper funtions are also in place to provide easy access to built-in controls and peripherals.
  12:../../libdaisy/src/daisy_pod.h ****     @author Stephen Hensley
  13:../../libdaisy/src/daisy_pod.h ****     @date November 2019
  14:../../libdaisy/src/daisy_pod.h ****     @ingroup boards
  15:../../libdaisy/src/daisy_pod.h **** */
  16:../../libdaisy/src/daisy_pod.h **** class DaisyPod
  17:../../libdaisy/src/daisy_pod.h **** {
  18:../../libdaisy/src/daisy_pod.h ****   public:
  19:../../libdaisy/src/daisy_pod.h ****     /** Switches */
  20:../../libdaisy/src/daisy_pod.h ****     enum Sw
  21:../../libdaisy/src/daisy_pod.h ****     {
  22:../../libdaisy/src/daisy_pod.h ****         BUTTON_1,    /** & */
  23:../../libdaisy/src/daisy_pod.h ****         BUTTON_2,    /** & */
  24:../../libdaisy/src/daisy_pod.h ****         BUTTON_LAST, /** &  */
  25:../../libdaisy/src/daisy_pod.h ****     };
  26:../../libdaisy/src/daisy_pod.h **** 
  27:../../libdaisy/src/daisy_pod.h ****     /** Knobs */
  28:../../libdaisy/src/daisy_pod.h ****     enum Knob
  29:../../libdaisy/src/daisy_pod.h ****     {
ARM GAS  /tmp/ccgxtOMv.s 			page 2


  30:../../libdaisy/src/daisy_pod.h ****         KNOB_1,    /** &  */
  31:../../libdaisy/src/daisy_pod.h ****         KNOB_2,    /** & */
  32:../../libdaisy/src/daisy_pod.h ****         KNOB_LAST, /** & */
  33:../../libdaisy/src/daisy_pod.h ****     };
  34:../../libdaisy/src/daisy_pod.h **** 
  35:../../libdaisy/src/daisy_pod.h ****     DaisyPod() {}
  36:../../libdaisy/src/daisy_pod.h ****     ~DaisyPod() {}
  30              		.loc 1 36 5 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35              	.LBB374:
  36              	.LBI374:
  37              		.file 2 "../../libdaisy/src/hid/midi.h"
   1:../../libdaisy/src/hid/midi.h **** #pragma once
   2:../../libdaisy/src/hid/midi.h **** #ifndef DSY_MIDI_H
   3:../../libdaisy/src/hid/midi.h **** #define DSY_MIDI_H
   4:../../libdaisy/src/hid/midi.h **** 
   5:../../libdaisy/src/hid/midi.h **** // TODO: make this adjustable
   6:../../libdaisy/src/hid/midi.h **** #define SYSEX_BUFFER_LEN 128
   7:../../libdaisy/src/hid/midi.h **** 
   8:../../libdaisy/src/hid/midi.h **** #include <stdint.h>
   9:../../libdaisy/src/hid/midi.h **** #include <stdlib.h>
  10:../../libdaisy/src/hid/midi.h **** #include "per/uart.h"
  11:../../libdaisy/src/hid/midi.h **** #include "util/ringbuffer.h"
  12:../../libdaisy/src/hid/midi.h **** #include "hid/MidiEvent.h"
  13:../../libdaisy/src/hid/midi.h **** #include "sys/system.h"
  14:../../libdaisy/src/hid/midi.h **** 
  15:../../libdaisy/src/hid/midi.h **** namespace daisy
  16:../../libdaisy/src/hid/midi.h **** {
  17:../../libdaisy/src/hid/midi.h **** /** @addtogroup external 
  18:../../libdaisy/src/hid/midi.h ****     @{ 
  19:../../libdaisy/src/hid/midi.h **** */
  20:../../libdaisy/src/hid/midi.h **** 
  21:../../libdaisy/src/hid/midi.h **** class MidiUartTransport
  22:../../libdaisy/src/hid/midi.h **** {
  23:../../libdaisy/src/hid/midi.h ****   public:
  24:../../libdaisy/src/hid/midi.h ****     MidiUartTransport() {}
  25:../../libdaisy/src/hid/midi.h ****     ~MidiUartTransport() {}
  26:../../libdaisy/src/hid/midi.h **** 
  27:../../libdaisy/src/hid/midi.h ****     struct Config
  28:../../libdaisy/src/hid/midi.h ****     {
  29:../../libdaisy/src/hid/midi.h ****         UartHandler::Config::Peripheral periph;
  30:../../libdaisy/src/hid/midi.h ****         dsy_gpio_pin                    rx;
  31:../../libdaisy/src/hid/midi.h ****         dsy_gpio_pin                    tx;
  32:../../libdaisy/src/hid/midi.h **** 
  33:../../libdaisy/src/hid/midi.h ****         Config()
  34:../../libdaisy/src/hid/midi.h ****         {
  35:../../libdaisy/src/hid/midi.h ****             periph = UartHandler::Config::Peripheral::USART_1;
  36:../../libdaisy/src/hid/midi.h ****             rx     = {DSY_GPIOB, 7};
  37:../../libdaisy/src/hid/midi.h ****             tx     = {DSY_GPIOB, 6};
  38:../../libdaisy/src/hid/midi.h ****         }
  39:../../libdaisy/src/hid/midi.h ****     };
  40:../../libdaisy/src/hid/midi.h **** 
  41:../../libdaisy/src/hid/midi.h ****     inline void Init(Config config)
  42:../../libdaisy/src/hid/midi.h ****     {
ARM GAS  /tmp/ccgxtOMv.s 			page 3


  43:../../libdaisy/src/hid/midi.h ****         UartHandler::Config uart_config;
  44:../../libdaisy/src/hid/midi.h **** 
  45:../../libdaisy/src/hid/midi.h ****         //defaults
  46:../../libdaisy/src/hid/midi.h ****         uart_config.baudrate   = 31250;
  47:../../libdaisy/src/hid/midi.h ****         uart_config.stopbits   = UartHandler::Config::StopBits::BITS_1;
  48:../../libdaisy/src/hid/midi.h ****         uart_config.parity     = UartHandler::Config::Parity::NONE;
  49:../../libdaisy/src/hid/midi.h ****         uart_config.mode       = UartHandler::Config::Mode::TX_RX;
  50:../../libdaisy/src/hid/midi.h ****         uart_config.wordlength = UartHandler::Config::WordLength::BITS_8;
  51:../../libdaisy/src/hid/midi.h **** 
  52:../../libdaisy/src/hid/midi.h ****         //user settings
  53:../../libdaisy/src/hid/midi.h ****         uart_config.periph        = config.periph;
  54:../../libdaisy/src/hid/midi.h ****         uart_config.pin_config.rx = config.rx;
  55:../../libdaisy/src/hid/midi.h ****         uart_config.pin_config.tx = config.tx;
  56:../../libdaisy/src/hid/midi.h **** 
  57:../../libdaisy/src/hid/midi.h ****         uart_.Init(uart_config);
  58:../../libdaisy/src/hid/midi.h ****     }
  59:../../libdaisy/src/hid/midi.h **** 
  60:../../libdaisy/src/hid/midi.h ****     inline void    StartRx() { uart_.StartRx(); }
  61:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
  62:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
  63:../../libdaisy/src/hid/midi.h ****     inline bool    RxActive() { return uart_.RxActive(); }
  64:../../libdaisy/src/hid/midi.h ****     inline void    FlushRx() { uart_.FlushRx(); }
  65:../../libdaisy/src/hid/midi.h ****     inline void    Tx(uint8_t* buff, size_t size) { uart_.PollTx(buff, size); }
  66:../../libdaisy/src/hid/midi.h **** 
  67:../../libdaisy/src/hid/midi.h ****   private:
  68:../../libdaisy/src/hid/midi.h ****     UartHandler uart_;
  69:../../libdaisy/src/hid/midi.h **** };
  70:../../libdaisy/src/hid/midi.h **** 
  71:../../libdaisy/src/hid/midi.h **** /** 
  72:../../libdaisy/src/hid/midi.h ****     @brief Simple MIDI Handler \n 
  73:../../libdaisy/src/hid/midi.h ****     Parses bytes from an input into valid MidiEvents. \n 
  74:../../libdaisy/src/hid/midi.h ****     The MidiEvents fill a FIFO queue that the user can pop messages from.
  75:../../libdaisy/src/hid/midi.h ****     @author shensley
  76:../../libdaisy/src/hid/midi.h ****     @date March 2020
  77:../../libdaisy/src/hid/midi.h **** */
  78:../../libdaisy/src/hid/midi.h **** template <typename Transport>
  79:../../libdaisy/src/hid/midi.h **** class MidiHandler
  80:../../libdaisy/src/hid/midi.h **** {
  81:../../libdaisy/src/hid/midi.h ****   public:
  82:../../libdaisy/src/hid/midi.h ****     MidiHandler() {}
  83:../../libdaisy/src/hid/midi.h ****     ~MidiHandler() {}
  38              		.loc 2 83 5 view .LVU1
  39              	.LBB375:
  40              	.LBI375:
  25:../../libdaisy/src/hid/midi.h **** 
  41              		.loc 2 25 5 view .LVU2
  25:../../libdaisy/src/hid/midi.h **** 
  42              		.loc 2 25 5 is_stmt 0 view .LVU3
  43              	.LBE375:
  44              	.LBE374:
  45              	.LBB376:
  46              	.LBI376:
  47              		.file 3 "../../libdaisy/src/hid/rgb_led.h"
   1:../../libdaisy/src/hid/rgb_led.h **** #pragma once
   2:../../libdaisy/src/hid/rgb_led.h **** #ifndef DSY_RGB_LED_H
   3:../../libdaisy/src/hid/rgb_led.h **** #define DSY_RGB_LED_H
   4:../../libdaisy/src/hid/rgb_led.h **** #include "hid/led.h"
ARM GAS  /tmp/ccgxtOMv.s 			page 4


   5:../../libdaisy/src/hid/rgb_led.h **** #include "util/color.h"
   6:../../libdaisy/src/hid/rgb_led.h **** 
   7:../../libdaisy/src/hid/rgb_led.h **** namespace daisy
   8:../../libdaisy/src/hid/rgb_led.h **** {
   9:../../libdaisy/src/hid/rgb_led.h **** /** @addtogroup feedback
  10:../../libdaisy/src/hid/rgb_led.h ****     @{
  11:../../libdaisy/src/hid/rgb_led.h **** */
  12:../../libdaisy/src/hid/rgb_led.h **** 
  13:../../libdaisy/src/hid/rgb_led.h **** /** 3x LEDs configured as an RGB for ease of use. */
  14:../../libdaisy/src/hid/rgb_led.h **** class RgbLed
  15:../../libdaisy/src/hid/rgb_led.h **** {
  16:../../libdaisy/src/hid/rgb_led.h ****   public:
  17:../../libdaisy/src/hid/rgb_led.h ****     RgbLed() {}
  18:../../libdaisy/src/hid/rgb_led.h ****     ~RgbLed() {}
  48              		.loc 3 18 5 is_stmt 1 view .LVU4
  49              	.LBB377:
  50              	.LBI377:
  51              		.file 4 "../../libdaisy/src/hid/led.h"
   1:../../libdaisy/src/hid/led.h **** 
   2:../../libdaisy/src/hid/led.h **** #pragma once
   3:../../libdaisy/src/hid/led.h **** #ifndef DSY_LED_H
   4:../../libdaisy/src/hid/led.h **** #define DSY_LED_H
   5:../../libdaisy/src/hid/led.h **** #include "daisy_core.h"
   6:../../libdaisy/src/hid/led.h **** #include "per/gpio.h"
   7:../../libdaisy/src/hid/led.h **** 
   8:../../libdaisy/src/hid/led.h **** /* TODO - Get this set up to work with the dev_leddriver stuff as well
   9:../../libdaisy/src/hid/led.h **** - Setup Hardware PWM for pins that have it
  10:../../libdaisy/src/hid/led.h **** */
  11:../../libdaisy/src/hid/led.h **** 
  12:../../libdaisy/src/hid/led.h **** namespace daisy
  13:../../libdaisy/src/hid/led.h **** {
  14:../../libdaisy/src/hid/led.h **** /**
  15:../../libdaisy/src/hid/led.h ****     @brief LED Class providing simple Software PWM ability, etc \n 
  16:../../libdaisy/src/hid/led.h ****     Eventually this will work with hardware PWM, and external LED Driver devices as well.
  17:../../libdaisy/src/hid/led.h ****     @author shensley
  18:../../libdaisy/src/hid/led.h ****     @date March 2020
  19:../../libdaisy/src/hid/led.h ****     @ingroup feedback
  20:../../libdaisy/src/hid/led.h **** */
  21:../../libdaisy/src/hid/led.h **** class Led
  22:../../libdaisy/src/hid/led.h **** {
  23:../../libdaisy/src/hid/led.h ****   public:
  24:../../libdaisy/src/hid/led.h ****     Led() {}
  25:../../libdaisy/src/hid/led.h ****     ~Led() {}
  52              		.loc 4 25 5 view .LVU5
  53              		.loc 4 25 5 is_stmt 0 view .LVU6
  54              	.LBE377:
  55              	.LBB378:
  56              	.LBI378:
  57              		.loc 4 25 5 is_stmt 1 view .LVU7
  58              		.loc 4 25 5 is_stmt 0 view .LVU8
  59              	.LBE378:
  60              	.LBB379:
  61              	.LBI379:
  62              		.loc 4 25 5 is_stmt 1 view .LVU9
  63              		.loc 4 25 5 is_stmt 0 view .LVU10
  64              	.LBE379:
  65              	.LBE376:
ARM GAS  /tmp/ccgxtOMv.s 			page 5


  66              	.LBB380:
  67              	.LBI380:
  68              		.loc 3 18 5 is_stmt 1 view .LVU11
  69              	.LBB381:
  70              	.LBI381:
  71              		.loc 4 25 5 view .LVU12
  72              		.loc 4 25 5 is_stmt 0 view .LVU13
  73              	.LBE381:
  74              	.LBB382:
  75              	.LBI382:
  76              		.loc 4 25 5 is_stmt 1 view .LVU14
  77              		.loc 4 25 5 is_stmt 0 view .LVU15
  78              	.LBE382:
  79              	.LBB383:
  80              	.LBI383:
  81              		.loc 4 25 5 is_stmt 1 view .LVU16
  82              		.loc 4 25 5 is_stmt 0 view .LVU17
  83              	.LBE383:
  84              	.LBE380:
  85              	.LBB384:
  86              	.LBI384:
  87              		.file 5 "../../libdaisy/src/hid/switch.h"
   1:../../libdaisy/src/hid/switch.h **** #pragma once
   2:../../libdaisy/src/hid/switch.h **** #ifndef DSY_SWITCH_H
   3:../../libdaisy/src/hid/switch.h **** #define DSY_SWITCH_H
   4:../../libdaisy/src/hid/switch.h **** #include "daisy_core.h"
   5:../../libdaisy/src/hid/switch.h **** #include "per/gpio.h"
   6:../../libdaisy/src/hid/switch.h **** 
   7:../../libdaisy/src/hid/switch.h **** namespace daisy
   8:../../libdaisy/src/hid/switch.h **** {
   9:../../libdaisy/src/hid/switch.h **** /** 
  10:../../libdaisy/src/hid/switch.h ****     Generic Class for handling momentary/latching switches \n 
  11:../../libdaisy/src/hid/switch.h ****     Inspired/influenced by Mutable Instruments (pichenettes) Switch classes
  12:../../libdaisy/src/hid/switch.h ****     @author Stephen Hensley
  13:../../libdaisy/src/hid/switch.h ****     @date December 2019
  14:../../libdaisy/src/hid/switch.h ****     @ingroup controls
  15:../../libdaisy/src/hid/switch.h **** */
  16:../../libdaisy/src/hid/switch.h **** class Switch
  17:../../libdaisy/src/hid/switch.h **** {
  18:../../libdaisy/src/hid/switch.h ****   public:
  19:../../libdaisy/src/hid/switch.h ****     /** Specifies the expected behavior of the switch */
  20:../../libdaisy/src/hid/switch.h ****     enum Type
  21:../../libdaisy/src/hid/switch.h ****     {
  22:../../libdaisy/src/hid/switch.h ****         TYPE_TOGGLE,    /**< & */
  23:../../libdaisy/src/hid/switch.h ****         TYPE_MOMENTARY, /**< & */
  24:../../libdaisy/src/hid/switch.h ****     };
  25:../../libdaisy/src/hid/switch.h ****     /** Specifies whether the pressed is HIGH or LOW. */
  26:../../libdaisy/src/hid/switch.h ****     enum Polarity
  27:../../libdaisy/src/hid/switch.h ****     {
  28:../../libdaisy/src/hid/switch.h ****         POLARITY_NORMAL,   /**< & */
  29:../../libdaisy/src/hid/switch.h ****         POLARITY_INVERTED, /**< & */
  30:../../libdaisy/src/hid/switch.h ****     };
  31:../../libdaisy/src/hid/switch.h **** 
  32:../../libdaisy/src/hid/switch.h ****     /** Specifies whether to use built-in Pull Up/Down resistors to hold button at a given state wh
  33:../../libdaisy/src/hid/switch.h ****     enum Pull
  34:../../libdaisy/src/hid/switch.h ****     {
  35:../../libdaisy/src/hid/switch.h ****         PULL_UP,   /**< & */
ARM GAS  /tmp/ccgxtOMv.s 			page 6


  36:../../libdaisy/src/hid/switch.h ****         PULL_DOWN, /**< & */
  37:../../libdaisy/src/hid/switch.h ****         PULL_NONE, /**< & */
  38:../../libdaisy/src/hid/switch.h ****     };
  39:../../libdaisy/src/hid/switch.h **** 
  40:../../libdaisy/src/hid/switch.h ****     Switch() {}
  41:../../libdaisy/src/hid/switch.h ****     ~Switch() {}
  88              		.loc 5 41 5 is_stmt 1 view .LVU18
  89              		.loc 5 41 5 is_stmt 0 view .LVU19
  90              	.LBE384:
  91              	.LBB385:
  92              	.LBI385:
  93              		.loc 5 41 5 is_stmt 1 view .LVU20
  94              		.loc 5 41 5 is_stmt 0 view .LVU21
  95              	.LBE385:
  96              	.LBB386:
  97              	.LBI386:
  98              		.file 6 "../../libdaisy/src/hid/ctrl.h"
   1:../../libdaisy/src/hid/ctrl.h **** #pragma once
   2:../../libdaisy/src/hid/ctrl.h **** #ifndef DSY_KNOB_H
   3:../../libdaisy/src/hid/ctrl.h **** #define DSY_KNOB_H /**< & */
   4:../../libdaisy/src/hid/ctrl.h **** #include <stdint.h>
   5:../../libdaisy/src/hid/ctrl.h **** 
   6:../../libdaisy/src/hid/ctrl.h **** #ifdef __cplusplus
   7:../../libdaisy/src/hid/ctrl.h **** namespace daisy
   8:../../libdaisy/src/hid/ctrl.h **** {
   9:../../libdaisy/src/hid/ctrl.h **** /**
  10:../../libdaisy/src/hid/ctrl.h ****     @brief Hardware Interface for control inputs \n 
  11:../../libdaisy/src/hid/ctrl.h ****     Primarily designed for ADC input controls such as \n 
  12:../../libdaisy/src/hid/ctrl.h ****     potentiometers, and control voltage. \n 
  13:../../libdaisy/src/hid/ctrl.h ****     @author Stephen Hensley
  14:../../libdaisy/src/hid/ctrl.h ****     @date November 2019
  15:../../libdaisy/src/hid/ctrl.h ****     @ingroup controls
  16:../../libdaisy/src/hid/ctrl.h **** */
  17:../../libdaisy/src/hid/ctrl.h **** class AnalogControl
  18:../../libdaisy/src/hid/ctrl.h **** {
  19:../../libdaisy/src/hid/ctrl.h ****   public:
  20:../../libdaisy/src/hid/ctrl.h ****     /** Constructor */
  21:../../libdaisy/src/hid/ctrl.h ****     AnalogControl() {}
  22:../../libdaisy/src/hid/ctrl.h ****     /** destructor */
  23:../../libdaisy/src/hid/ctrl.h ****     ~AnalogControl() {}
  99              		.loc 6 23 5 is_stmt 1 view .LVU22
 100              		.loc 6 23 5 is_stmt 0 view .LVU23
 101              	.LBE386:
 102              	.LBB387:
 103              	.LBI387:
 104              		.loc 6 23 5 is_stmt 1 view .LVU24
 105              		.loc 6 23 5 is_stmt 0 view .LVU25
 106              	.LBE387:
 107              	.LBB388:
 108              	.LBI388:
 109              		.file 7 "../../libdaisy/src/hid/encoder.h"
   1:../../libdaisy/src/hid/encoder.h **** #pragma once
   2:../../libdaisy/src/hid/encoder.h **** #ifndef DSY_ENCODER_H
   3:../../libdaisy/src/hid/encoder.h **** #define DSY_ENCODER_H
   4:../../libdaisy/src/hid/encoder.h **** #include "daisy_core.h"
   5:../../libdaisy/src/hid/encoder.h **** #include "per/gpio.h"
   6:../../libdaisy/src/hid/encoder.h **** #include "hid/switch.h"
ARM GAS  /tmp/ccgxtOMv.s 			page 7


   7:../../libdaisy/src/hid/encoder.h **** 
   8:../../libdaisy/src/hid/encoder.h **** namespace daisy
   9:../../libdaisy/src/hid/encoder.h **** {
  10:../../libdaisy/src/hid/encoder.h **** /** 
  11:../../libdaisy/src/hid/encoder.h ****     @brief Generic Class for handling Quadrature Encoders \n 
  12:../../libdaisy/src/hid/encoder.h ****     Inspired/influenced by Mutable Instruments (pichenettes) Encoder classes
  13:../../libdaisy/src/hid/encoder.h ****     @author Stephen Hensley
  14:../../libdaisy/src/hid/encoder.h ****     @date December 2019
  15:../../libdaisy/src/hid/encoder.h ****     @ingroup controls
  16:../../libdaisy/src/hid/encoder.h **** */
  17:../../libdaisy/src/hid/encoder.h **** class Encoder
  18:../../libdaisy/src/hid/encoder.h **** {
  19:../../libdaisy/src/hid/encoder.h ****   public:
  20:../../libdaisy/src/hid/encoder.h ****     Encoder() {}
  21:../../libdaisy/src/hid/encoder.h ****     ~Encoder() {}
 110              		.loc 7 21 5 is_stmt 1 view .LVU26
 111              	.LBB389:
 112              	.LBI389:
 113              		.loc 5 41 5 view .LVU27
 114              		.loc 5 41 5 is_stmt 0 view .LVU28
 115              	.LBE389:
 116              	.LBE388:
 117              	.LBB390:
 118              	.LBI390:
 119              		.file 8 "../../libdaisy/src/daisy_seed.h"
   1:../../libdaisy/src/daisy_seed.h **** #pragma once
   2:../../libdaisy/src/daisy_seed.h **** #ifndef DSY_SEED_H
   3:../../libdaisy/src/daisy_seed.h **** #define DSY_SEED_H
   4:../../libdaisy/src/daisy_seed.h **** 
   5:../../libdaisy/src/daisy_seed.h **** #include "daisy.h"
   6:../../libdaisy/src/daisy_seed.h **** 
   7:../../libdaisy/src/daisy_seed.h **** //Uncomment this out if you're still using the rev2 hardware
   8:../../libdaisy/src/daisy_seed.h **** //#define SEED_REV2
   9:../../libdaisy/src/daisy_seed.h **** 
  10:../../libdaisy/src/daisy_seed.h **** namespace daisy
  11:../../libdaisy/src/daisy_seed.h **** {
  12:../../libdaisy/src/daisy_seed.h **** /**
  13:../../libdaisy/src/daisy_seed.h ****    @brief This is the higher-level interface for the Daisy board. \n 
  14:../../libdaisy/src/daisy_seed.h ****     All basic peripheral configuration/initialization is setup here. \n
  15:../../libdaisy/src/daisy_seed.h **** 
  16:../../libdaisy/src/daisy_seed.h ****    @ingroup boards
  17:../../libdaisy/src/daisy_seed.h **** */
  18:../../libdaisy/src/daisy_seed.h **** class DaisySeed
  19:../../libdaisy/src/daisy_seed.h **** {
  20:../../libdaisy/src/daisy_seed.h ****   public:
  21:../../libdaisy/src/daisy_seed.h ****     DaisySeed() {}
  22:../../libdaisy/src/daisy_seed.h ****     ~DaisySeed() {}
 120              		.loc 8 22 5 is_stmt 1 view .LVU29
 121              	.LBB391:
 122              	.LBI391:
 123              		.file 9 "../../libdaisy/src/sys/system.h"
   1:../../libdaisy/src/sys/system.h **** #ifndef DSY_SYSTEM_H
   2:../../libdaisy/src/sys/system.h **** #define DSY_SYSTEM_H
   3:../../libdaisy/src/sys/system.h **** 
   4:../../libdaisy/src/sys/system.h **** #ifndef UNIT_TEST // for unit tests, a dummy implementation is provided below
   5:../../libdaisy/src/sys/system.h **** 
   6:../../libdaisy/src/sys/system.h **** #include <cstdint>
ARM GAS  /tmp/ccgxtOMv.s 			page 8


   7:../../libdaisy/src/sys/system.h **** #include "per/tim.h"
   8:../../libdaisy/src/sys/system.h **** 
   9:../../libdaisy/src/sys/system.h **** namespace daisy
  10:../../libdaisy/src/sys/system.h **** {
  11:../../libdaisy/src/sys/system.h **** /** A handle for interacting with the Core System. 
  12:../../libdaisy/src/sys/system.h ****  ** This includes the Clock tree, MPU, global DMA initialization,
  13:../../libdaisy/src/sys/system.h ****  ** cache handling, and any other necessary global initiailzation
  14:../../libdaisy/src/sys/system.h ****  **
  15:../../libdaisy/src/sys/system.h ****  ** @author shensley
  16:../../libdaisy/src/sys/system.h ****  ** @addtogroup system
  17:../../libdaisy/src/sys/system.h ****  */
  18:../../libdaisy/src/sys/system.h **** class System
  19:../../libdaisy/src/sys/system.h **** {
  20:../../libdaisy/src/sys/system.h ****   public:
  21:../../libdaisy/src/sys/system.h ****     /** Contains settings for initializing the System */
  22:../../libdaisy/src/sys/system.h ****     struct Config
  23:../../libdaisy/src/sys/system.h ****     {
  24:../../libdaisy/src/sys/system.h ****         /** Specifies the system clock frequency that feeds APB/AHB clocks, etc. */
  25:../../libdaisy/src/sys/system.h ****         enum class SysClkFreq
  26:../../libdaisy/src/sys/system.h ****         {
  27:../../libdaisy/src/sys/system.h ****             FREQ_400MHZ,
  28:../../libdaisy/src/sys/system.h ****             FREQ_480MHZ,
  29:../../libdaisy/src/sys/system.h ****         };
  30:../../libdaisy/src/sys/system.h **** 
  31:../../libdaisy/src/sys/system.h ****         /** Method to call on the struct to set to defaults
  32:../../libdaisy/src/sys/system.h ****          ** CPU Freq set to 400MHz
  33:../../libdaisy/src/sys/system.h ****          ** Cache Enabled 
  34:../../libdaisy/src/sys/system.h ****          ** */
  35:../../libdaisy/src/sys/system.h ****         void Defaults()
  36:../../libdaisy/src/sys/system.h ****         {
  37:../../libdaisy/src/sys/system.h ****             cpu_freq   = SysClkFreq::FREQ_400MHZ;
  38:../../libdaisy/src/sys/system.h ****             use_dcache = true;
  39:../../libdaisy/src/sys/system.h ****             use_icache = true;
  40:../../libdaisy/src/sys/system.h ****         }
  41:../../libdaisy/src/sys/system.h **** 
  42:../../libdaisy/src/sys/system.h ****         /** Method to call on the struct to set to boost mode:
  43:../../libdaisy/src/sys/system.h ****          ** CPU Freq set to 480MHz
  44:../../libdaisy/src/sys/system.h ****          ** Cache Enabled 
  45:../../libdaisy/src/sys/system.h ****          ** */
  46:../../libdaisy/src/sys/system.h ****         void Boost()
  47:../../libdaisy/src/sys/system.h ****         {
  48:../../libdaisy/src/sys/system.h ****             cpu_freq   = SysClkFreq::FREQ_480MHZ;
  49:../../libdaisy/src/sys/system.h ****             use_dcache = true;
  50:../../libdaisy/src/sys/system.h ****             use_icache = true;
  51:../../libdaisy/src/sys/system.h ****         }
  52:../../libdaisy/src/sys/system.h **** 
  53:../../libdaisy/src/sys/system.h ****         SysClkFreq cpu_freq;
  54:../../libdaisy/src/sys/system.h ****         bool       use_dcache;
  55:../../libdaisy/src/sys/system.h ****         bool       use_icache;
  56:../../libdaisy/src/sys/system.h ****     };
  57:../../libdaisy/src/sys/system.h **** 
  58:../../libdaisy/src/sys/system.h ****     System() {}
  59:../../libdaisy/src/sys/system.h ****     ~System() {}
 124              		.loc 9 59 5 view .LVU30
 125              		.loc 9 59 5 is_stmt 0 view .LVU31
 126              	.LBE391:
 127              	.LBB392:
ARM GAS  /tmp/ccgxtOMv.s 			page 9


 128              	.LBI392:
 129              		.file 10 "../../libdaisy/src/hid/usb.h"
   1:../../libdaisy/src/hid/usb.h **** #pragma once
   2:../../libdaisy/src/hid/usb.h **** #ifndef DSY_HID_USB_H
   3:../../libdaisy/src/hid/usb.h **** #define DSY_HID_USB_H
   4:../../libdaisy/src/hid/usb.h **** #include <stdint.h>
   5:../../libdaisy/src/hid/usb.h **** #include <stdlib.h>
   6:../../libdaisy/src/hid/usb.h **** 
   7:../../libdaisy/src/hid/usb.h **** namespace daisy
   8:../../libdaisy/src/hid/usb.h **** /** @addtogroup externals
   9:../../libdaisy/src/hid/usb.h ****     @{
  10:../../libdaisy/src/hid/usb.h **** */
  11:../../libdaisy/src/hid/usb.h **** 
  12:../../libdaisy/src/hid/usb.h **** {
  13:../../libdaisy/src/hid/usb.h **** /** 
  14:../../libdaisy/src/hid/usb.h ****     @brief Interface for initializing and using the USB Peripherals on the daisy
  15:../../libdaisy/src/hid/usb.h ****     @author Stephen Hensley
  16:../../libdaisy/src/hid/usb.h ****     @date December 2019
  17:../../libdaisy/src/hid/usb.h **** */
  18:../../libdaisy/src/hid/usb.h **** class UsbHandle
  19:../../libdaisy/src/hid/usb.h **** {
  20:../../libdaisy/src/hid/usb.h ****   public:
  21:../../libdaisy/src/hid/usb.h ****     /** Return values for USBHandle Functions */
  22:../../libdaisy/src/hid/usb.h ****     enum class Result
  23:../../libdaisy/src/hid/usb.h ****     {
  24:../../libdaisy/src/hid/usb.h ****         OK,
  25:../../libdaisy/src/hid/usb.h ****         ERR,
  26:../../libdaisy/src/hid/usb.h ****     };
  27:../../libdaisy/src/hid/usb.h **** 
  28:../../libdaisy/src/hid/usb.h ****     /** Specified which of the two USB Peripherals to initialize. */
  29:../../libdaisy/src/hid/usb.h ****     enum UsbPeriph
  30:../../libdaisy/src/hid/usb.h ****     {
  31:../../libdaisy/src/hid/usb.h ****         FS_INTERNAL, /**< Internal pin */
  32:../../libdaisy/src/hid/usb.h ****         FS_EXTERNAL, /**< FS External D+ pin is Pin 38 (GPIO32). FS External D- pin is Pin 37 (GPIO
  33:../../libdaisy/src/hid/usb.h ****         FS_BOTH,     /**< Both */
  34:../../libdaisy/src/hid/usb.h ****     };
  35:../../libdaisy/src/hid/usb.h **** 
  36:../../libdaisy/src/hid/usb.h **** 
  37:../../libdaisy/src/hid/usb.h ****     /** Function called upon reception of a buffer */
  38:../../libdaisy/src/hid/usb.h ****     typedef void (*ReceiveCallback)(uint8_t* buff, uint32_t* len);
  39:../../libdaisy/src/hid/usb.h **** 
  40:../../libdaisy/src/hid/usb.h ****     UsbHandle() {}
  41:../../libdaisy/src/hid/usb.h **** 
  42:../../libdaisy/src/hid/usb.h ****     ~UsbHandle() {}
 130              		.loc 10 42 5 is_stmt 1 view .LVU32
 131              		.loc 10 42 5 is_stmt 0 view .LVU33
 132              	.LBE392:
 133              	.LBB393:
 134              	.LBI393:
 135              		.file 11 "../../libdaisy/src/per/adc.h"
   1:../../libdaisy/src/per/adc.h **** #pragma once
   2:../../libdaisy/src/per/adc.h **** #ifndef DSY_ADC_H
   3:../../libdaisy/src/per/adc.h **** #define DSY_ADC_H /**< Macro */
   4:../../libdaisy/src/per/adc.h **** #include <stdint.h>
   5:../../libdaisy/src/per/adc.h **** #include <stdlib.h>
   6:../../libdaisy/src/per/adc.h **** #include "daisy_core.h"
   7:../../libdaisy/src/per/adc.h **** #include "per/gpio.h"
ARM GAS  /tmp/ccgxtOMv.s 			page 10


   8:../../libdaisy/src/per/adc.h **** 
   9:../../libdaisy/src/per/adc.h **** #define DSY_ADC_MAX_CHANNELS 14 /**< Maximum number of ADC channels */
  10:../../libdaisy/src/per/adc.h **** 
  11:../../libdaisy/src/per/adc.h **** namespace daisy
  12:../../libdaisy/src/per/adc.h **** {
  13:../../libdaisy/src/per/adc.h **** /** @addtogroup analog_digital_conversion
  14:../../libdaisy/src/per/adc.h ****     @{
  15:../../libdaisy/src/per/adc.h **** */
  16:../../libdaisy/src/per/adc.h **** 
  17:../../libdaisy/src/per/adc.h **** /* While there may not be many configuration options here,
  18:../../libdaisy/src/per/adc.h **** using a struct like this allows us to add more configuration
  19:../../libdaisy/src/per/adc.h **** later without breaking existing functionality.
  20:../../libdaisy/src/per/adc.h **** */
  21:../../libdaisy/src/per/adc.h **** 
  22:../../libdaisy/src/per/adc.h **** /** Configuration Structure for a given channel */
  23:../../libdaisy/src/per/adc.h **** struct AdcChannelConfig
  24:../../libdaisy/src/per/adc.h **** {
  25:../../libdaisy/src/per/adc.h ****     /** Which pin to use for multiplexing */
  26:../../libdaisy/src/per/adc.h ****     enum MuxPin
  27:../../libdaisy/src/per/adc.h ****     {
  28:../../libdaisy/src/per/adc.h ****         MUX_SEL_0,    /**< & */
  29:../../libdaisy/src/per/adc.h ****         MUX_SEL_1,    /**< & */
  30:../../libdaisy/src/per/adc.h ****         MUX_SEL_2,    /**< & */
  31:../../libdaisy/src/per/adc.h ****         MUX_SEL_LAST, /**< & */
  32:../../libdaisy/src/per/adc.h ****     };
  33:../../libdaisy/src/per/adc.h **** 
  34:../../libdaisy/src/per/adc.h ****     /** Initializes a single ADC pin as an ADC. 
  35:../../libdaisy/src/per/adc.h ****     \param pin Pin to init.
  36:../../libdaisy/src/per/adc.h ****      */
  37:../../libdaisy/src/per/adc.h ****     void InitSingle(dsy_gpio_pin pin);
  38:../../libdaisy/src/per/adc.h **** 
  39:../../libdaisy/src/per/adc.h ****     /** 
  40:../../libdaisy/src/per/adc.h ****     Initializes a single ADC pin as a Multiplexed ADC.
  41:../../libdaisy/src/per/adc.h ****     Requires a CD405X Multiplexer connected to the pin.
  42:../../libdaisy/src/per/adc.h ****     You only need to supply the mux pins that are required,
  43:../../libdaisy/src/per/adc.h ****     e.g. a 4052 mux would only require mux_0 and mux_1.
  44:../../libdaisy/src/per/adc.h ****     Internal Callbacks handle the pin addressing.
  45:../../libdaisy/src/per/adc.h ****     \param mux_channels must be 1-8
  46:../../libdaisy/src/per/adc.h ****     \param mux_0 First mux pin
  47:../../libdaisy/src/per/adc.h ****     \param mux_1 Second mux pin
  48:../../libdaisy/src/per/adc.h ****     \param mux_2 Third mux pin
  49:../../libdaisy/src/per/adc.h ****     \param adc_pin &
  50:../../libdaisy/src/per/adc.h ****     */
  51:../../libdaisy/src/per/adc.h ****     void InitMux(dsy_gpio_pin adc_pin,
  52:../../libdaisy/src/per/adc.h ****                  size_t       mux_channels,
  53:../../libdaisy/src/per/adc.h ****                  dsy_gpio_pin mux_0,
  54:../../libdaisy/src/per/adc.h ****                  dsy_gpio_pin mux_1 = {DSY_GPIOX, 0},
  55:../../libdaisy/src/per/adc.h ****                  dsy_gpio_pin mux_2 = {DSY_GPIOX, 0});
  56:../../libdaisy/src/per/adc.h **** 
  57:../../libdaisy/src/per/adc.h ****     dsy_gpio pin_;                   /**< & */
  58:../../libdaisy/src/per/adc.h ****     dsy_gpio mux_pin_[MUX_SEL_LAST]; /**< & */
  59:../../libdaisy/src/per/adc.h ****     uint8_t  mux_channels_;          /**< & */
  60:../../libdaisy/src/per/adc.h **** };
  61:../../libdaisy/src/per/adc.h **** 
  62:../../libdaisy/src/per/adc.h **** /**
  63:../../libdaisy/src/per/adc.h ****    Handler for analog to digital conversion
  64:../../libdaisy/src/per/adc.h **** */
ARM GAS  /tmp/ccgxtOMv.s 			page 11


  65:../../libdaisy/src/per/adc.h **** class AdcHandle
  66:../../libdaisy/src/per/adc.h **** {
  67:../../libdaisy/src/per/adc.h ****   public:
  68:../../libdaisy/src/per/adc.h ****     /** Supported oversampling amounts */
  69:../../libdaisy/src/per/adc.h ****     enum OverSampling
  70:../../libdaisy/src/per/adc.h ****     {
  71:../../libdaisy/src/per/adc.h ****         OVS_NONE, /**< & */
  72:../../libdaisy/src/per/adc.h ****         OVS_4,    /**< & */
  73:../../libdaisy/src/per/adc.h ****         OVS_8,    /**< & */
  74:../../libdaisy/src/per/adc.h ****         OVS_16,   /**< & */
  75:../../libdaisy/src/per/adc.h ****         OVS_32,   /**< & */
  76:../../libdaisy/src/per/adc.h ****         OVS_64,   /**< & */
  77:../../libdaisy/src/per/adc.h ****         OVS_128,  /**< & */
  78:../../libdaisy/src/per/adc.h ****         OVS_256,  /**< & */
  79:../../libdaisy/src/per/adc.h ****         OVS_512,  /**< & */
  80:../../libdaisy/src/per/adc.h ****         OVS_1024, /**< & */
  81:../../libdaisy/src/per/adc.h ****         OVS_LAST, /**< & */
  82:../../libdaisy/src/per/adc.h ****     };
  83:../../libdaisy/src/per/adc.h **** 
  84:../../libdaisy/src/per/adc.h ****     AdcHandle() {}
  85:../../libdaisy/src/per/adc.h ****     ~AdcHandle() {}
 136              		.loc 11 85 5 is_stmt 1 view .LVU34
 137              		.loc 11 85 5 is_stmt 0 view .LVU35
 138              	.LBE393:
 139              	.LBB394:
 140              	.LBI394:
 141              		.file 12 "../../libdaisy/src/hid/audio.h"
   1:../../libdaisy/src/hid/audio.h **** #ifndef DSY_AUDIO_H
   2:../../libdaisy/src/hid/audio.h **** #define DSY_AUDIO_H /**< & */
   3:../../libdaisy/src/hid/audio.h **** 
   4:../../libdaisy/src/hid/audio.h **** #include "per/sai.h"
   5:../../libdaisy/src/hid/audio.h **** 
   6:../../libdaisy/src/hid/audio.h **** namespace daisy
   7:../../libdaisy/src/hid/audio.h **** {
   8:../../libdaisy/src/hid/audio.h **** class AudioHandle
   9:../../libdaisy/src/hid/audio.h **** {
  10:../../libdaisy/src/hid/audio.h ****   public:
  11:../../libdaisy/src/hid/audio.h ****     /** Manually configurable details about the Audio Engine */
  12:../../libdaisy/src/hid/audio.h ****     /** TODO: Figure out how to get samplerate in here. */
  13:../../libdaisy/src/hid/audio.h ****     struct Config
  14:../../libdaisy/src/hid/audio.h ****     {
  15:../../libdaisy/src/hid/audio.h ****         size_t                        blocksize;
  16:../../libdaisy/src/hid/audio.h ****         SaiHandle::Config::SampleRate samplerate;
  17:../../libdaisy/src/hid/audio.h ****         float                         postgain;
  18:../../libdaisy/src/hid/audio.h ****     };
  19:../../libdaisy/src/hid/audio.h **** 
  20:../../libdaisy/src/hid/audio.h ****     enum class Result
  21:../../libdaisy/src/hid/audio.h ****     {
  22:../../libdaisy/src/hid/audio.h ****         OK,
  23:../../libdaisy/src/hid/audio.h ****         ERR,
  24:../../libdaisy/src/hid/audio.h ****     };
  25:../../libdaisy/src/hid/audio.h **** 
  26:../../libdaisy/src/hid/audio.h ****     /** Non-Interleaving input buffer
  27:../../libdaisy/src/hid/audio.h ****      * Buffer arranged by float[chn][sample] 
  28:../../libdaisy/src/hid/audio.h ****      * const so that the user can't modify the input
  29:../../libdaisy/src/hid/audio.h ****     */
  30:../../libdaisy/src/hid/audio.h ****     typedef const float* const* InputBuffer;
ARM GAS  /tmp/ccgxtOMv.s 			page 12


  31:../../libdaisy/src/hid/audio.h **** 
  32:../../libdaisy/src/hid/audio.h ****     /** Non-Interleaving output buffer
  33:../../libdaisy/src/hid/audio.h ****      * Arranged by float[chn][sample] 
  34:../../libdaisy/src/hid/audio.h ****     */
  35:../../libdaisy/src/hid/audio.h ****     typedef float** OutputBuffer;
  36:../../libdaisy/src/hid/audio.h **** 
  37:../../libdaisy/src/hid/audio.h ****     /** Type for a Non-Interleaving audio callback 
  38:../../libdaisy/src/hid/audio.h ****    * Non-Interleaving audio callbacks in daisy will be of this type
  39:../../libdaisy/src/hid/audio.h ****   */
  40:../../libdaisy/src/hid/audio.h ****     typedef void (*AudioCallback)(InputBuffer  in,
  41:../../libdaisy/src/hid/audio.h ****                                   OutputBuffer out,
  42:../../libdaisy/src/hid/audio.h ****                                   size_t       size);
  43:../../libdaisy/src/hid/audio.h **** 
  44:../../libdaisy/src/hid/audio.h ****     /** Interleaving Input buffer
  45:../../libdaisy/src/hid/audio.h ****      ** audio is prepared as { L0, R0, L1, R1, . . . LN, RN }]
  46:../../libdaisy/src/hid/audio.h ****      ** this is const, as the user shouldn't modify it
  47:../../libdaisy/src/hid/audio.h ****     */
  48:../../libdaisy/src/hid/audio.h ****     typedef const float* InterleavingInputBuffer;
  49:../../libdaisy/src/hid/audio.h **** 
  50:../../libdaisy/src/hid/audio.h ****     /** Interleaving Output buffer 
  51:../../libdaisy/src/hid/audio.h ****      ** audio is prepared as { L0, R0, L1, R1, . . . LN, RN }
  52:../../libdaisy/src/hid/audio.h ****     */
  53:../../libdaisy/src/hid/audio.h ****     typedef float* InterleavingOutputBuffer;
  54:../../libdaisy/src/hid/audio.h **** 
  55:../../libdaisy/src/hid/audio.h ****     /** Interleaving Audio Callback 
  56:../../libdaisy/src/hid/audio.h ****    * Interleaving audio callbacks in daisy must be of this type
  57:../../libdaisy/src/hid/audio.h ****   */
  58:../../libdaisy/src/hid/audio.h ****     typedef void (*InterleavingAudioCallback)(InterleavingInputBuffer  in,
  59:../../libdaisy/src/hid/audio.h ****                                               InterleavingOutputBuffer out,
  60:../../libdaisy/src/hid/audio.h ****                                               size_t                   size);
  61:../../libdaisy/src/hid/audio.h **** 
  62:../../libdaisy/src/hid/audio.h ****     AudioHandle() : pimpl_(nullptr) {}
  63:../../libdaisy/src/hid/audio.h ****     ~AudioHandle() {}
 142              		.loc 12 63 5 is_stmt 1 view .LVU36
 143              		.loc 12 63 5 is_stmt 0 view .LVU37
 144              	.LBE394:
 145              	.LBE390:
 146              		.loc 1 36 18 view .LVU38
 147 0000 7047     		bx	lr
 148              		.cfi_endproc
 149              	.LFE2046:
 151              		.weak	_ZN5daisy8DaisyPodD1Ev
 152              		.thumb_set _ZN5daisy8DaisyPodD1Ev,_ZN5daisy8DaisyPodD2Ev
 153 0002 00BF     		.section	.text._ZN7daisysp10OscillatorD2Ev,"axG",%progbits,_ZN7daisysp10OscillatorD5Ev,comdat
 154              		.align	1
 155              		.p2align 2,,3
 156              		.weak	_ZN7daisysp10OscillatorD2Ev
 157              		.syntax unified
 158              		.thumb
 159              		.thumb_func
 160              		.fpu fpv5-d16
 162              	_ZN7daisysp10OscillatorD2Ev:
 163              	.LVL1:
 164              	.LFB3681:
 165              		.file 13 "../../DaisySP/Source/Synthesis/oscillator.h"
   1:../../DaisySP/Source/Synthesis/oscillator.h **** #pragma once
   2:../../DaisySP/Source/Synthesis/oscillator.h **** #ifndef DSY_OSCILLATOR_H
ARM GAS  /tmp/ccgxtOMv.s 			page 13


   3:../../DaisySP/Source/Synthesis/oscillator.h **** #define DSY_OSCILLATOR_H
   4:../../DaisySP/Source/Synthesis/oscillator.h **** #include <stdint.h>
   5:../../DaisySP/Source/Synthesis/oscillator.h **** #include "Utility/dsp.h"
   6:../../DaisySP/Source/Synthesis/oscillator.h **** #ifdef __cplusplus
   7:../../DaisySP/Source/Synthesis/oscillator.h **** 
   8:../../DaisySP/Source/Synthesis/oscillator.h **** namespace daisysp
   9:../../DaisySP/Source/Synthesis/oscillator.h **** {
  10:../../DaisySP/Source/Synthesis/oscillator.h **** /** Synthesis of several waveforms, including polyBLEP bandlimited waveforms.
  11:../../DaisySP/Source/Synthesis/oscillator.h **** */
  12:../../DaisySP/Source/Synthesis/oscillator.h **** class Oscillator
  13:../../DaisySP/Source/Synthesis/oscillator.h **** {
  14:../../DaisySP/Source/Synthesis/oscillator.h ****   public:
  15:../../DaisySP/Source/Synthesis/oscillator.h ****     Oscillator() {}
  16:../../DaisySP/Source/Synthesis/oscillator.h ****     ~Oscillator() {}
 166              		.loc 13 16 5 is_stmt 1 view -0
 167              		.cfi_startproc
 168              		@ args = 0, pretend = 0, frame = 0
 169              		@ frame_needed = 0, uses_anonymous_args = 0
 170              		@ link register save eliminated.
 171              		.loc 13 16 20 is_stmt 0 view .LVU40
 172 0000 7047     		bx	lr
 173              		.cfi_endproc
 174              	.LFE3681:
 176              		.weak	_ZN7daisysp10OscillatorD1Ev
 177              		.thumb_set _ZN7daisysp10OscillatorD1Ev,_ZN7daisysp10OscillatorD2Ev
 178 0002 00BF     		.section	.text._ZN7daisysp3SvfD2Ev,"axG",%progbits,_ZN7daisysp3SvfD5Ev,comdat
 179              		.align	1
 180              		.p2align 2,,3
 181              		.weak	_ZN7daisysp3SvfD2Ev
 182              		.syntax unified
 183              		.thumb
 184              		.thumb_func
 185              		.fpu fpv5-d16
 187              	_ZN7daisysp3SvfD2Ev:
 188              	.LVL2:
 189              	.LFB3697:
 190              		.file 14 "../../DaisySP/Source/Filters/svf.h"
   1:../../DaisySP/Source/Filters/svf.h **** #pragma once
   2:../../DaisySP/Source/Filters/svf.h **** #ifndef DSY_SVF_H
   3:../../DaisySP/Source/Filters/svf.h **** #define DSY_SVF_H
   4:../../DaisySP/Source/Filters/svf.h **** 
   5:../../DaisySP/Source/Filters/svf.h **** namespace daisysp
   6:../../DaisySP/Source/Filters/svf.h **** {
   7:../../DaisySP/Source/Filters/svf.h **** /**      Double Sampled, Stable State Variable Filter
   8:../../DaisySP/Source/Filters/svf.h **** 
   9:../../DaisySP/Source/Filters/svf.h **** Credit to Andrew Simper from musicdsp.org
  10:../../DaisySP/Source/Filters/svf.h **** 
  11:../../DaisySP/Source/Filters/svf.h **** This is his "State Variable Filter (Double Sampled, Stable)"
  12:../../DaisySP/Source/Filters/svf.h **** 
  13:../../DaisySP/Source/Filters/svf.h **** Additional thanks to Laurent de Soras for stability limit, and 
  14:../../DaisySP/Source/Filters/svf.h **** Stefan Diedrichsen for the correct notch output
  15:../../DaisySP/Source/Filters/svf.h **** 
  16:../../DaisySP/Source/Filters/svf.h **** Ported by: Stephen Hensley
  17:../../DaisySP/Source/Filters/svf.h **** */
  18:../../DaisySP/Source/Filters/svf.h **** class Svf
  19:../../DaisySP/Source/Filters/svf.h **** {
  20:../../DaisySP/Source/Filters/svf.h ****   public:
ARM GAS  /tmp/ccgxtOMv.s 			page 14


  21:../../DaisySP/Source/Filters/svf.h ****     Svf() {}
  22:../../DaisySP/Source/Filters/svf.h ****     ~Svf() {}
 191              		.loc 14 22 5 is_stmt 1 view -0
 192              		.cfi_startproc
 193              		@ args = 0, pretend = 0, frame = 0
 194              		@ frame_needed = 0, uses_anonymous_args = 0
 195              		@ link register save eliminated.
 196              		.loc 14 22 13 is_stmt 0 view .LVU42
 197 0000 7047     		bx	lr
 198              		.cfi_endproc
 199              	.LFE3697:
 201              		.weak	_ZN7daisysp3SvfD1Ev
 202              		.thumb_set _ZN7daisysp3SvfD1Ev,_ZN7daisysp3SvfD2Ev
 203 0002 00BF     		.section	.text._Z13AudioCallbackPKfPfj,"ax",%progbits
 204              		.align	1
 205              		.p2align 2,,3
 206              		.global	_Z13AudioCallbackPKfPfj
 207              		.syntax unified
 208              		.thumb
 209              		.thumb_func
 210              		.fpu fpv5-d16
 212              	_Z13AudioCallbackPKfPfj:
 213              	.LVL3:
 214              	.LFB4219:
 215              		.file 15 "Midi.cpp"
   1:Midi.cpp      **** #include "daisy_pod.h"
   2:Midi.cpp      **** #include "daisysp.h"
   3:Midi.cpp      **** #include <stdio.h>
   4:Midi.cpp      **** #include <string.h>
   5:Midi.cpp      **** 
   6:Midi.cpp      **** using namespace daisy;
   7:Midi.cpp      **** using namespace daisysp;
   8:Midi.cpp      **** 
   9:Midi.cpp      **** DaisyPod   hw;
  10:Midi.cpp      **** Oscillator osc;
  11:Midi.cpp      **** Svf        filt;
  12:Midi.cpp      **** 
  13:Midi.cpp      **** void AudioCallback(AudioHandle::InterleavingInputBuffer  in,
  14:Midi.cpp      ****                    AudioHandle::InterleavingOutputBuffer out,
  15:Midi.cpp      ****                    size_t                                size)
  16:Midi.cpp      **** {
 216              		.loc 15 16 1 is_stmt 1 view -0
 217              		.cfi_startproc
 218              		@ args = 0, pretend = 0, frame = 0
 219              		@ frame_needed = 0, uses_anonymous_args = 0
  17:Midi.cpp      ****     float sig;
 220              		.loc 15 17 5 view .LVU44
  18:Midi.cpp      ****     for(size_t i = 0; i < size; i += 2)
 221              		.loc 15 18 5 view .LVU45
 222              	.LBB395:
 223              		.loc 15 18 25 view .LVU46
 224 0000 AAB1     		cbz	r2, .L13
 225 0002 013A     		subs	r2, r2, #1
 226              	.LVL4:
 227              		.loc 15 18 25 is_stmt 0 view .LVU47
 228              	.LBE395:
  16:Midi.cpp      ****     float sig;
ARM GAS  /tmp/ccgxtOMv.s 			page 15


 229              		.loc 15 16 1 view .LVU48
 230 0004 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 231              		.cfi_def_cfa_offset 24
 232              		.cfi_offset 3, -24
 233              		.cfi_offset 4, -20
 234              		.cfi_offset 5, -16
 235              		.cfi_offset 6, -12
 236              		.cfi_offset 7, -8
 237              		.cfi_offset 14, -4
 238 0006 0C46     		mov	r4, r1
 239              	.LBB396:
 240              		.loc 15 18 16 view .LVU49
 241 0008 0025     		movs	r5, #0
 242 000a 094F     		ldr	r7, .L16
 243 000c 22F00106 		bic	r6, r2, #1
 244              	.LVL5:
 245              	.L7:
  19:Midi.cpp      ****     {
  20:Midi.cpp      ****         sig = osc.Process();
 246              		.loc 15 20 9 is_stmt 1 discriminator 2 view .LVU50
 247              		.loc 15 20 26 is_stmt 0 discriminator 2 view .LVU51
 248 0010 0848     		ldr	r0, .L16+4
 249 0012 FFF7FEFF 		bl	_ZN7daisysp10Oscillator7ProcessEv
 250              	.LVL6:
  21:Midi.cpp      ****         filt.Process(sig);
 251              		.loc 15 21 9 is_stmt 1 discriminator 2 view .LVU52
 252              		.loc 15 21 21 is_stmt 0 discriminator 2 view .LVU53
 253 0016 0648     		ldr	r0, .L16
 254 0018 FFF7FEFF 		bl	_ZN7daisysp3Svf7ProcessEf
 255              	.LVL7:
  22:Midi.cpp      ****         out[i] = out[i + 1] = filt.Low();
 256              		.loc 15 22 9 is_stmt 1 discriminator 2 view .LVU54
 257              		.loc 15 22 39 is_stmt 0 discriminator 2 view .LVU55
 258 001c 3A6B     		ldr	r2, [r7, #48]	@ float
 259              	.LVL8:
 260              		.loc 15 22 39 discriminator 2 view .LVU56
 261              	.LBE396:
  23:../../DaisySP/Source/Filters/svf.h ****     /** Initializes the filter
  24:../../DaisySP/Source/Filters/svf.h ****         float sample_rate - sample rate of the audio engine being run, and the frequency that the P
  25:../../DaisySP/Source/Filters/svf.h ****     */
  26:../../DaisySP/Source/Filters/svf.h ****     void Init(float sample_rate);
  27:../../DaisySP/Source/Filters/svf.h **** 
  28:../../DaisySP/Source/Filters/svf.h **** 
  29:../../DaisySP/Source/Filters/svf.h ****     /** 
  30:../../DaisySP/Source/Filters/svf.h ****         Process the input signal, updating all of the outputs.
  31:../../DaisySP/Source/Filters/svf.h ****     */
  32:../../DaisySP/Source/Filters/svf.h ****     void Process(float in);
  33:../../DaisySP/Source/Filters/svf.h **** 
  34:../../DaisySP/Source/Filters/svf.h **** 
  35:../../DaisySP/Source/Filters/svf.h ****     /** sets the frequency of the cutoff frequency. 
  36:../../DaisySP/Source/Filters/svf.h ****         f must be between 0.0 and sample_rate / 3
  37:../../DaisySP/Source/Filters/svf.h ****     */
  38:../../DaisySP/Source/Filters/svf.h ****     void SetFreq(float f);
  39:../../DaisySP/Source/Filters/svf.h **** 
  40:../../DaisySP/Source/Filters/svf.h ****     /** sets the resonance of the filter.
  41:../../DaisySP/Source/Filters/svf.h ****         Must be between 0.0 and 1.0 to ensure stability.
  42:../../DaisySP/Source/Filters/svf.h ****     */
ARM GAS  /tmp/ccgxtOMv.s 			page 16


  43:../../DaisySP/Source/Filters/svf.h ****     void SetRes(float r);
  44:../../DaisySP/Source/Filters/svf.h **** 
  45:../../DaisySP/Source/Filters/svf.h ****     /** sets the drive of the filter 
  46:../../DaisySP/Source/Filters/svf.h ****         affects the response of the resonance of the filter
  47:../../DaisySP/Source/Filters/svf.h ****     */
  48:../../DaisySP/Source/Filters/svf.h ****     void SetDrive(float d);
  49:../../DaisySP/Source/Filters/svf.h ****     /** lowpass output
  50:../../DaisySP/Source/Filters/svf.h ****         \return low pass output of the filter
  51:../../DaisySP/Source/Filters/svf.h ****     */
  52:../../DaisySP/Source/Filters/svf.h ****     inline float Low() { return out_low_; }
 262              		.loc 14 52 26 is_stmt 1 discriminator 2 view .LVU57
 263              	.LBB397:
  18:Midi.cpp      ****     {
 264              		.loc 15 18 25 is_stmt 0 discriminator 2 view .LVU58
 265 001e B542     		cmp	r5, r6
 266 0020 05F10205 		add	r5, r5, #2
 267              	.LVL9:
 268              		.loc 15 22 29 discriminator 2 view .LVU59
 269 0024 6260     		str	r2, [r4, #4]	@ float
 270              		.loc 15 22 16 discriminator 2 view .LVU60
 271 0026 44F8082B 		str	r2, [r4], #8	@ float
  18:Midi.cpp      ****     {
 272              		.loc 15 18 5 is_stmt 1 discriminator 2 view .LVU61
 273              	.LVL10:
  18:Midi.cpp      ****     {
 274              		.loc 15 18 25 discriminator 2 view .LVU62
 275 002a F1D1     		bne	.L7
 276              	.LBE397:
  23:Midi.cpp      ****     }
  24:Midi.cpp      **** }
 277              		.loc 15 24 1 is_stmt 0 view .LVU63
 278 002c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 279              	.LVL11:
 280              	.L13:
 281              		.cfi_def_cfa_offset 0
 282              		.cfi_restore 3
 283              		.cfi_restore 4
 284              		.cfi_restore 5
 285              		.cfi_restore 6
 286              		.cfi_restore 7
 287              		.cfi_restore 14
 288              		.loc 15 24 1 view .LVU64
 289 002e 7047     		bx	lr
 290              	.L17:
 291              		.align	2
 292              	.L16:
 293 0030 00000000 		.word	.LANCHOR1
 294 0034 00000000 		.word	.LANCHOR0
 295              		.cfi_endproc
 296              	.LFE4219:
 298              		.section	.rodata._Z17HandleMidiMessageN5daisy9MidiEventE.str1.4,"aMS",%progbits,1
 299              		.align	2
 300              	.LC2:
 301 0000 4E6F7465 		.ascii	"Note Received:\011%d\011%d\011%d\015\012\000"
 301      20526563 
 301      65697665 
 301      643A0925 
ARM GAS  /tmp/ccgxtOMv.s 			page 17


 301      64092564 
 302              		.section	.text._Z17HandleMidiMessageN5daisy9MidiEventE,"ax",%progbits
 303              		.align	1
 304              		.p2align 2,,3
 305              		.global	_Z17HandleMidiMessageN5daisy9MidiEventE
 306              		.syntax unified
 307              		.thumb
 308              		.thumb_func
 309              		.fpu fpv5-d16
 311              	_Z17HandleMidiMessageN5daisy9MidiEventE:
 312              	.LFB4220:
  25:Midi.cpp      **** 
  26:Midi.cpp      **** // Typical Switch case for Message Type.
  27:Midi.cpp      **** void HandleMidiMessage(MidiEvent m)
  28:Midi.cpp      **** {
 313              		.loc 15 28 1 is_stmt 1 view -0
 314              		.cfi_startproc
 315              		@ args = 144, pretend = 16, frame = 512
 316              		@ frame_needed = 0, uses_anonymous_args = 0
 317 0000 84B0     		sub	sp, sp, #16
 318              		.cfi_def_cfa_offset 16
 319 0002 30B5     		push	{r4, r5, lr}
 320              		.cfi_def_cfa_offset 28
 321              		.cfi_offset 4, -28
 322              		.cfi_offset 5, -24
 323              		.cfi_offset 14, -20
 324 0004 ADF5037D 		sub	sp, sp, #524
 325              		.cfi_def_cfa_offset 552
 326              	.LVL12:
 327              		.loc 15 28 1 is_stmt 0 view .LVU66
 328 0008 86AC     		add	r4, sp, #536
 329 000a 84E80F00 		stm	r4, {r0, r1, r2, r3}
 330              	.LVL13:
 331              	.LBB398:
  29:Midi.cpp      ****     switch(m.type)
 332              		.loc 15 29 14 view .LVU67
 333 000e 9DF81822 		ldrb	r2, [sp, #536]	@ zero_extendqisi2
 334 0012 9DF82052 		ldrb	r5, [sp, #544]	@ zero_extendqisi2
 335              	.LVL14:
 336              		.loc 15 29 5 view .LVU68
 337 0016 012A     		cmp	r2, #1
 338 0018 9DF82142 		ldrb	r4, [sp, #545]	@ zero_extendqisi2
 339              	.LVL15:
 340              		.loc 15 29 5 view .LVU69
 341              	.LBE398:
 342              		.loc 15 29 5 is_stmt 1 view .LVU70
 343              	.LBB439:
 344 001c 0BD0     		beq	.L19
 345 001e 032A     		cmp	r2, #3
 346 0020 03D1     		bne	.L18
 347              	.LBB399:
  30:Midi.cpp      ****     {
  31:Midi.cpp      ****         case NoteOn:
  32:Midi.cpp      ****         {
  33:Midi.cpp      ****             NoteOnEvent p = m.AsNoteOn();
  34:Midi.cpp      ****             char        buff[512];
  35:Midi.cpp      ****             sprintf(buff,
ARM GAS  /tmp/ccgxtOMv.s 			page 18


  36:Midi.cpp      ****                     "Note Received:\t%d\t%d\t%d\r\n",
  37:Midi.cpp      ****                     m.channel,
  38:Midi.cpp      ****                     m.data[0],
  39:Midi.cpp      ****                     m.data[1]);
  40:Midi.cpp      ****             hw.seed.usb_handle.TransmitInternal((uint8_t *)buff, strlen(buff));
  41:Midi.cpp      ****             // This is to avoid Max/MSP Note outs for now..
  42:Midi.cpp      ****             if(m.data[1] != 0)
  43:Midi.cpp      ****             {
  44:Midi.cpp      ****                 p = m.AsNoteOn();
  45:Midi.cpp      ****                 osc.SetFreq(mtof(p.note));
  46:Midi.cpp      ****                 osc.SetAmp((p.velocity / 127.0f));
  47:Midi.cpp      ****             }
  48:Midi.cpp      ****         }
  49:Midi.cpp      ****         break;
  50:Midi.cpp      ****         case ControlChange:
 348              		.loc 15 50 9 view .LVU71
  51:Midi.cpp      ****         {
 349              		.loc 15 51 9 view .LVU72
 350              	.LBB400:
  52:Midi.cpp      ****             ControlChangeEvent p = m.AsControlChange();
 351              		.loc 15 52 13 view .LVU73
 352              	.LVL16:
 353              	.LBB401:
 354              	.LBI401:
 355              		.file 16 "../../libdaisy/src/hid/MidiEvent.h"
   1:../../libdaisy/src/hid/MidiEvent.h **** namespace daisy
   2:../../libdaisy/src/hid/MidiEvent.h **** {
   3:../../libdaisy/src/hid/MidiEvent.h **** /** Parsed from the Status Byte, these are the common Midi Messages that can be handled. \n
   4:../../libdaisy/src/hid/MidiEvent.h **** At this time only 3-byte messages are correctly parsed into MidiEvents.
   5:../../libdaisy/src/hid/MidiEvent.h **** */
   6:../../libdaisy/src/hid/MidiEvent.h **** enum MidiMessageType
   7:../../libdaisy/src/hid/MidiEvent.h **** {
   8:../../libdaisy/src/hid/MidiEvent.h ****     NoteOff,               /**< & */
   9:../../libdaisy/src/hid/MidiEvent.h ****     NoteOn,                /**< & */
  10:../../libdaisy/src/hid/MidiEvent.h ****     PolyphonicKeyPressure, /**< & */
  11:../../libdaisy/src/hid/MidiEvent.h ****     ControlChange,         /**< & */
  12:../../libdaisy/src/hid/MidiEvent.h ****     ProgramChange,         /**< & */
  13:../../libdaisy/src/hid/MidiEvent.h ****     ChannelPressure,       /**< & */
  14:../../libdaisy/src/hid/MidiEvent.h ****     PitchBend,             /**< & */
  15:../../libdaisy/src/hid/MidiEvent.h ****     SystemCommon,          /**< & */
  16:../../libdaisy/src/hid/MidiEvent.h ****     SystemRealTime,        /**< & */
  17:../../libdaisy/src/hid/MidiEvent.h ****     ChannelMode,           /**< & */
  18:../../libdaisy/src/hid/MidiEvent.h ****     MessageLast,           /**< & */
  19:../../libdaisy/src/hid/MidiEvent.h **** };
  20:../../libdaisy/src/hid/MidiEvent.h **** 
  21:../../libdaisy/src/hid/MidiEvent.h **** enum SystemCommonType
  22:../../libdaisy/src/hid/MidiEvent.h **** {
  23:../../libdaisy/src/hid/MidiEvent.h ****     SystemExclusive,     /**< & */
  24:../../libdaisy/src/hid/MidiEvent.h ****     MTCQuarterFrame,     /**< & */
  25:../../libdaisy/src/hid/MidiEvent.h ****     SongPositionPointer, /**< & */
  26:../../libdaisy/src/hid/MidiEvent.h ****     SongSelect,          /**< & */
  27:../../libdaisy/src/hid/MidiEvent.h ****     SCUndefined0,        /**< & */
  28:../../libdaisy/src/hid/MidiEvent.h ****     SCUndefined1,        /**< & */
  29:../../libdaisy/src/hid/MidiEvent.h ****     TuneRequest,         /**< & */
  30:../../libdaisy/src/hid/MidiEvent.h ****     SysExEnd,            /**< & */
  31:../../libdaisy/src/hid/MidiEvent.h ****     SystemCommonLast,    /**< & */
  32:../../libdaisy/src/hid/MidiEvent.h **** };
ARM GAS  /tmp/ccgxtOMv.s 			page 19


  33:../../libdaisy/src/hid/MidiEvent.h **** 
  34:../../libdaisy/src/hid/MidiEvent.h **** enum SystemRealTimeType
  35:../../libdaisy/src/hid/MidiEvent.h **** {
  36:../../libdaisy/src/hid/MidiEvent.h ****     TimingClock,        /**< & */
  37:../../libdaisy/src/hid/MidiEvent.h ****     SRTUndefined0,      /**< & */
  38:../../libdaisy/src/hid/MidiEvent.h ****     Start,              /**< & */
  39:../../libdaisy/src/hid/MidiEvent.h ****     Continue,           /**< & */
  40:../../libdaisy/src/hid/MidiEvent.h ****     Stop,               /**< & */
  41:../../libdaisy/src/hid/MidiEvent.h ****     SRTUndefined1,      /**< & */
  42:../../libdaisy/src/hid/MidiEvent.h ****     ActiveSensing,      /**< & */
  43:../../libdaisy/src/hid/MidiEvent.h ****     Reset,              /**< & */
  44:../../libdaisy/src/hid/MidiEvent.h ****     SystemRealTimeLast, /**< & */
  45:../../libdaisy/src/hid/MidiEvent.h **** };
  46:../../libdaisy/src/hid/MidiEvent.h **** 
  47:../../libdaisy/src/hid/MidiEvent.h **** enum ChannelModeType
  48:../../libdaisy/src/hid/MidiEvent.h **** {
  49:../../libdaisy/src/hid/MidiEvent.h ****     AllSoundOff,         /**< & */
  50:../../libdaisy/src/hid/MidiEvent.h ****     ResetAllControllers, /**< & */
  51:../../libdaisy/src/hid/MidiEvent.h ****     LocalControl,        /**< & */
  52:../../libdaisy/src/hid/MidiEvent.h ****     AllNotesOff,         /**< & */
  53:../../libdaisy/src/hid/MidiEvent.h ****     OmniModeOff,         /**< & */
  54:../../libdaisy/src/hid/MidiEvent.h ****     OmniModeOn,          /**< & */
  55:../../libdaisy/src/hid/MidiEvent.h ****     MonoModeOn,          /**< & */
  56:../../libdaisy/src/hid/MidiEvent.h ****     PolyModeOn,          /**< & */
  57:../../libdaisy/src/hid/MidiEvent.h ****     ChannelModeLast,     /**< & */
  58:../../libdaisy/src/hid/MidiEvent.h **** };
  59:../../libdaisy/src/hid/MidiEvent.h **** 
  60:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing note, and velocity data for a given channel.
  61:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
  62:../../libdaisy/src/hid/MidiEvent.h **** */
  63:../../libdaisy/src/hid/MidiEvent.h **** struct NoteOffEvent
  64:../../libdaisy/src/hid/MidiEvent.h **** {
  65:../../libdaisy/src/hid/MidiEvent.h ****     int     channel;  /**< & */
  66:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t note;     /**< & */
  67:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t velocity; /**< & */
  68:../../libdaisy/src/hid/MidiEvent.h **** };
  69:../../libdaisy/src/hid/MidiEvent.h **** 
  70:../../libdaisy/src/hid/MidiEvent.h **** 
  71:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing note, and velocity data for a given channel.
  72:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
  73:../../libdaisy/src/hid/MidiEvent.h **** */
  74:../../libdaisy/src/hid/MidiEvent.h **** struct NoteOnEvent
  75:../../libdaisy/src/hid/MidiEvent.h **** {
  76:../../libdaisy/src/hid/MidiEvent.h ****     int     channel;  /**< & */
  77:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t note;     /**< & */
  78:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t velocity; /**< & */
  79:../../libdaisy/src/hid/MidiEvent.h **** };
  80:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing note, and pressure data for a given channel.
  81:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
  82:../../libdaisy/src/hid/MidiEvent.h **** */
  83:../../libdaisy/src/hid/MidiEvent.h **** struct PolyphonicKeyPressureEvent
  84:../../libdaisy/src/hid/MidiEvent.h **** {
  85:../../libdaisy/src/hid/MidiEvent.h ****     int     channel;
  86:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t note;
  87:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t pressure;
  88:../../libdaisy/src/hid/MidiEvent.h **** };
  89:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing control number, and value for a given channel.
ARM GAS  /tmp/ccgxtOMv.s 			page 20


  90:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
  91:../../libdaisy/src/hid/MidiEvent.h **** */
  92:../../libdaisy/src/hid/MidiEvent.h **** struct ControlChangeEvent
  93:../../libdaisy/src/hid/MidiEvent.h **** {
  94:../../libdaisy/src/hid/MidiEvent.h ****     int     channel;        /**< & */
  95:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t control_number; /**< & */
  96:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t value;          /**< & */
  97:../../libdaisy/src/hid/MidiEvent.h **** };
  98:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing new program number, for a given channel.
  99:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 100:../../libdaisy/src/hid/MidiEvent.h **** */
 101:../../libdaisy/src/hid/MidiEvent.h **** struct ProgramChangeEvent
 102:../../libdaisy/src/hid/MidiEvent.h **** {
 103:../../libdaisy/src/hid/MidiEvent.h ****     int     channel; /**< & */
 104:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t program; /**< & */
 105:../../libdaisy/src/hid/MidiEvent.h **** };
 106:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing pressure (aftertouch), for a given channel.
 107:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 108:../../libdaisy/src/hid/MidiEvent.h **** */
 109:../../libdaisy/src/hid/MidiEvent.h **** struct ChannelPressureEvent
 110:../../libdaisy/src/hid/MidiEvent.h **** {
 111:../../libdaisy/src/hid/MidiEvent.h ****     int     channel;  /**< & */
 112:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t pressure; /**< & */
 113:../../libdaisy/src/hid/MidiEvent.h **** };
 114:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing pitch bend value for a given channel.
 115:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 116:../../libdaisy/src/hid/MidiEvent.h **** */
 117:../../libdaisy/src/hid/MidiEvent.h **** struct PitchBendEvent
 118:../../libdaisy/src/hid/MidiEvent.h **** {
 119:../../libdaisy/src/hid/MidiEvent.h ****     int     channel; /**< & */
 120:../../libdaisy/src/hid/MidiEvent.h ****     int16_t value;   /**< & */
 121:../../libdaisy/src/hid/MidiEvent.h **** };
 122:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing sysex data.
 123:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 124:../../libdaisy/src/hid/MidiEvent.h **** */
 125:../../libdaisy/src/hid/MidiEvent.h **** struct SystemExclusiveEvent
 126:../../libdaisy/src/hid/MidiEvent.h **** {
 127:../../libdaisy/src/hid/MidiEvent.h ****     int     length;
 128:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t data[SYSEX_BUFFER_LEN]; /**< & */
 129:../../libdaisy/src/hid/MidiEvent.h **** };
 130:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing QuarterFrame data.
 131:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 132:../../libdaisy/src/hid/MidiEvent.h **** */
 133:../../libdaisy/src/hid/MidiEvent.h **** struct MTCQuarterFrameEvent
 134:../../libdaisy/src/hid/MidiEvent.h **** {
 135:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t message_type; /**< & */
 136:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t value;        /**< & */
 137:../../libdaisy/src/hid/MidiEvent.h **** };
 138:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing song position data.
 139:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 140:../../libdaisy/src/hid/MidiEvent.h **** */
 141:../../libdaisy/src/hid/MidiEvent.h **** struct SongPositionPointerEvent
 142:../../libdaisy/src/hid/MidiEvent.h **** {
 143:../../libdaisy/src/hid/MidiEvent.h ****     uint16_t position; /**< & */
 144:../../libdaisy/src/hid/MidiEvent.h **** };
 145:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing song select data.
 146:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
ARM GAS  /tmp/ccgxtOMv.s 			page 21


 147:../../libdaisy/src/hid/MidiEvent.h **** */
 148:../../libdaisy/src/hid/MidiEvent.h **** struct SongSelectEvent
 149:../../libdaisy/src/hid/MidiEvent.h **** {
 150:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t song; /**< & */
 151:../../libdaisy/src/hid/MidiEvent.h **** };
 152:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing sound off data.
 153:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 154:../../libdaisy/src/hid/MidiEvent.h **** */
 155:../../libdaisy/src/hid/MidiEvent.h **** struct AllSoundOffEvent
 156:../../libdaisy/src/hid/MidiEvent.h **** {
 157:../../libdaisy/src/hid/MidiEvent.h ****     int channel; /**< & */
 158:../../libdaisy/src/hid/MidiEvent.h **** };
 159:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing ResetAllControllersEvent data.
 160:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 161:../../libdaisy/src/hid/MidiEvent.h **** */
 162:../../libdaisy/src/hid/MidiEvent.h **** struct ResetAllControllersEvent
 163:../../libdaisy/src/hid/MidiEvent.h **** {
 164:../../libdaisy/src/hid/MidiEvent.h ****     int     channel; /**< & */
 165:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t value;   /**< & */
 166:../../libdaisy/src/hid/MidiEvent.h **** };
 167:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing LocalControlEvent data.
 168:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 169:../../libdaisy/src/hid/MidiEvent.h **** */
 170:../../libdaisy/src/hid/MidiEvent.h **** struct LocalControlEvent
 171:../../libdaisy/src/hid/MidiEvent.h **** {
 172:../../libdaisy/src/hid/MidiEvent.h ****     int  channel;           /**< & */
 173:../../libdaisy/src/hid/MidiEvent.h ****     bool local_control_off; /**< & */
 174:../../libdaisy/src/hid/MidiEvent.h ****     bool local_control_on;  /**< & */
 175:../../libdaisy/src/hid/MidiEvent.h **** };
 176:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing AllNotesOffEvent data.
 177:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 178:../../libdaisy/src/hid/MidiEvent.h **** */
 179:../../libdaisy/src/hid/MidiEvent.h **** struct AllNotesOffEvent
 180:../../libdaisy/src/hid/MidiEvent.h **** {
 181:../../libdaisy/src/hid/MidiEvent.h ****     int channel; /**< & */
 182:../../libdaisy/src/hid/MidiEvent.h **** };
 183:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing OmniModeOffEvent data. 
 184:../../libdaisy/src/hid/MidiEvent.h ****  * Can be made from MidiEvent
 185:../../libdaisy/src/hid/MidiEvent.h **** */
 186:../../libdaisy/src/hid/MidiEvent.h **** struct OmniModeOffEvent
 187:../../libdaisy/src/hid/MidiEvent.h **** {
 188:../../libdaisy/src/hid/MidiEvent.h ****     int channel; /**< & */
 189:../../libdaisy/src/hid/MidiEvent.h **** };
 190:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing OmniModeOnEvent data.
 191:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 192:../../libdaisy/src/hid/MidiEvent.h **** */
 193:../../libdaisy/src/hid/MidiEvent.h **** struct OmniModeOnEvent
 194:../../libdaisy/src/hid/MidiEvent.h **** {
 195:../../libdaisy/src/hid/MidiEvent.h ****     int channel; /**< & */
 196:../../libdaisy/src/hid/MidiEvent.h **** };
 197:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing MonoModeOnEvent data.
 198:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 199:../../libdaisy/src/hid/MidiEvent.h **** */
 200:../../libdaisy/src/hid/MidiEvent.h **** struct MonoModeOnEvent
 201:../../libdaisy/src/hid/MidiEvent.h **** {
 202:../../libdaisy/src/hid/MidiEvent.h ****     int     channel;      /**< & */
 203:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t num_channels; /**< & */
ARM GAS  /tmp/ccgxtOMv.s 			page 22


 204:../../libdaisy/src/hid/MidiEvent.h **** };
 205:../../libdaisy/src/hid/MidiEvent.h **** /** Struct containing PolyModeOnEvent data.
 206:../../libdaisy/src/hid/MidiEvent.h **** Can be made from MidiEvent
 207:../../libdaisy/src/hid/MidiEvent.h **** */
 208:../../libdaisy/src/hid/MidiEvent.h **** struct PolyModeOnEvent
 209:../../libdaisy/src/hid/MidiEvent.h **** {
 210:../../libdaisy/src/hid/MidiEvent.h ****     int channel; /**< & */
 211:../../libdaisy/src/hid/MidiEvent.h **** };
 212:../../libdaisy/src/hid/MidiEvent.h **** 
 213:../../libdaisy/src/hid/MidiEvent.h **** 
 214:../../libdaisy/src/hid/MidiEvent.h **** /** Simple MidiEvent with message type, channel, and data[2] members.
 215:../../libdaisy/src/hid/MidiEvent.h **** */
 216:../../libdaisy/src/hid/MidiEvent.h **** struct MidiEvent
 217:../../libdaisy/src/hid/MidiEvent.h **** {
 218:../../libdaisy/src/hid/MidiEvent.h ****     // Newer ish.
 219:../../libdaisy/src/hid/MidiEvent.h ****     MidiMessageType    type;                         /**< & */
 220:../../libdaisy/src/hid/MidiEvent.h ****     int                channel;                      /**< & */
 221:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t            data[2];                      /**< & */
 222:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t            sysex_data[SYSEX_BUFFER_LEN]; /**< & */
 223:../../libdaisy/src/hid/MidiEvent.h ****     uint8_t            sysex_message_len;
 224:../../libdaisy/src/hid/MidiEvent.h ****     SystemCommonType   sc_type;
 225:../../libdaisy/src/hid/MidiEvent.h ****     SystemRealTimeType srt_type;
 226:../../libdaisy/src/hid/MidiEvent.h ****     ChannelModeType    cm_type;
 227:../../libdaisy/src/hid/MidiEvent.h **** 
 228:../../libdaisy/src/hid/MidiEvent.h ****     /** Returns the data within the MidiEvent as a NoteOffEvent struct */
 229:../../libdaisy/src/hid/MidiEvent.h ****     NoteOffEvent AsNoteOff()
 230:../../libdaisy/src/hid/MidiEvent.h ****     {
 231:../../libdaisy/src/hid/MidiEvent.h ****         NoteOffEvent m;
 232:../../libdaisy/src/hid/MidiEvent.h ****         m.channel  = channel;
 233:../../libdaisy/src/hid/MidiEvent.h ****         m.note     = data[0];
 234:../../libdaisy/src/hid/MidiEvent.h ****         m.velocity = data[1];
 235:../../libdaisy/src/hid/MidiEvent.h ****         return m;
 236:../../libdaisy/src/hid/MidiEvent.h ****     }
 237:../../libdaisy/src/hid/MidiEvent.h **** 
 238:../../libdaisy/src/hid/MidiEvent.h ****     /** Returns the data within the MidiEvent as a NoteOnEvent struct */
 239:../../libdaisy/src/hid/MidiEvent.h ****     NoteOnEvent AsNoteOn()
 240:../../libdaisy/src/hid/MidiEvent.h ****     {
 241:../../libdaisy/src/hid/MidiEvent.h ****         NoteOnEvent m;
 242:../../libdaisy/src/hid/MidiEvent.h ****         m.channel  = channel;
 243:../../libdaisy/src/hid/MidiEvent.h ****         m.note     = data[0];
 244:../../libdaisy/src/hid/MidiEvent.h ****         m.velocity = data[1];
 245:../../libdaisy/src/hid/MidiEvent.h ****         return m;
 246:../../libdaisy/src/hid/MidiEvent.h ****     }
 247:../../libdaisy/src/hid/MidiEvent.h **** 
 248:../../libdaisy/src/hid/MidiEvent.h ****     /** Returns the data within the MidiEvent as a PolyphonicKeyPressureEvent struct */
 249:../../libdaisy/src/hid/MidiEvent.h ****     PolyphonicKeyPressureEvent AsPolyphonicKeyPressure()
 250:../../libdaisy/src/hid/MidiEvent.h ****     {
 251:../../libdaisy/src/hid/MidiEvent.h ****         PolyphonicKeyPressureEvent m;
 252:../../libdaisy/src/hid/MidiEvent.h ****         m.channel  = channel;
 253:../../libdaisy/src/hid/MidiEvent.h ****         m.note     = data[0];
 254:../../libdaisy/src/hid/MidiEvent.h ****         m.pressure = data[1];
 255:../../libdaisy/src/hid/MidiEvent.h ****         return m;
 256:../../libdaisy/src/hid/MidiEvent.h ****     }
 257:../../libdaisy/src/hid/MidiEvent.h **** 
 258:../../libdaisy/src/hid/MidiEvent.h ****     /** Returns the data within the MidiEvent as a ControlChangeEvent struct.*/
 259:../../libdaisy/src/hid/MidiEvent.h ****     ControlChangeEvent AsControlChange()
 356              		.loc 16 259 24 view .LVU74
ARM GAS  /tmp/ccgxtOMv.s 			page 23


 357              	.LBB402:
 260:../../libdaisy/src/hid/MidiEvent.h ****     {
 261:../../libdaisy/src/hid/MidiEvent.h ****         ControlChangeEvent m;
 358              		.loc 16 261 9 view .LVU75
 262:../../libdaisy/src/hid/MidiEvent.h ****         m.channel        = channel;
 359              		.loc 16 262 9 view .LVU76
 263:../../libdaisy/src/hid/MidiEvent.h ****         m.control_number = data[0];
 360              		.loc 16 263 9 view .LVU77
 264:../../libdaisy/src/hid/MidiEvent.h ****         m.value          = data[1];
 361              		.loc 16 264 9 view .LVU78
 265:../../libdaisy/src/hid/MidiEvent.h ****         return m;
 362              		.loc 16 265 9 view .LVU79
 363              		.loc 16 265 9 is_stmt 0 view .LVU80
 364              	.LBE402:
 365              	.LBE401:
  53:Midi.cpp      ****             switch(p.control_number)
 366              		.loc 15 53 13 is_stmt 1 view .LVU81
 367 0022 012D     		cmp	r5, #1
 368 0024 55D0     		beq	.L23
 369 0026 022D     		cmp	r5, #2
 370 0028 42D0     		beq	.L24
 371              	.LVL17:
 372              	.L18:
 373              		.loc 15 53 13 is_stmt 0 view .LVU82
 374              	.LBE400:
 375              	.LBE399:
 376              	.LBE439:
  54:Midi.cpp      ****             {
  55:Midi.cpp      ****                 case 1:
  56:Midi.cpp      ****                     // CC 1 for cutoff.
  57:Midi.cpp      ****                     filt.SetFreq(mtof((float)p.value));
  58:Midi.cpp      ****                     break;
  59:Midi.cpp      ****                 case 2:
  60:Midi.cpp      ****                     // CC 2 for res.
  61:Midi.cpp      ****                     filt.SetRes(((float)p.value / 127.0f));
  62:Midi.cpp      ****                     break;
  63:Midi.cpp      ****                 default: break;
  64:Midi.cpp      ****             }
  65:Midi.cpp      ****             break;
  66:Midi.cpp      ****         }
  67:Midi.cpp      ****         default: break;
  68:Midi.cpp      ****     }
  69:Midi.cpp      **** }
 377              		.loc 15 69 1 view .LVU83
 378 002a 0DF5037D 		add	sp, sp, #524
 379              		.cfi_remember_state
 380              		.cfi_def_cfa_offset 28
 381              		@ sp needed
 382 002e BDE83040 		pop	{r4, r5, lr}
 383              		.cfi_restore 14
 384              		.cfi_restore 5
 385              		.cfi_restore 4
 386              		.cfi_def_cfa_offset 16
 387              	.LVL18:
 388              		.loc 15 69 1 view .LVU84
 389 0032 04B0     		add	sp, sp, #16
 390              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccgxtOMv.s 			page 24


 391 0034 7047     		bx	lr
 392              	.LVL19:
 393              	.L19:
 394              		.cfi_restore_state
 395              	.LBB440:
 396              	.LBB436:
  31:Midi.cpp      ****         {
 397              		.loc 15 31 9 is_stmt 1 view .LVU85
  32:Midi.cpp      ****             NoteOnEvent p = m.AsNoteOn();
 398              		.loc 15 32 9 view .LVU86
 399              	.LBB409:
  33:Midi.cpp      ****             char        buff[512];
 400              		.loc 15 33 13 view .LVU87
 401              	.LBB410:
 402              	.LBI410:
 239:../../libdaisy/src/hid/MidiEvent.h ****     {
 403              		.loc 16 239 17 view .LVU88
 404              	.LBB411:
 241:../../libdaisy/src/hid/MidiEvent.h ****         m.channel  = channel;
 405              		.loc 16 241 9 view .LVU89
 242:../../libdaisy/src/hid/MidiEvent.h ****         m.note     = data[0];
 406              		.loc 16 242 9 view .LVU90
 243:../../libdaisy/src/hid/MidiEvent.h ****         m.velocity = data[1];
 407              		.loc 16 243 9 view .LVU91
 244:../../libdaisy/src/hid/MidiEvent.h ****         return m;
 408              		.loc 16 244 9 view .LVU92
 245:../../libdaisy/src/hid/MidiEvent.h ****     }
 409              		.loc 16 245 9 view .LVU93
 245:../../libdaisy/src/hid/MidiEvent.h ****     }
 410              		.loc 16 245 9 is_stmt 0 view .LVU94
 411              	.LBE411:
 412              	.LBE410:
  34:Midi.cpp      ****             sprintf(buff,
 413              		.loc 15 34 13 is_stmt 1 view .LVU95
  35:Midi.cpp      ****                     "Note Received:\t%d\t%d\t%d\r\n",
 414              		.loc 15 35 13 view .LVU96
  35:Midi.cpp      ****                     "Note Received:\t%d\t%d\t%d\r\n",
 415              		.loc 15 35 20 is_stmt 0 view .LVU97
 416 0036 879A     		ldr	r2, [sp, #540]
 417 0038 2B46     		mov	r3, r5
 418 003a 3449     		ldr	r1, .L29
 419 003c 02A8     		add	r0, sp, #8
 420 003e 0094     		str	r4, [sp]
 421 0040 FFF7FEFF 		bl	sprintf
 422              	.LVL20:
  40:Midi.cpp      ****             // This is to avoid Max/MSP Note outs for now..
 423              		.loc 15 40 13 is_stmt 1 view .LVU98
  40:Midi.cpp      ****             // This is to avoid Max/MSP Note outs for now..
 424              		.loc 15 40 48 is_stmt 0 view .LVU99
 425 0044 02A8     		add	r0, sp, #8
 426 0046 FFF7FEFF 		bl	strlen
 427              	.LVL21:
 428 004a 02A9     		add	r1, sp, #8
 429 004c 0246     		mov	r2, r0
 430 004e 3048     		ldr	r0, .L29+4
 431 0050 FFF7FEFF 		bl	_ZN5daisy9UsbHandle16TransmitInternalEPhj
 432              	.LVL22:
ARM GAS  /tmp/ccgxtOMv.s 			page 25


  42:Midi.cpp      ****             {
 433              		.loc 15 42 13 is_stmt 1 view .LVU100
 434 0054 002C     		cmp	r4, #0
 435 0056 E8D0     		beq	.L18
  44:Midi.cpp      ****                 osc.SetFreq(mtof(p.note));
 436              		.loc 15 44 17 view .LVU101
 437              	.LVL23:
 438              	.LBB412:
 439              	.LBI412:
 239:../../libdaisy/src/hid/MidiEvent.h ****     {
 440              		.loc 16 239 17 view .LVU102
 441              	.LBB413:
 241:../../libdaisy/src/hid/MidiEvent.h ****         m.channel  = channel;
 442              		.loc 16 241 9 view .LVU103
 242:../../libdaisy/src/hid/MidiEvent.h ****         m.note     = data[0];
 443              		.loc 16 242 9 view .LVU104
 243:../../libdaisy/src/hid/MidiEvent.h ****         m.velocity = data[1];
 444              		.loc 16 243 9 view .LVU105
 244:../../libdaisy/src/hid/MidiEvent.h ****         return m;
 445              		.loc 16 244 9 view .LVU106
 245:../../libdaisy/src/hid/MidiEvent.h ****     }
 446              		.loc 16 245 9 view .LVU107
 245:../../libdaisy/src/hid/MidiEvent.h ****     }
 447              		.loc 16 245 9 is_stmt 0 view .LVU108
 448              	.LBE413:
 449              	.LBE412:
  45:Midi.cpp      ****                 osc.SetAmp((p.velocity / 127.0f));
 450              		.loc 15 45 17 is_stmt 1 view .LVU109
 451              	.LBB414:
 452              	.LBI414:
 453              		.file 17 "../../DaisySP/Source/Utility/dsp.h"
   1:../../DaisySP/Source/Utility/dsp.h **** /** Helpful defines, functions, and other utilities for use in/with daisysp modules.
   2:../../DaisySP/Source/Utility/dsp.h **** */
   3:../../DaisySP/Source/Utility/dsp.h **** #pragma once
   4:../../DaisySP/Source/Utility/dsp.h **** #ifndef DSY_CORE_DSP
   5:../../DaisySP/Source/Utility/dsp.h **** #define DSY_CORE_DSP
   6:../../DaisySP/Source/Utility/dsp.h **** #include <cassert>
   7:../../DaisySP/Source/Utility/dsp.h **** #include <cstdint>
   8:../../DaisySP/Source/Utility/dsp.h **** #include <random>
   9:../../DaisySP/Source/Utility/dsp.h **** #include <cmath>
  10:../../DaisySP/Source/Utility/dsp.h **** 
  11:../../DaisySP/Source/Utility/dsp.h **** /** PIs
  12:../../DaisySP/Source/Utility/dsp.h **** */
  13:../../DaisySP/Source/Utility/dsp.h **** #define PI_F 3.1415927410125732421875f
  14:../../DaisySP/Source/Utility/dsp.h **** #define TWOPI_F (2.0f * PI_F)
  15:../../DaisySP/Source/Utility/dsp.h **** #define HALFPI_F (PI_F * 0.5f)
  16:../../DaisySP/Source/Utility/dsp.h **** #define DSY_MIN(in, mn) (in < mn ? in : mn)
  17:../../DaisySP/Source/Utility/dsp.h **** #define DSY_MAX(in, mx) (in > mx ? in : mx)
  18:../../DaisySP/Source/Utility/dsp.h **** #define DSY_CLAMP(in, mn, mx) (DSY_MIN(DSY_MAX(in, mn), mx))
  19:../../DaisySP/Source/Utility/dsp.h **** #define DSY_COUNTOF(_arr) (sizeof(_arr) / sizeof(_arr[0]))
  20:../../DaisySP/Source/Utility/dsp.h **** 
  21:../../DaisySP/Source/Utility/dsp.h **** namespace daisysp
  22:../../DaisySP/Source/Utility/dsp.h **** {
  23:../../DaisySP/Source/Utility/dsp.h **** //Avoids division for random floats. e.g. rand() * kRandFrac
  24:../../DaisySP/Source/Utility/dsp.h **** static constexpr float kRandFrac = 1.f / (float)RAND_MAX;
  25:../../DaisySP/Source/Utility/dsp.h **** 
  26:../../DaisySP/Source/Utility/dsp.h **** //Convert from semitones to other units. e.g. 2 ^ (kOneTwelfth * x)
ARM GAS  /tmp/ccgxtOMv.s 			page 26


  27:../../DaisySP/Source/Utility/dsp.h **** static constexpr float kOneTwelfth = 1.f / 12.f;
  28:../../DaisySP/Source/Utility/dsp.h **** 
  29:../../DaisySP/Source/Utility/dsp.h **** /** efficient floating point min/max
  30:../../DaisySP/Source/Utility/dsp.h **** c/o stephen mccaul
  31:../../DaisySP/Source/Utility/dsp.h **** */
  32:../../DaisySP/Source/Utility/dsp.h **** inline float fmax(float a, float b)
  33:../../DaisySP/Source/Utility/dsp.h **** {
  34:../../DaisySP/Source/Utility/dsp.h ****     float r;
  35:../../DaisySP/Source/Utility/dsp.h **** #ifdef __arm__
  36:../../DaisySP/Source/Utility/dsp.h ****     asm("vmaxnm.f32 %[d], %[n], %[m]" : [d] "=t"(r) : [n] "t"(a), [m] "t"(b) :);
  37:../../DaisySP/Source/Utility/dsp.h **** #else
  38:../../DaisySP/Source/Utility/dsp.h ****     r = (a > b) ? a : b;
  39:../../DaisySP/Source/Utility/dsp.h **** #endif // __arm__
  40:../../DaisySP/Source/Utility/dsp.h ****     return r;
  41:../../DaisySP/Source/Utility/dsp.h **** }
  42:../../DaisySP/Source/Utility/dsp.h **** 
  43:../../DaisySP/Source/Utility/dsp.h **** inline float fmin(float a, float b)
  44:../../DaisySP/Source/Utility/dsp.h **** {
  45:../../DaisySP/Source/Utility/dsp.h ****     float r;
  46:../../DaisySP/Source/Utility/dsp.h **** #ifdef __arm__
  47:../../DaisySP/Source/Utility/dsp.h ****     asm("vminnm.f32 %[d], %[n], %[m]" : [d] "=t"(r) : [n] "t"(a), [m] "t"(b) :);
  48:../../DaisySP/Source/Utility/dsp.h **** #else
  49:../../DaisySP/Source/Utility/dsp.h ****     r = (a < b) ? a : b;
  50:../../DaisySP/Source/Utility/dsp.h **** #endif // __arm__
  51:../../DaisySP/Source/Utility/dsp.h ****     return r;
  52:../../DaisySP/Source/Utility/dsp.h **** }
  53:../../DaisySP/Source/Utility/dsp.h **** 
  54:../../DaisySP/Source/Utility/dsp.h **** /** quick fp clamp
  55:../../DaisySP/Source/Utility/dsp.h **** */
  56:../../DaisySP/Source/Utility/dsp.h **** inline float fclamp(float in, float min, float max)
  57:../../DaisySP/Source/Utility/dsp.h **** {
  58:../../DaisySP/Source/Utility/dsp.h ****     return fmin(fmax(in, min), max);
  59:../../DaisySP/Source/Utility/dsp.h **** }
  60:../../DaisySP/Source/Utility/dsp.h **** 
  61:../../DaisySP/Source/Utility/dsp.h **** /** From Musicdsp.org "Fast power and root estimates for 32bit floats)
  62:../../DaisySP/Source/Utility/dsp.h **** Original code by Stefan Stenzel
  63:../../DaisySP/Source/Utility/dsp.h **** These are approximations
  64:../../DaisySP/Source/Utility/dsp.h **** */
  65:../../DaisySP/Source/Utility/dsp.h **** inline float fastpower(float f, int n)
  66:../../DaisySP/Source/Utility/dsp.h **** {
  67:../../DaisySP/Source/Utility/dsp.h ****     long *lp, l;
  68:../../DaisySP/Source/Utility/dsp.h ****     lp = (long *)(&f);
  69:../../DaisySP/Source/Utility/dsp.h ****     l  = *lp;
  70:../../DaisySP/Source/Utility/dsp.h ****     l -= 0x3F800000;
  71:../../DaisySP/Source/Utility/dsp.h ****     l <<= (n - 1);
  72:../../DaisySP/Source/Utility/dsp.h ****     l += 0x3F800000;
  73:../../DaisySP/Source/Utility/dsp.h ****     *lp = l;
  74:../../DaisySP/Source/Utility/dsp.h ****     return f;
  75:../../DaisySP/Source/Utility/dsp.h **** }
  76:../../DaisySP/Source/Utility/dsp.h **** 
  77:../../DaisySP/Source/Utility/dsp.h **** inline float fastroot(float f, int n)
  78:../../DaisySP/Source/Utility/dsp.h **** {
  79:../../DaisySP/Source/Utility/dsp.h ****     long *lp, l;
  80:../../DaisySP/Source/Utility/dsp.h ****     lp = (long *)(&f);
  81:../../DaisySP/Source/Utility/dsp.h ****     l  = *lp;
  82:../../DaisySP/Source/Utility/dsp.h ****     l -= 0x3F800000;
  83:../../DaisySP/Source/Utility/dsp.h ****     l >>= (n = 1);
ARM GAS  /tmp/ccgxtOMv.s 			page 27


  84:../../DaisySP/Source/Utility/dsp.h ****     l += 0x3F800000;
  85:../../DaisySP/Source/Utility/dsp.h ****     *lp = l;
  86:../../DaisySP/Source/Utility/dsp.h ****     return f;
  87:../../DaisySP/Source/Utility/dsp.h **** }
  88:../../DaisySP/Source/Utility/dsp.h **** 
  89:../../DaisySP/Source/Utility/dsp.h **** /** From http://openaudio.blogspot.com/2017/02/faster-log10-and-pow.html
  90:../../DaisySP/Source/Utility/dsp.h **** No approximation, pow10f(x) gives a 90% speed increase over powf(10.f, x)
  91:../../DaisySP/Source/Utility/dsp.h **** */
  92:../../DaisySP/Source/Utility/dsp.h **** inline float pow10f(float f)
  93:../../DaisySP/Source/Utility/dsp.h **** {
  94:../../DaisySP/Source/Utility/dsp.h ****     return expf(2.302585092994046f * f);
  95:../../DaisySP/Source/Utility/dsp.h **** }
  96:../../DaisySP/Source/Utility/dsp.h **** 
  97:../../DaisySP/Source/Utility/dsp.h **** /* Original code for fastlog2f by Dr. Paul Beckmann from the ARM community forum, adapted from the 
  98:../../DaisySP/Source/Utility/dsp.h **** About 25% performance increase over std::log10f
  99:../../DaisySP/Source/Utility/dsp.h **** */
 100:../../DaisySP/Source/Utility/dsp.h **** inline float fastlog2f(float f)
 101:../../DaisySP/Source/Utility/dsp.h **** {
 102:../../DaisySP/Source/Utility/dsp.h ****     float frac;
 103:../../DaisySP/Source/Utility/dsp.h ****     int   exp;
 104:../../DaisySP/Source/Utility/dsp.h ****     frac = frexpf(fabsf(f), &exp);
 105:../../DaisySP/Source/Utility/dsp.h ****     f    = 1.23149591368684f;
 106:../../DaisySP/Source/Utility/dsp.h ****     f *= frac;
 107:../../DaisySP/Source/Utility/dsp.h ****     f += -4.11852516267426f;
 108:../../DaisySP/Source/Utility/dsp.h ****     f *= frac;
 109:../../DaisySP/Source/Utility/dsp.h ****     f += 6.02197014179219f;
 110:../../DaisySP/Source/Utility/dsp.h ****     f *= frac;
 111:../../DaisySP/Source/Utility/dsp.h ****     f += -3.13396450166353f;
 112:../../DaisySP/Source/Utility/dsp.h ****     f += exp;
 113:../../DaisySP/Source/Utility/dsp.h ****     return (f);
 114:../../DaisySP/Source/Utility/dsp.h **** }
 115:../../DaisySP/Source/Utility/dsp.h **** 
 116:../../DaisySP/Source/Utility/dsp.h **** inline float fastlog10f(float f)
 117:../../DaisySP/Source/Utility/dsp.h **** {
 118:../../DaisySP/Source/Utility/dsp.h ****     return fastlog2f(f) * 0.3010299956639812f;
 119:../../DaisySP/Source/Utility/dsp.h **** }
 120:../../DaisySP/Source/Utility/dsp.h **** 
 121:../../DaisySP/Source/Utility/dsp.h **** /** Midi to frequency helper
 122:../../DaisySP/Source/Utility/dsp.h **** */
 123:../../DaisySP/Source/Utility/dsp.h **** inline float mtof(float m)
 454              		.loc 17 123 14 view .LVU110
 455              	.LBB415:
 124:../../DaisySP/Source/Utility/dsp.h **** {
 125:../../DaisySP/Source/Utility/dsp.h ****     return powf(2, (m - 69.0f) / 12.0f) * 440.0f;
 456              		.loc 17 125 5 view .LVU111
 457              	.LBE415:
 458              	.LBE414:
  45:Midi.cpp      ****                 osc.SetAmp((p.velocity / 127.0f));
 459              		.loc 15 45 28 is_stmt 0 view .LVU112
 460 0058 07EE905A 		vmov	s15, r5	@ int
 461              	.LBB419:
 462              	.LBB416:
 463              		.loc 17 125 23 view .LVU113
 464 005c 9FED2D7A 		vldr.32	s14, .L29+8
 465              		.loc 17 125 16 view .LVU114
 466 0060 F2EE080A 		vmov.f32	s1, #1.2e+1
 467              	.LBE416:
ARM GAS  /tmp/ccgxtOMv.s 			page 28


 468              	.LBE419:
 469              	.LBB420:
 470              	.LBB421:
  17:../../DaisySP/Source/Synthesis/oscillator.h ****     /** Choices for output waveforms, POLYBLEP are appropriately labeled. Others are naive forms.
  18:../../DaisySP/Source/Synthesis/oscillator.h ****     */
  19:../../DaisySP/Source/Synthesis/oscillator.h ****     enum
  20:../../DaisySP/Source/Synthesis/oscillator.h ****     {
  21:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_SIN,
  22:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_TRI,
  23:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_SAW,
  24:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_RAMP,
  25:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_SQUARE,
  26:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_POLYBLEP_TRI,
  27:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_POLYBLEP_SAW,
  28:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_POLYBLEP_SQUARE,
  29:../../DaisySP/Source/Synthesis/oscillator.h ****         WAVE_LAST,
  30:../../DaisySP/Source/Synthesis/oscillator.h ****     };
  31:../../DaisySP/Source/Synthesis/oscillator.h **** 
  32:../../DaisySP/Source/Synthesis/oscillator.h **** 
  33:../../DaisySP/Source/Synthesis/oscillator.h ****     /** Initializes the Oscillator
  34:../../DaisySP/Source/Synthesis/oscillator.h **** 
  35:../../DaisySP/Source/Synthesis/oscillator.h ****         \param sample_rate - sample rate of the audio engine being run, and the frequency that the 
  36:../../DaisySP/Source/Synthesis/oscillator.h **** 
  37:../../DaisySP/Source/Synthesis/oscillator.h ****         Defaults:
  38:../../DaisySP/Source/Synthesis/oscillator.h ****         - freq_ = 100 Hz
  39:../../DaisySP/Source/Synthesis/oscillator.h ****         - amp_ = 0.5
  40:../../DaisySP/Source/Synthesis/oscillator.h ****         - waveform_ = sine wave.
  41:../../DaisySP/Source/Synthesis/oscillator.h ****     */
  42:../../DaisySP/Source/Synthesis/oscillator.h ****     void Init(float sample_rate)
  43:../../DaisySP/Source/Synthesis/oscillator.h ****     {
  44:../../DaisySP/Source/Synthesis/oscillator.h ****         sr_        = sample_rate;
  45:../../DaisySP/Source/Synthesis/oscillator.h ****         sr_recip_  = 1.0f / sample_rate;
  46:../../DaisySP/Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
  47:../../DaisySP/Source/Synthesis/oscillator.h ****         amp_       = 0.5f;
  48:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_     = 0.0f;
  49:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(freq_);
  50:../../DaisySP/Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
  51:../../DaisySP/Source/Synthesis/oscillator.h ****         eoc_       = true;
  52:../../DaisySP/Source/Synthesis/oscillator.h ****         eor_       = true;
  53:../../DaisySP/Source/Synthesis/oscillator.h ****     }
  54:../../DaisySP/Source/Synthesis/oscillator.h **** 
  55:../../DaisySP/Source/Synthesis/oscillator.h **** 
  56:../../DaisySP/Source/Synthesis/oscillator.h ****     /** Changes the frequency of the Oscillator, and recalculates phase increment.
  57:../../DaisySP/Source/Synthesis/oscillator.h ****     */
  58:../../DaisySP/Source/Synthesis/oscillator.h ****     inline void SetFreq(const float f)
  59:../../DaisySP/Source/Synthesis/oscillator.h ****     {
  60:../../DaisySP/Source/Synthesis/oscillator.h ****         freq_      = f;
 471              		.loc 13 60 20 view .LVU115
 472 0064 2C4D     		ldr	r5, .L29+12
 473              	.LVL24:
 474              		.loc 13 60 20 view .LVU116
 475              	.LBE421:
 476              	.LBE420:
  45:Midi.cpp      ****                 osc.SetAmp((p.velocity / 127.0f));
 477              		.loc 15 45 28 view .LVU117
 478 0066 F8EE677A 		vcvt.f32.u32	s15, s15
 479              	.LVL25:
ARM GAS  /tmp/ccgxtOMv.s 			page 29


 480              	.LBB425:
 481              	.LBB417:
 482              		.loc 17 125 16 view .LVU118
 483 006a B0EE000A 		vmov.f32	s0, #2.0e+0
 484              		.loc 17 125 23 view .LVU119
 485 006e 77EEC77A 		vsub.f32	s15, s15, s14
 486              		.loc 17 125 16 view .LVU120
 487 0072 C7EEA00A 		vdiv.f32	s1, s15, s1
 488 0076 FFF7FEFF 		bl	powf
 489              	.LVL26:
 490              		.loc 17 125 43 view .LVU121
 491 007a DFED287A 		vldr.32	s15, .L29+16
 492              	.LBE417:
 493              	.LBE425:
 494              	.LBB426:
 495              	.LBB422:
  61:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(f);
 496              		.loc 13 61 34 view .LVU122
 497 007e 2846     		mov	r0, r5
 498              	.LBE422:
 499              	.LBE426:
 500              	.LBB427:
 501              	.LBB418:
 502              		.loc 17 125 43 view .LVU123
 503 0080 20EE270A 		vmul.f32	s0, s0, s15
 504              	.LVL27:
 505              		.loc 17 125 43 view .LVU124
 506              	.LBE418:
 507              	.LBE427:
 508              	.LBB428:
 509              	.LBI420:
  58:../../DaisySP/Source/Synthesis/oscillator.h ****     {
 510              		.loc 13 58 17 is_stmt 1 view .LVU125
 511              	.LBB423:
  60:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(f);
 512              		.loc 13 60 9 view .LVU126
  60:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(f);
 513              		.loc 13 60 20 is_stmt 0 view .LVU127
 514 0084 85ED020A 		vstr.32	s0, [r5, #8]
 515              		.loc 13 61 9 is_stmt 1 view .LVU128
 516              		.loc 13 61 34 is_stmt 0 view .LVU129
 517 0088 FFF7FEFF 		bl	_ZN7daisysp10Oscillator12CalcPhaseIncEf
 518              	.LVL28:
 519              		.loc 13 61 34 view .LVU130
 520              	.LBE423:
 521              	.LBE428:
  46:Midi.cpp      ****             }
 522              		.loc 15 46 27 view .LVU131
 523 008c 07EE904A 		vmov	s15, r4	@ int
 524 0090 DFED236A 		vldr.32	s13, .L29+20
 525              	.LBB429:
 526              	.LBB424:
 527              		.loc 13 61 20 view .LVU132
 528 0094 85ED060A 		vstr.32	s0, [r5, #24]
 529              	.LVL29:
 530              		.loc 13 61 20 view .LVU133
 531              	.LBE424:
ARM GAS  /tmp/ccgxtOMv.s 			page 30


 532              	.LBE429:
  46:Midi.cpp      ****             }
 533              		.loc 15 46 17 is_stmt 1 view .LVU134
 534              	.LBB430:
 535              	.LBI430:
  62:../../DaisySP/Source/Synthesis/oscillator.h ****     }
  63:../../DaisySP/Source/Synthesis/oscillator.h **** 
  64:../../DaisySP/Source/Synthesis/oscillator.h **** 
  65:../../DaisySP/Source/Synthesis/oscillator.h ****     /** Sets the amplitude of the waveform.
  66:../../DaisySP/Source/Synthesis/oscillator.h ****     */
  67:../../DaisySP/Source/Synthesis/oscillator.h ****     inline void SetAmp(const float a) { amp_ = a; }
 536              		.loc 13 67 17 view .LVU135
 537              	.LBB431:
 538              		.loc 13 67 41 view .LVU136
 539              	.LBE431:
 540              	.LBE430:
  46:Midi.cpp      ****             }
 541              		.loc 15 46 27 is_stmt 0 view .LVU137
 542 0098 F8EEE77A 		vcvt.f32.s32	s15, s15
 543 009c 87EEA67A 		vdiv.f32	s14, s15, s13
 544              	.LBB433:
 545              	.LBB432:
 546              		.loc 13 67 46 view .LVU138
 547 00a0 85ED017A 		vstr.32	s14, [r5, #4]
 548              	.LVL30:
 549              		.loc 13 67 46 view .LVU139
 550              	.LBE432:
 551              	.LBE433:
 552              	.LBE409:
  49:Midi.cpp      ****         case ControlChange:
 553              		.loc 15 49 9 is_stmt 1 view .LVU140
 554              	.LBE436:
 555              	.LBE440:
 556              		.loc 15 69 1 is_stmt 0 view .LVU141
 557 00a4 0DF5037D 		add	sp, sp, #524
 558              		.cfi_remember_state
 559              		.cfi_def_cfa_offset 28
 560              		@ sp needed
 561 00a8 BDE83040 		pop	{r4, r5, lr}
 562              		.cfi_restore 14
 563              		.cfi_restore 5
 564              		.cfi_restore 4
 565              		.cfi_def_cfa_offset 16
 566              	.LVL31:
 567              		.loc 15 69 1 view .LVU142
 568 00ac 04B0     		add	sp, sp, #16
 569              		.cfi_def_cfa_offset 0
 570 00ae 7047     		bx	lr
 571              	.LVL32:
 572              	.L24:
 573              		.cfi_restore_state
 574              	.LBB441:
 575              	.LBB437:
 576              	.LBB434:
  59:Midi.cpp      ****                     // CC 2 for res.
 577              		.loc 15 59 17 is_stmt 1 view .LVU143
  61:Midi.cpp      ****                     break;
ARM GAS  /tmp/ccgxtOMv.s 			page 31


 578              		.loc 15 61 21 view .LVU144
  61:Midi.cpp      ****                     break;
 579              		.loc 15 61 34 is_stmt 0 view .LVU145
 580 00b0 07EE904A 		vmov	s15, r4	@ int
  61:Midi.cpp      ****                     break;
 581              		.loc 15 61 32 view .LVU146
 582 00b4 9FED1A0A 		vldr.32	s0, .L29+20
 583 00b8 1A48     		ldr	r0, .L29+24
  61:Midi.cpp      ****                     break;
 584              		.loc 15 61 34 view .LVU147
 585 00ba F8EE677A 		vcvt.f32.u32	s15, s15
  61:Midi.cpp      ****                     break;
 586              		.loc 15 61 32 view .LVU148
 587 00be 87EE800A 		vdiv.f32	s0, s15, s0
 588 00c2 FFF7FEFF 		bl	_ZN7daisysp3Svf6SetResEf
 589              	.LVL33:
  62:Midi.cpp      ****                 default: break;
 590              		.loc 15 62 21 is_stmt 1 view .LVU149
 591              	.LBE434:
 592              	.LBE437:
 593              	.LBE441:
 594              		.loc 15 69 1 is_stmt 0 view .LVU150
 595 00c6 0DF5037D 		add	sp, sp, #524
 596              		.cfi_remember_state
 597              		.cfi_def_cfa_offset 28
 598              		@ sp needed
 599 00ca BDE83040 		pop	{r4, r5, lr}
 600              		.cfi_restore 14
 601              		.cfi_restore 5
 602              		.cfi_restore 4
 603              		.cfi_def_cfa_offset 16
 604              	.LVL34:
 605              		.loc 15 69 1 view .LVU151
 606 00ce 04B0     		add	sp, sp, #16
 607              		.cfi_def_cfa_offset 0
 608 00d0 7047     		bx	lr
 609              	.LVL35:
 610              	.L23:
 611              		.cfi_restore_state
 612              	.LBB442:
 613              	.LBB438:
 614              	.LBB435:
  55:Midi.cpp      ****                     // CC 1 for cutoff.
 615              		.loc 15 55 17 is_stmt 1 view .LVU152
  57:Midi.cpp      ****                     break;
 616              		.loc 15 57 21 view .LVU153
 617              	.LBB403:
 618              	.LBI403:
 123:../../DaisySP/Source/Utility/dsp.h **** {
 619              		.loc 17 123 14 view .LVU154
 620              	.LBB404:
 621              		.loc 17 125 5 view .LVU155
 622              	.LBE404:
 623              	.LBE403:
  57:Midi.cpp      ****                     break;
 624              		.loc 15 57 33 is_stmt 0 view .LVU156
 625 00d2 07EE904A 		vmov	s15, r4	@ int
ARM GAS  /tmp/ccgxtOMv.s 			page 32


 626              	.LBB407:
 627              	.LBB405:
 628              		.loc 17 125 23 view .LVU157
 629 00d6 9FED0F7A 		vldr.32	s14, .L29+8
 630              		.loc 17 125 16 view .LVU158
 631 00da F2EE080A 		vmov.f32	s1, #1.2e+1
 632              	.LBE405:
 633              	.LBE407:
  57:Midi.cpp      ****                     break;
 634              		.loc 15 57 33 view .LVU159
 635 00de F8EE677A 		vcvt.f32.u32	s15, s15
 636              	.LBB408:
 637              	.LBB406:
 638              		.loc 17 125 16 view .LVU160
 639 00e2 B0EE000A 		vmov.f32	s0, #2.0e+0
 640              		.loc 17 125 23 view .LVU161
 641 00e6 77EEC77A 		vsub.f32	s15, s15, s14
 642              		.loc 17 125 16 view .LVU162
 643 00ea C7EEA00A 		vdiv.f32	s1, s15, s1
 644 00ee FFF7FEFF 		bl	powf
 645              	.LVL36:
 646              		.loc 17 125 43 view .LVU163
 647 00f2 DFED0A7A 		vldr.32	s15, .L29+16
 648              	.LBE406:
 649              	.LBE408:
  57:Midi.cpp      ****                     break;
 650              		.loc 15 57 33 view .LVU164
 651 00f6 0B48     		ldr	r0, .L29+24
 652 00f8 20EE270A 		vmul.f32	s0, s0, s15
 653 00fc FFF7FEFF 		bl	_ZN7daisysp3Svf7SetFreqEf
 654              	.LVL37:
  58:Midi.cpp      ****                 case 2:
 655              		.loc 15 58 21 is_stmt 1 view .LVU165
 656              	.LBE435:
 657              	.LBE438:
 658              	.LBE442:
 659              		.loc 15 69 1 is_stmt 0 view .LVU166
 660 0100 0DF5037D 		add	sp, sp, #524
 661              		.cfi_def_cfa_offset 28
 662              		@ sp needed
 663 0104 BDE83040 		pop	{r4, r5, lr}
 664              		.cfi_restore 14
 665              		.cfi_restore 5
 666              		.cfi_restore 4
 667              		.cfi_def_cfa_offset 16
 668              	.LVL38:
 669              		.loc 15 69 1 view .LVU167
 670 0108 04B0     		add	sp, sp, #16
 671              		.cfi_def_cfa_offset 0
 672 010a 7047     		bx	lr
 673              	.L30:
 674              		.align	2
 675              	.L29:
 676 010c 00000000 		.word	.LC2
 677 0110 24000000 		.word	hw+36
 678 0114 00008A42 		.word	1116340224
 679 0118 00000000 		.word	.LANCHOR0
ARM GAS  /tmp/ccgxtOMv.s 			page 33


 680 011c 0000DC43 		.word	1138491392
 681 0120 0000FE42 		.word	1123942400
 682 0124 00000000 		.word	.LANCHOR1
 683              		.cfi_endproc
 684              	.LFE4220:
 686              		.section	.text.startup.main,"ax",%progbits
 687              		.align	1
 688              		.p2align 2,,3
 689              		.global	main
 690              		.syntax unified
 691              		.thumb
 692              		.thumb_func
 693              		.fpu fpv5-d16
 695              	main:
 696              	.LFB4221:
  70:Midi.cpp      **** 
  71:Midi.cpp      **** 
  72:Midi.cpp      **** // Main -- Init, and Midi Handling
  73:Midi.cpp      **** int main(void)
  74:Midi.cpp      **** {
 697              		.loc 15 74 1 is_stmt 1 view -0
 698              		.cfi_startproc
 699              		@ args = 0, pretend = 0, frame = 440
 700              		@ frame_needed = 0, uses_anonymous_args = 0
  75:Midi.cpp      ****     // Init
  76:Midi.cpp      ****     float samplerate;
 701              		.loc 15 76 5 view .LVU169
  77:Midi.cpp      ****     hw.Init();
 702              		.loc 15 77 5 view .LVU170
  74:Midi.cpp      ****     // Init
 703              		.loc 15 74 1 is_stmt 0 view .LVU171
 704 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 705              		.cfi_def_cfa_offset 36
 706              		.cfi_offset 4, -36
 707              		.cfi_offset 5, -32
 708              		.cfi_offset 6, -28
 709              		.cfi_offset 7, -24
 710              		.cfi_offset 8, -20
 711              		.cfi_offset 9, -16
 712              		.cfi_offset 10, -12
 713              		.cfi_offset 11, -8
 714              		.cfi_offset 14, -4
 715              		.loc 15 77 12 view .LVU172
 716 0004 0021     		movs	r1, #0
 717 0006 B448     		ldr	r0, .L97
 718              	.LBB509:
 719              	.LBB510:
  44:../../DaisySP/Source/Synthesis/oscillator.h ****         sr_recip_  = 1.0f / sample_rate;
 720              		.loc 13 44 20 view .LVU173
 721 0008 B44F     		ldr	r7, .L97+4
 722 000a DFF8CC82 		ldr	r8, .L97
 723 000e DFF8F8A2 		ldr	r10, .L97+48
 724              	.LBE510:
 725              	.LBE509:
  74:Midi.cpp      ****     // Init
 726              		.loc 15 74 1 view .LVU174
 727 0012 2DED028B 		vpush.64	{d8}
ARM GAS  /tmp/ccgxtOMv.s 			page 34


 728              		.cfi_def_cfa_offset 44
 729              		.cfi_offset 80, -44
 730              		.cfi_offset 81, -40
 731 0016 ADF50F7D 		sub	sp, sp, #572
 732              		.cfi_def_cfa_offset 616
 733 001a AAF10804 		sub	r4, r10, #8
 734              		.loc 15 77 12 view .LVU175
 735 001e FFF7FEFF 		bl	_ZN5daisy8DaisyPod4InitEb
 736              	.LVL39:
  78:Midi.cpp      ****     hw.seed.usb_handle.Init(UsbHandle::FS_INTERNAL);
 737              		.loc 15 78 5 is_stmt 1 view .LVU176
 738              		.loc 15 78 28 is_stmt 0 view .LVU177
 739 0022 0021     		movs	r1, #0
 740 0024 AE48     		ldr	r0, .L97+8
 741 0026 22AE     		add	r6, sp, #136
 742 0028 FFF7FEFF 		bl	_ZN5daisy9UsbHandle4InitENS0_9UsbPeriphE
 743              	.LVL40:
  79:Midi.cpp      ****     System::Delay(250);
 744              		.loc 15 79 5 is_stmt 1 view .LVU178
 745              		.loc 15 79 18 is_stmt 0 view .LVU179
 746 002c FA20     		movs	r0, #250
 747 002e FFF7FEFF 		bl	_ZN5daisy6System5DelayEm
 748              	.LVL41:
  80:Midi.cpp      **** 
  81:Midi.cpp      ****     // Synthesis
  82:Midi.cpp      ****     samplerate = hw.AudioSampleRate();
 749              		.loc 15 82 5 is_stmt 1 view .LVU180
 750              		.loc 15 82 36 is_stmt 0 view .LVU181
 751 0032 A948     		ldr	r0, .L97
 752 0034 FFF7FEFF 		bl	_ZN5daisy8DaisyPod15AudioSampleRateEv
 753              	.LVL42:
 754              	.LBB515:
 755              	.LBB511:
  45:../../DaisySP/Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
 756              		.loc 13 45 27 view .LVU182
 757 0038 B7EE007A 		vmov.f32	s14, #1.0e+0
 758              	.LBE511:
 759              	.LBE515:
 760              		.loc 15 82 36 view .LVU183
 761 003c B0EE408A 		vmov.f32	s16, s0
 762              	.LVL43:
  83:Midi.cpp      ****     osc.Init(samplerate);
 763              		.loc 15 83 5 is_stmt 1 view .LVU184
 764              	.LBB516:
 765              	.LBI509:
  42:../../DaisySP/Source/Synthesis/oscillator.h ****     {
 766              		.loc 13 42 10 view .LVU185
 767              	.LBB512:
  44:../../DaisySP/Source/Synthesis/oscillator.h ****         sr_recip_  = 1.0f / sample_rate;
 768              		.loc 13 44 9 view .LVU186
  47:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_     = 0.0f;
 769              		.loc 13 47 20 is_stmt 0 view .LVU187
 770 0040 4FF07C52 		mov	r2, #1056964608
  48:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(freq_);
 771              		.loc 13 48 20 view .LVU188
 772 0044 0023     		movs	r3, #0
  46:../../DaisySP/Source/Synthesis/oscillator.h ****         amp_       = 0.5f;
ARM GAS  /tmp/ccgxtOMv.s 			page 35


 773              		.loc 13 46 20 view .LVU189
 774 0046 9FEDA70A 		vldr.32	s0, .L97+12
 775              	.LVL44:
  49:../../DaisySP/Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
 776              		.loc 13 49 34 view .LVU190
 777 004a 3846     		mov	r0, r7
  47:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_     = 0.0f;
 778              		.loc 13 47 20 view .LVU191
 779 004c 7A60     		str	r2, [r7, #4]	@ float
  45:../../DaisySP/Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
 780              		.loc 13 45 27 view .LVU192
 781 004e C7EE087A 		vdiv.f32	s15, s14, s16
  48:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(freq_);
 782              		.loc 13 48 20 view .LVU193
 783 0052 7B61     		str	r3, [r7, #20]	@ float
  44:../../DaisySP/Source/Synthesis/oscillator.h ****         sr_recip_  = 1.0f / sample_rate;
 784              		.loc 13 44 20 view .LVU194
 785 0054 87ED038A 		vstr.32	s16, [r7, #12]
  45:../../DaisySP/Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
 786              		.loc 13 45 9 is_stmt 1 view .LVU195
 787 0058 0AF1140B 		add	fp, r10, #20
  46:../../DaisySP/Source/Synthesis/oscillator.h ****         amp_       = 0.5f;
 788              		.loc 13 46 20 is_stmt 0 view .LVU196
 789 005c 87ED020A 		vstr.32	s0, [r7, #8]
 790 0060 251D     		adds	r5, r4, #4
  45:../../DaisySP/Source/Synthesis/oscillator.h ****         freq_      = 100.0f;
 791              		.loc 13 45 20 view .LVU197
 792 0062 C7ED047A 		vstr.32	s15, [r7, #16]
  46:../../DaisySP/Source/Synthesis/oscillator.h ****         amp_       = 0.5f;
 793              		.loc 13 46 9 is_stmt 1 view .LVU198
  47:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_     = 0.0f;
 794              		.loc 13 47 9 view .LVU199
  48:../../DaisySP/Source/Synthesis/oscillator.h ****         phase_inc_ = CalcPhaseInc(freq_);
 795              		.loc 13 48 9 view .LVU200
  49:../../DaisySP/Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
 796              		.loc 13 49 9 view .LVU201
  49:../../DaisySP/Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
 797              		.loc 13 49 34 is_stmt 0 view .LVU202
 798 0066 FFF7FEFF 		bl	_ZN7daisysp10Oscillator12CalcPhaseIncEf
 799              	.LVL45:
  52:../../DaisySP/Source/Synthesis/oscillator.h ****     }
 800              		.loc 13 52 20 view .LVU203
 801 006a 40F20112 		movw	r2, #257
  49:../../DaisySP/Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
 802              		.loc 13 49 34 view .LVU204
 803 006e F0EE407A 		vmov.f32	s15, s0
 804              	.LBE512:
 805              	.LBE516:
 806              	.LBB517:
 807              	.LBB518:
  68:../../DaisySP/Source/Synthesis/oscillator.h ****     /** Sets the waveform to be synthesized by the Process() function.
  69:../../DaisySP/Source/Synthesis/oscillator.h ****     */
  70:../../DaisySP/Source/Synthesis/oscillator.h ****     inline void SetWaveform(const uint8_t wf)
  71:../../DaisySP/Source/Synthesis/oscillator.h ****     {
  72:../../DaisySP/Source/Synthesis/oscillator.h ****         waveform_ = wf < WAVE_LAST ? wf : WAVE_SIN;
 808              		.loc 13 72 19 view .LVU205
 809 0072 0623     		movs	r3, #6
ARM GAS  /tmp/ccgxtOMv.s 			page 36


 810              	.LBE518:
 811              	.LBE517:
  84:Midi.cpp      ****     osc.SetWaveform(Oscillator::WAVE_POLYBLEP_SAW);
  85:Midi.cpp      ****     filt.Init(samplerate);
 812              		.loc 15 85 14 view .LVU206
 813 0074 B0EE480A 		vmov.f32	s0, s16
 814              	.LBB521:
 815              	.LBB513:
  52:../../DaisySP/Source/Synthesis/oscillator.h ****     }
 816              		.loc 13 52 20 view .LVU207
 817 0078 BA84     		strh	r2, [r7, #36]	@ movhi
 818              	.LBE513:
 819              	.LBE521:
 820              	.LBB522:
 821              	.LBB519:
 822              		.loc 13 72 19 view .LVU208
 823 007a 3B70     		strb	r3, [r7]
 824              	.LBE519:
 825              	.LBE522:
 826              		.loc 15 85 14 view .LVU209
 827 007c 9A48     		ldr	r0, .L97+16
 828              	.LBB523:
 829              	.LBB514:
  49:../../DaisySP/Source/Synthesis/oscillator.h ****         waveform_  = WAVE_SIN;
 830              		.loc 13 49 20 view .LVU210
 831 007e C7ED067A 		vstr.32	s15, [r7, #24]
  50:../../DaisySP/Source/Synthesis/oscillator.h ****         eoc_       = true;
 832              		.loc 13 50 9 is_stmt 1 view .LVU211
  51:../../DaisySP/Source/Synthesis/oscillator.h ****         eor_       = true;
 833              		.loc 13 51 9 view .LVU212
  52:../../DaisySP/Source/Synthesis/oscillator.h ****     }
 834              		.loc 13 52 9 view .LVU213
 835              	.LVL46:
  52:../../DaisySP/Source/Synthesis/oscillator.h ****     }
 836              		.loc 13 52 9 is_stmt 0 view .LVU214
 837              	.LBE514:
 838              	.LBE523:
  84:Midi.cpp      ****     filt.Init(samplerate);
 839              		.loc 15 84 5 is_stmt 1 view .LVU215
 840              	.LBB524:
 841              	.LBI517:
  70:../../DaisySP/Source/Synthesis/oscillator.h ****     {
 842              		.loc 13 70 17 view .LVU216
 843              	.LBB520:
 844              		.loc 13 72 9 view .LVU217
 845              		.loc 13 72 9 is_stmt 0 view .LVU218
 846              	.LBE520:
 847              	.LBE524:
 848              		.loc 15 85 5 is_stmt 1 view .LVU219
 849              		.loc 15 85 14 is_stmt 0 view .LVU220
 850 0082 FFF7FEFF 		bl	_ZN7daisysp3Svf4InitEf
 851              	.LVL47:
  86:Midi.cpp      **** 
  87:Midi.cpp      ****     // Start stuff.
  88:Midi.cpp      ****     hw.StartAdc();
 852              		.loc 15 88 5 is_stmt 1 view .LVU221
 853              		.loc 15 88 16 is_stmt 0 view .LVU222
ARM GAS  /tmp/ccgxtOMv.s 			page 37


 854 0086 4046     		mov	r0, r8
 855 0088 FFF7FEFF 		bl	_ZN5daisy8DaisyPod8StartAdcEv
 856              	.LVL48:
  89:Midi.cpp      ****     hw.StartAudio(AudioCallback);
 857              		.loc 15 89 5 is_stmt 1 view .LVU223
 858              		.loc 15 89 18 is_stmt 0 view .LVU224
 859 008c 4046     		mov	r0, r8
 860 008e 9749     		ldr	r1, .L97+20
 861 0090 FFF7FEFF 		bl	_ZN5daisy8DaisyPod10StartAudioEPFvPKfPfjE
 862              	.LVL49:
  90:Midi.cpp      ****     hw.midi.StartReceive();
 863              		.loc 15 90 5 is_stmt 1 view .LVU225
 864              	.LBB525:
 865              	.LBI525:
  84:../../libdaisy/src/hid/midi.h **** 
  85:../../libdaisy/src/hid/midi.h ****     struct Config
  86:../../libdaisy/src/hid/midi.h ****     {
  87:../../libdaisy/src/hid/midi.h ****         typename Transport::Config transport_config;
  88:../../libdaisy/src/hid/midi.h ****     };
  89:../../libdaisy/src/hid/midi.h **** 
  90:../../libdaisy/src/hid/midi.h ****     /** Initializes the MidiHandler 
  91:../../libdaisy/src/hid/midi.h ****     \param in_mode Input mode
  92:../../libdaisy/src/hid/midi.h ****     \param out_mode Output mode
  93:../../libdaisy/src/hid/midi.h ****      */
  94:../../libdaisy/src/hid/midi.h ****     void Init(Config config)
  95:../../libdaisy/src/hid/midi.h ****     {
  96:../../libdaisy/src/hid/midi.h ****         config_ = config;
  97:../../libdaisy/src/hid/midi.h **** 
  98:../../libdaisy/src/hid/midi.h ****         transport_.Init(config_.transport_config);
  99:../../libdaisy/src/hid/midi.h **** 
 100:../../libdaisy/src/hid/midi.h ****         event_q_.Init();
 101:../../libdaisy/src/hid/midi.h ****         incoming_message_.type = MessageLast;
 102:../../libdaisy/src/hid/midi.h ****         pstate_                = ParserEmpty;
 103:../../libdaisy/src/hid/midi.h ****     }
 104:../../libdaisy/src/hid/midi.h **** 
 105:../../libdaisy/src/hid/midi.h ****     /** Starts listening on the selected input mode(s). MidiEvent Queue will begin to fill, and can
 106:../../libdaisy/src/hid/midi.h ****     void StartReceive() { transport_.StartRx(); }
 866              		.loc 2 106 10 view .LVU226
 867              	.LBB526:
 868              	.LBB527:
 869              	.LBI527:
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 870              		.loc 2 60 20 view .LVU227
 871              	.LBB528:
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 872              		.loc 2 60 32 view .LVU228
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 873              		.loc 2 60 45 is_stmt 0 view .LVU229
 874 0094 04F11800 		add	r0, r4, #24
 875 0098 FFF7FEFF 		bl	_ZN5daisy11UartHandler7StartRxEv
 876              	.LVL50:
 877              	.L58:
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 878              		.loc 2 60 45 view .LVU230
 879              	.LBE528:
 880              	.LBE527:
 881              	.LBE526:
ARM GAS  /tmp/ccgxtOMv.s 			page 38


 882              	.LBE525:
  91:Midi.cpp      ****     for(;;)
 883              		.loc 15 91 5 is_stmt 1 view .LVU231
  92:Midi.cpp      ****     {
  93:Midi.cpp      ****         hw.midi.Listen();
 884              		.loc 15 93 9 view .LVU232
 885              	.LBB529:
 886              	.LBI529:
 107:../../libdaisy/src/hid/midi.h **** 
 108:../../libdaisy/src/hid/midi.h ****     /** Start listening */
 109:../../libdaisy/src/hid/midi.h ****     void Listen()
 887              		.loc 2 109 10 view .LVU233
 888              	.LBB530:
 110:../../libdaisy/src/hid/midi.h ****     {
 111:../../libdaisy/src/hid/midi.h ****         uint32_t now;
 112:../../libdaisy/src/hid/midi.h ****         now = System::GetNow();
 889              		.loc 2 112 29 is_stmt 0 view .LVU234
 890 009c FFF7FEFF 		bl	_ZN5daisy6System6GetNowEv
 891              	.LVL51:
 892              		.loc 2 112 29 view .LVU235
 893 00a0 0746     		mov	r7, r0
 894              	.LVL52:
 895              	.L32:
 113:../../libdaisy/src/hid/midi.h ****         while(transport_.Readable())
 896              		.loc 2 113 9 is_stmt 1 view .LVU236
 897              	.LBB531:
 898              	.LBI531:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 899              		.loc 2 61 20 view .LVU237
 900              	.LBB532:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 901              		.loc 2 61 33 view .LVU238
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 902              		.loc 2 61 54 is_stmt 0 view .LVU239
 903 00a2 9348     		ldr	r0, .L97+24
 904              	.LVL53:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 905              		.loc 2 61 54 view .LVU240
 906 00a4 FFF7FEFF 		bl	_ZN5daisy11UartHandler8ReadableEv
 907              	.LVL54:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 908              		.loc 2 61 54 view .LVU241
 909              	.LBE532:
 910              	.LBE531:
 911              		.loc 2 113 9 view .LVU242
 912 00a8 08B3     		cbz	r0, .L34
 913              	.L93:
 914              	.LBB535:
 915              	.LBB536:
  62:../../libdaisy/src/hid/midi.h ****     inline bool    RxActive() { return uart_.RxActive(); }
 916              		.loc 2 62 45 view .LVU243
 917 00aa 9148     		ldr	r0, .L97+24
 918              	.LBE536:
 919              	.LBE535:
 114:../../libdaisy/src/hid/midi.h ****         {
 115:../../libdaisy/src/hid/midi.h ****             last_read_ = now;
 920              		.loc 2 115 13 view .LVU244
ARM GAS  /tmp/ccgxtOMv.s 			page 39


 921 00ac CAF80070 		str	r7, [r10]
 922              	.LVL55:
 923              	.LBB538:
 924              	.LBI535:
  62:../../libdaisy/src/hid/midi.h ****     inline bool    RxActive() { return uart_.RxActive(); }
 925              		.loc 2 62 20 is_stmt 1 view .LVU245
 926              	.LBB537:
  62:../../libdaisy/src/hid/midi.h ****     inline bool    RxActive() { return uart_.RxActive(); }
 927              		.loc 2 62 27 view .LVU246
  62:../../libdaisy/src/hid/midi.h ****     inline bool    RxActive() { return uart_.RxActive(); }
 928              		.loc 2 62 45 is_stmt 0 view .LVU247
 929 00b0 FFF7FEFF 		bl	_ZN5daisy11UartHandler5PopRxEv
 930              	.LVL56:
  62:../../libdaisy/src/hid/midi.h ****     inline bool    RxActive() { return uart_.RxActive(); }
 931              		.loc 2 62 45 view .LVU248
 932 00b4 98F87831 		ldrb	r3, [r8, #376]	@ zero_extendqisi2
 933              	.LVL57:
  62:../../libdaisy/src/hid/midi.h ****     inline bool    RxActive() { return uart_.RxActive(); }
 934              		.loc 2 62 45 view .LVU249
 935              	.LBE537:
 936              	.LBE538:
 937              	.LBB539:
 938              	.LBI539:
 116:../../libdaisy/src/hid/midi.h ****             Parse(transport_.Rx());
 117:../../libdaisy/src/hid/midi.h ****         }
 118:../../libdaisy/src/hid/midi.h **** 
 119:../../libdaisy/src/hid/midi.h ****         // In case of UART Error, (particularly
 120:../../libdaisy/src/hid/midi.h ****         //  overrun error), UART disables itself.
 121:../../libdaisy/src/hid/midi.h ****         // Flush the buff, and restart.
 122:../../libdaisy/src/hid/midi.h ****         if(!transport_.RxActive())
 123:../../libdaisy/src/hid/midi.h ****         {
 124:../../libdaisy/src/hid/midi.h ****             pstate_ = ParserEmpty;
 125:../../libdaisy/src/hid/midi.h ****             transport_.FlushRx();
 126:../../libdaisy/src/hid/midi.h ****             StartReceive();
 127:../../libdaisy/src/hid/midi.h ****         }
 128:../../libdaisy/src/hid/midi.h ****     }
 129:../../libdaisy/src/hid/midi.h **** 
 130:../../libdaisy/src/hid/midi.h ****     /** Checks if there are unhandled messages in the queue 
 131:../../libdaisy/src/hid/midi.h ****     \return True if there are events to be handled, else false.
 132:../../libdaisy/src/hid/midi.h ****      */
 133:../../libdaisy/src/hid/midi.h ****     bool HasEvents() const { return event_q_.readable(); }
 134:../../libdaisy/src/hid/midi.h **** 
 135:../../libdaisy/src/hid/midi.h **** 
 136:../../libdaisy/src/hid/midi.h ****     /** Pops the oldest unhandled MidiEvent from the internal queue
 137:../../libdaisy/src/hid/midi.h ****     \return The event to be handled
 138:../../libdaisy/src/hid/midi.h ****      */
 139:../../libdaisy/src/hid/midi.h ****     MidiEvent PopEvent() { return event_q_.Read(); }
 140:../../libdaisy/src/hid/midi.h **** 
 141:../../libdaisy/src/hid/midi.h ****     /** SendMessage
 142:../../libdaisy/src/hid/midi.h ****     Send raw bytes as message
 143:../../libdaisy/src/hid/midi.h ****     */
 144:../../libdaisy/src/hid/midi.h ****     void SendMessage(uint8_t* bytes, size_t size)
 145:../../libdaisy/src/hid/midi.h ****     {
 146:../../libdaisy/src/hid/midi.h ****         transport_.Tx(bytes, size);
 147:../../libdaisy/src/hid/midi.h ****     }
 148:../../libdaisy/src/hid/midi.h **** 
 149:../../libdaisy/src/hid/midi.h ****     /** Feed in bytes to state machine from a queue.
ARM GAS  /tmp/ccgxtOMv.s 			page 40


 150:../../libdaisy/src/hid/midi.h ****     Populates internal FIFO queue with MIDI Messages
 151:../../libdaisy/src/hid/midi.h ****     For example with uart:
 152:../../libdaisy/src/hid/midi.h ****     midi.Parse(uart.PopRx());
 153:../../libdaisy/src/hid/midi.h ****     \param byte &
 154:../../libdaisy/src/hid/midi.h ****     */
 155:../../libdaisy/src/hid/midi.h ****     void Parse(uint8_t byte)
 939              		.loc 2 155 10 is_stmt 1 view .LVU250
 940 00b8 032B     		cmp	r3, #3
 941 00ba F2D8     		bhi	.L32
 942 00bc DFE803F0 		tbb	[pc, r3]
 943              	.L36:
 944 00c0 77       		.byte	(.L39-.L36)/2
 945 00c1 A8       		.byte	(.L38-.L36)/2
 946 00c2 42       		.byte	(.L37-.L36)/2
 947 00c3 02       		.byte	(.L35-.L36)/2
 948              		.p2align 1
 949              	.L35:
 950              	.LBB540:
 156:../../libdaisy/src/hid/midi.h ****     {
 157:../../libdaisy/src/hid/midi.h ****         switch(pstate_)
 158:../../libdaisy/src/hid/midi.h ****         {
 159:../../libdaisy/src/hid/midi.h ****             case ParserEmpty:
 160:../../libdaisy/src/hid/midi.h ****                 // check byte for valid Status Byte
 161:../../libdaisy/src/hid/midi.h ****                 if(byte & kStatusByteMask)
 162:../../libdaisy/src/hid/midi.h ****                 {
 163:../../libdaisy/src/hid/midi.h ****                     // Get MessageType, and Channel
 164:../../libdaisy/src/hid/midi.h ****                     incoming_message_.channel = byte & kChannelMask;
 165:../../libdaisy/src/hid/midi.h ****                     incoming_message_.type    = static_cast<MidiMessageType>(
 166:../../libdaisy/src/hid/midi.h ****                         (byte & kMessageMask) >> 4);
 167:../../libdaisy/src/hid/midi.h **** 
 168:../../libdaisy/src/hid/midi.h ****                     // Validate, and move on.
 169:../../libdaisy/src/hid/midi.h ****                     if(incoming_message_.type < MessageLast)
 170:../../libdaisy/src/hid/midi.h ****                     {
 171:../../libdaisy/src/hid/midi.h ****                         pstate_ = ParserHasStatus;
 172:../../libdaisy/src/hid/midi.h ****                         // Mark this status byte as running_status
 173:../../libdaisy/src/hid/midi.h ****                         running_status_ = incoming_message_.type;
 174:../../libdaisy/src/hid/midi.h **** 
 175:../../libdaisy/src/hid/midi.h ****                         if(running_status_ == SystemCommon)
 176:../../libdaisy/src/hid/midi.h ****                         {
 177:../../libdaisy/src/hid/midi.h ****                             incoming_message_.channel = 0;
 178:../../libdaisy/src/hid/midi.h ****                             //system real time = 1111 1xxx
 179:../../libdaisy/src/hid/midi.h ****                             if(byte & 0x08)
 180:../../libdaisy/src/hid/midi.h ****                             {
 181:../../libdaisy/src/hid/midi.h ****                                 incoming_message_.type = SystemRealTime;
 182:../../libdaisy/src/hid/midi.h ****                                 running_status_        = SystemRealTime;
 183:../../libdaisy/src/hid/midi.h ****                                 incoming_message_.srt_type
 184:../../libdaisy/src/hid/midi.h ****                                     = static_cast<SystemRealTimeType>(
 185:../../libdaisy/src/hid/midi.h ****                                         byte & kSystemRealTimeMask);
 186:../../libdaisy/src/hid/midi.h **** 
 187:../../libdaisy/src/hid/midi.h ****                                 //short circuit to start
 188:../../libdaisy/src/hid/midi.h ****                                 pstate_ = ParserEmpty;
 189:../../libdaisy/src/hid/midi.h ****                                 event_q_.Write(incoming_message_);
 190:../../libdaisy/src/hid/midi.h ****                             }
 191:../../libdaisy/src/hid/midi.h ****                             //system common
 192:../../libdaisy/src/hid/midi.h ****                             else
 193:../../libdaisy/src/hid/midi.h ****                             {
 194:../../libdaisy/src/hid/midi.h ****                                 incoming_message_.sc_type
ARM GAS  /tmp/ccgxtOMv.s 			page 41


 195:../../libdaisy/src/hid/midi.h ****                                     = static_cast<SystemCommonType>(byte
 196:../../libdaisy/src/hid/midi.h ****                                                                     & 0x07);
 197:../../libdaisy/src/hid/midi.h ****                                 //sysex
 198:../../libdaisy/src/hid/midi.h ****                                 if(incoming_message_.sc_type == SystemExclusive)
 199:../../libdaisy/src/hid/midi.h ****                                 {
 200:../../libdaisy/src/hid/midi.h ****                                     pstate_ = ParserSysEx;
 201:../../libdaisy/src/hid/midi.h ****                                     incoming_message_.sysex_message_len = 0;
 202:../../libdaisy/src/hid/midi.h ****                                 }
 203:../../libdaisy/src/hid/midi.h ****                                 //short circuit
 204:../../libdaisy/src/hid/midi.h ****                                 else if(incoming_message_.sc_type > SongSelect)
 205:../../libdaisy/src/hid/midi.h ****                                 {
 206:../../libdaisy/src/hid/midi.h ****                                     pstate_ = ParserEmpty;
 207:../../libdaisy/src/hid/midi.h ****                                     event_q_.Write(incoming_message_);
 208:../../libdaisy/src/hid/midi.h ****                                 }
 209:../../libdaisy/src/hid/midi.h ****                             }
 210:../../libdaisy/src/hid/midi.h ****                         }
 211:../../libdaisy/src/hid/midi.h ****                     }
 212:../../libdaisy/src/hid/midi.h ****                     // Else we'll keep waiting for a valid incoming status byte
 213:../../libdaisy/src/hid/midi.h ****                 }
 214:../../libdaisy/src/hid/midi.h ****                 else
 215:../../libdaisy/src/hid/midi.h ****                 {
 216:../../libdaisy/src/hid/midi.h ****                     // Handle as running status
 217:../../libdaisy/src/hid/midi.h ****                     incoming_message_.type    = running_status_;
 218:../../libdaisy/src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
 219:../../libdaisy/src/hid/midi.h ****                     pstate_                   = ParserHasData0;
 220:../../libdaisy/src/hid/midi.h ****                 }
 221:../../libdaisy/src/hid/midi.h ****                 break;
 222:../../libdaisy/src/hid/midi.h ****             case ParserHasStatus:
 223:../../libdaisy/src/hid/midi.h ****                 if((byte & kStatusByteMask) == 0)
 224:../../libdaisy/src/hid/midi.h ****                 {
 225:../../libdaisy/src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
 226:../../libdaisy/src/hid/midi.h ****                     if(running_status_ == ChannelPressure
 227:../../libdaisy/src/hid/midi.h ****                        || running_status_ == ProgramChange
 228:../../libdaisy/src/hid/midi.h ****                        || incoming_message_.sc_type == MTCQuarterFrame
 229:../../libdaisy/src/hid/midi.h ****                        || incoming_message_.sc_type == SongSelect)
 230:../../libdaisy/src/hid/midi.h ****                     {
 231:../../libdaisy/src/hid/midi.h ****                         //these are just one data byte, so we short circuit back to start
 232:../../libdaisy/src/hid/midi.h ****                         pstate_ = ParserEmpty;
 233:../../libdaisy/src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 234:../../libdaisy/src/hid/midi.h ****                     }
 235:../../libdaisy/src/hid/midi.h ****                     else
 236:../../libdaisy/src/hid/midi.h ****                     {
 237:../../libdaisy/src/hid/midi.h ****                         pstate_ = ParserHasData0;
 238:../../libdaisy/src/hid/midi.h ****                     }
 239:../../libdaisy/src/hid/midi.h **** 
 240:../../libdaisy/src/hid/midi.h ****                     //ChannelModeMessages (reserved Control Changes)
 241:../../libdaisy/src/hid/midi.h ****                     if(running_status_ == ControlChange
 242:../../libdaisy/src/hid/midi.h ****                        && incoming_message_.data[0] > 119)
 243:../../libdaisy/src/hid/midi.h ****                     {
 244:../../libdaisy/src/hid/midi.h ****                         incoming_message_.type = ChannelMode;
 245:../../libdaisy/src/hid/midi.h ****                         running_status_        = ChannelMode;
 246:../../libdaisy/src/hid/midi.h ****                         incoming_message_.cm_type
 247:../../libdaisy/src/hid/midi.h ****                             = static_cast<ChannelModeType>(
 248:../../libdaisy/src/hid/midi.h ****                                 incoming_message_.data[0] - 120);
 249:../../libdaisy/src/hid/midi.h ****                     }
 250:../../libdaisy/src/hid/midi.h ****                 }
 251:../../libdaisy/src/hid/midi.h ****                 else
ARM GAS  /tmp/ccgxtOMv.s 			page 42


 252:../../libdaisy/src/hid/midi.h ****                 {
 253:../../libdaisy/src/hid/midi.h ****                     // invalid message go back to start ;p
 254:../../libdaisy/src/hid/midi.h ****                     pstate_ = ParserEmpty;
 255:../../libdaisy/src/hid/midi.h ****                 }
 256:../../libdaisy/src/hid/midi.h ****                 break;
 257:../../libdaisy/src/hid/midi.h ****             case ParserHasData0:
 258:../../libdaisy/src/hid/midi.h ****                 if((byte & kStatusByteMask) == 0)
 259:../../libdaisy/src/hid/midi.h ****                 {
 260:../../libdaisy/src/hid/midi.h ****                     incoming_message_.data[1] = byte & kDataByteMask;
 261:../../libdaisy/src/hid/midi.h **** 
 262:../../libdaisy/src/hid/midi.h ****                     //velocity 0 NoteOns are NoteOffs
 263:../../libdaisy/src/hid/midi.h ****                     if(running_status_ == NoteOn
 264:../../libdaisy/src/hid/midi.h ****                        && incoming_message_.data[1] == 0)
 265:../../libdaisy/src/hid/midi.h ****                     {
 266:../../libdaisy/src/hid/midi.h ****                         incoming_message_.type = running_status_ = NoteOff;
 267:../../libdaisy/src/hid/midi.h ****                     }
 268:../../libdaisy/src/hid/midi.h **** 
 269:../../libdaisy/src/hid/midi.h ****                     // At this point the message is valid, and we can add this MidiEvent to the que
 270:../../libdaisy/src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 271:../../libdaisy/src/hid/midi.h ****                 }
 272:../../libdaisy/src/hid/midi.h ****                 // Regardless, of whether the data was valid or not we go back to empty
 273:../../libdaisy/src/hid/midi.h ****                 // because either the message is queued for handling or its not.
 274:../../libdaisy/src/hid/midi.h ****                 pstate_ = ParserEmpty;
 275:../../libdaisy/src/hid/midi.h ****                 break;
 276:../../libdaisy/src/hid/midi.h ****             case ParserSysEx:
 277:../../libdaisy/src/hid/midi.h ****                 // end of sysex
 278:../../libdaisy/src/hid/midi.h ****                 if(byte == 0xf7)
 951              		.loc 2 278 17 is_stmt 0 view .LVU251
 952 00c4 F728     		cmp	r0, #247
 953 00c6 00F02181 		beq	.L92
 279:../../libdaisy/src/hid/midi.h ****                 {
 280:../../libdaisy/src/hid/midi.h ****                     pstate_ = ParserEmpty;
 281:../../libdaisy/src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 282:../../libdaisy/src/hid/midi.h ****                 }
 283:../../libdaisy/src/hid/midi.h ****                 else if(incoming_message_.sysex_message_len < SYSEX_BUFFER_LEN)
 954              		.loc 2 283 22 view .LVU252
 955 00ca 98F90622 		ldrsb	r2, [r8, #518]
 956              		.loc 2 283 43 view .LVU253
 957 00ce 98F80632 		ldrb	r3, [r8, #518]	@ zero_extendqisi2
 958              		.loc 2 283 22 view .LVU254
 959 00d2 002A     		cmp	r2, #0
 960 00d4 E5DB     		blt	.L32
 284:../../libdaisy/src/hid/midi.h ****                 {
 285:../../libdaisy/src/hid/midi.h ****                     incoming_message_
 961              		.loc 2 285 21 view .LVU255
 962 00d6 08EB0302 		add	r2, r8, r3
 286:../../libdaisy/src/hid/midi.h ****                         .sysex_data[incoming_message_.sysex_message_len]
 287:../../libdaisy/src/hid/midi.h ****                         = byte;
 288:../../libdaisy/src/hid/midi.h ****                     incoming_message_.sysex_message_len++;
 963              		.loc 2 288 21 view .LVU256
 964 00da 0133     		adds	r3, r3, #1
 285:../../libdaisy/src/hid/midi.h ****                         .sysex_data[incoming_message_.sysex_message_len]
 965              		.loc 2 285 21 view .LVU257
 966 00dc 82F88601 		strb	r0, [r2, #390]
 967              	.LBE540:
 968              	.LBE539:
 969              	.LBB572:
ARM GAS  /tmp/ccgxtOMv.s 			page 43


 970              	.LBB533:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 971              		.loc 2 61 54 view .LVU258
 972 00e0 8348     		ldr	r0, .L97+24
 973              	.LVL58:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 974              		.loc 2 61 54 view .LVU259
 975              	.LBE533:
 976              	.LBE572:
 977              	.LBB573:
 978              	.LBB569:
 979              		.loc 2 288 21 view .LVU260
 980 00e2 88F80632 		strb	r3, [r8, #518]
 981              	.LVL59:
 982              		.loc 2 288 21 view .LVU261
 983              	.LBE569:
 984              	.LBE573:
 113:../../libdaisy/src/hid/midi.h ****         {
 985              		.loc 2 113 9 is_stmt 1 view .LVU262
 986              	.LBB574:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 987              		.loc 2 61 20 view .LVU263
 988              	.LBB534:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 989              		.loc 2 61 33 view .LVU264
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 990              		.loc 2 61 54 is_stmt 0 view .LVU265
 991 00e6 FFF7FEFF 		bl	_ZN5daisy11UartHandler8ReadableEv
 992              	.LVL60:
  61:../../libdaisy/src/hid/midi.h ****     inline uint8_t Rx() { return uart_.PopRx(); }
 993              		.loc 2 61 54 view .LVU266
 994              	.LBE534:
 995              	.LBE574:
 113:../../libdaisy/src/hid/midi.h ****         {
 996              		.loc 2 113 9 view .LVU267
 997 00ea 0028     		cmp	r0, #0
 998 00ec DDD1     		bne	.L93
 999              	.L34:
 1000              	.LVL61:
 1001              	.LBB575:
 1002              	.LBI575:
  63:../../libdaisy/src/hid/midi.h ****     inline void    FlushRx() { uart_.FlushRx(); }
 1003              		.loc 2 63 20 is_stmt 1 view .LVU268
 1004              	.LBB576:
  63:../../libdaisy/src/hid/midi.h ****     inline void    FlushRx() { uart_.FlushRx(); }
 1005              		.loc 2 63 33 view .LVU269
  63:../../libdaisy/src/hid/midi.h ****     inline void    FlushRx() { uart_.FlushRx(); }
 1006              		.loc 2 63 54 is_stmt 0 view .LVU270
 1007 00ee 8048     		ldr	r0, .L97+24
 1008              	.LVL62:
  63:../../libdaisy/src/hid/midi.h ****     inline void    FlushRx() { uart_.FlushRx(); }
 1009              		.loc 2 63 54 view .LVU271
 1010 00f0 FFF7FEFF 		bl	_ZN5daisy11UartHandler8RxActiveEv
 1011              	.LVL63:
  63:../../libdaisy/src/hid/midi.h ****     inline void    FlushRx() { uart_.FlushRx(); }
 1012              		.loc 2 63 54 view .LVU272
 1013              	.LBE576:
ARM GAS  /tmp/ccgxtOMv.s 			page 44


 1014              	.LBE575:
 122:../../libdaisy/src/hid/midi.h ****         {
 1015              		.loc 2 122 9 view .LVU273
 1016 00f4 0346     		mov	r3, r0
 1017 00f6 0028     		cmp	r0, #0
 1018 00f8 00F0E580 		beq	.L94
 1019              	.LVL64:
 1020              	.L56:
 122:../../libdaisy/src/hid/midi.h ****         {
 1021              		.loc 2 122 9 view .LVU274
 1022              	.LBE530:
 1023              	.LBE529:
  94:Midi.cpp      ****         // Handle MIDI Events
  95:Midi.cpp      ****         while(hw.midi.HasEvents())
 1024              		.loc 15 95 9 is_stmt 1 view .LVU275
 1025              		.loc 15 95 32 view .LVU276
 1026              	.LBB588:
 1027              	.LBI588:
 133:../../libdaisy/src/hid/midi.h **** 
 1028              		.loc 2 133 10 view .LVU277
 1029              	.LBB589:
 1030              	.LBI589:
 1031              		.file 18 "../../libdaisy/src/util/ringbuffer.h"
   1:../../libdaisy/src/util/ringbuffer.h **** #pragma once
   2:../../libdaisy/src/util/ringbuffer.h **** #ifndef DSY_RINGBUFFER_H
   3:../../libdaisy/src/util/ringbuffer.h **** #define DSY_RINGBUFFER_H
   4:../../libdaisy/src/util/ringbuffer.h **** 
   5:../../libdaisy/src/util/ringbuffer.h **** #include <algorithm>
   6:../../libdaisy/src/util/ringbuffer.h **** 
   7:../../libdaisy/src/util/ringbuffer.h **** namespace daisy
   8:../../libdaisy/src/util/ringbuffer.h **** {
   9:../../libdaisy/src/util/ringbuffer.h **** /** @addtogroup utility
  10:../../libdaisy/src/util/ringbuffer.h ****     @{
  11:../../libdaisy/src/util/ringbuffer.h **** */
  12:../../libdaisy/src/util/ringbuffer.h **** 
  13:../../libdaisy/src/util/ringbuffer.h **** /**
  14:../../libdaisy/src/util/ringbuffer.h **** Utility Ring Buffer \n 
  15:../../libdaisy/src/util/ringbuffer.h **** imported from pichenettes/stmlib
  16:../../libdaisy/src/util/ringbuffer.h **** */
  17:../../libdaisy/src/util/ringbuffer.h **** template <typename T, size_t size>
  18:../../libdaisy/src/util/ringbuffer.h **** class RingBuffer
  19:../../libdaisy/src/util/ringbuffer.h **** {
  20:../../libdaisy/src/util/ringbuffer.h ****   public:
  21:../../libdaisy/src/util/ringbuffer.h ****     RingBuffer() {}
  22:../../libdaisy/src/util/ringbuffer.h **** 
  23:../../libdaisy/src/util/ringbuffer.h ****     /** Initializes the Ring Buffer */
  24:../../libdaisy/src/util/ringbuffer.h ****     inline void Init() { read_ptr_ = write_ptr_ = 0; }
  25:../../libdaisy/src/util/ringbuffer.h **** 
  26:../../libdaisy/src/util/ringbuffer.h ****     /** \return The total size of the ring buffer */
  27:../../libdaisy/src/util/ringbuffer.h ****     inline size_t capacity() const { return size; }
  28:../../libdaisy/src/util/ringbuffer.h **** 
  29:../../libdaisy/src/util/ringbuffer.h ****     /** \return the number of samples that can be written to ring buffer without overwriting unread
  30:../../libdaisy/src/util/ringbuffer.h ****     inline size_t writable() const
  31:../../libdaisy/src/util/ringbuffer.h ****     {
  32:../../libdaisy/src/util/ringbuffer.h ****         return (read_ptr_ - write_ptr_ - 1) % size;
  33:../../libdaisy/src/util/ringbuffer.h ****     }
  34:../../libdaisy/src/util/ringbuffer.h **** 
ARM GAS  /tmp/ccgxtOMv.s 			page 45


  35:../../libdaisy/src/util/ringbuffer.h ****     /** \return number of unread elements in ring buffer */
  36:../../libdaisy/src/util/ringbuffer.h ****     inline size_t readable() const { return (write_ptr_ - read_ptr_) % size; }
 1032              		.loc 18 36 19 view .LVU278
 1033              	.LBB590:
 1034              		.loc 18 36 46 is_stmt 0 view .LVU279
 1035 00fc 2B68     		ldr	r3, [r5]
 1036              		.loc 18 36 59 view .LVU280
 1037 00fe 2268     		ldr	r2, [r4]
 1038              	.LVL65:
 1039              		.loc 18 36 57 view .LVU281
 1040 0100 9B1A     		subs	r3, r3, r2
 1041              	.LBE590:
 1042              	.LBE589:
 1043              	.LBE588:
 1044              		.loc 15 95 32 view .LVU282
 1045 0102 13F0FF0F 		tst	r3, #255
 1046 0106 C9D0     		beq	.L58
 1047              	.L59:
 1048              	.LBB592:
 1049              	.LBB593:
 1050              	.LBB594:
  37:../../libdaisy/src/util/ringbuffer.h **** 
  38:../../libdaisy/src/util/ringbuffer.h ****     /** \returns True, if the buffer is empty. */
  39:../../libdaisy/src/util/ringbuffer.h ****     inline bool isEmpty() const { return write_ptr_ == read_ptr_; }
  40:../../libdaisy/src/util/ringbuffer.h **** 
  41:../../libdaisy/src/util/ringbuffer.h ****     /** Writes the value to the next available position in the ring buffer
  42:../../libdaisy/src/util/ringbuffer.h ****     \param v Value to write
  43:../../libdaisy/src/util/ringbuffer.h ****     */
  44:../../libdaisy/src/util/ringbuffer.h ****     inline void Write(T v)
  45:../../libdaisy/src/util/ringbuffer.h ****     {
  46:../../libdaisy/src/util/ringbuffer.h ****         while(!writable())
  47:../../libdaisy/src/util/ringbuffer.h ****             ;
  48:../../libdaisy/src/util/ringbuffer.h ****         Overwrite(v);
  49:../../libdaisy/src/util/ringbuffer.h ****     }
  50:../../libdaisy/src/util/ringbuffer.h **** 
  51:../../libdaisy/src/util/ringbuffer.h ****     /** Writes the new element to the ring buffer, overwriting unread data if necessary. 
  52:../../libdaisy/src/util/ringbuffer.h ****     \param v Value to overwrite
  53:../../libdaisy/src/util/ringbuffer.h ****      */
  54:../../libdaisy/src/util/ringbuffer.h ****     inline void Overwrite(T v)
  55:../../libdaisy/src/util/ringbuffer.h ****     {
  56:../../libdaisy/src/util/ringbuffer.h ****         size_t w   = write_ptr_;
  57:../../libdaisy/src/util/ringbuffer.h ****         buffer_[w] = v;
  58:../../libdaisy/src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
  59:../../libdaisy/src/util/ringbuffer.h ****     }
  60:../../libdaisy/src/util/ringbuffer.h **** 
  61:../../libdaisy/src/util/ringbuffer.h ****     /** Reads the first available element from the ring buffer
  62:../../libdaisy/src/util/ringbuffer.h ****     \return read value
  63:../../libdaisy/src/util/ringbuffer.h ****      */
  64:../../libdaisy/src/util/ringbuffer.h ****     inline T Read()
  65:../../libdaisy/src/util/ringbuffer.h ****     {
  66:../../libdaisy/src/util/ringbuffer.h ****         while(!readable())
 1051              		.loc 18 66 15 is_stmt 1 view .LVU283
 1052              	.LVL66:
 1053              	.LBB595:
 1054              	.LBI595:
  36:../../libdaisy/src/util/ringbuffer.h **** 
 1055              		.loc 18 36 19 view .LVU284
ARM GAS  /tmp/ccgxtOMv.s 			page 46


 1056              	.LBB596:
  36:../../libdaisy/src/util/ringbuffer.h **** 
 1057              		.loc 18 36 46 is_stmt 0 view .LVU285
 1058 0108 2B68     		ldr	r3, [r5]
  36:../../libdaisy/src/util/ringbuffer.h **** 
 1059              		.loc 18 36 59 view .LVU286
 1060 010a 2268     		ldr	r2, [r4]
  36:../../libdaisy/src/util/ringbuffer.h **** 
 1061              		.loc 18 36 57 view .LVU287
 1062 010c 9B1A     		subs	r3, r3, r2
 1063              	.LBE596:
 1064              	.LBE595:
 1065              		.loc 18 66 15 view .LVU288
 1066 010e 13F0FF0F 		tst	r3, #255
 1067 0112 F9D0     		beq	.L59
 1068              	.LVL67:
 1069              	.LBB597:
 1070              	.LBI597:
  67:../../libdaisy/src/util/ringbuffer.h ****             ;
  68:../../libdaisy/src/util/ringbuffer.h ****         return ImmediateRead();
  69:../../libdaisy/src/util/ringbuffer.h ****     }
  70:../../libdaisy/src/util/ringbuffer.h **** 
  71:../../libdaisy/src/util/ringbuffer.h ****     /** Reads next element from ring buffer immediately
  72:../../libdaisy/src/util/ringbuffer.h ****     \return read value
  73:../../libdaisy/src/util/ringbuffer.h ****      */
  74:../../libdaisy/src/util/ringbuffer.h ****     inline T ImmediateRead()
 1071              		.loc 18 74 14 is_stmt 1 view .LVU289
 1072              	.LBB598:
  75:../../libdaisy/src/util/ringbuffer.h ****     {
  76:../../libdaisy/src/util/ringbuffer.h ****         size_t r      = read_ptr_;
 1073              		.loc 18 76 16 is_stmt 0 view .LVU290
 1074 0114 2768     		ldr	r7, [r4]
 1075              	.LVL68:
  77:../../libdaisy/src/util/ringbuffer.h ****         T      result = buffer_[r];
 1076              		.loc 18 77 16 view .LVU291
 1077 0116 9022     		movs	r2, #144
 1078              	.LVL69:
 1079              		.loc 18 77 16 view .LVU292
 1080 0118 3046     		mov	r0, r6
 1081 011a 07EBC701 		add	r1, r7, r7, lsl #3
  78:../../libdaisy/src/util/ringbuffer.h ****         read_ptr_     = (r + 1) % size;
 1082              		.loc 18 78 28 view .LVU293
 1083 011e 0137     		adds	r7, r7, #1
 1084              	.LVL70:
  77:../../libdaisy/src/util/ringbuffer.h ****         T      result = buffer_[r];
 1085              		.loc 18 77 16 view .LVU294
 1086 0120 08EB0111 		add	r1, r8, r1, lsl #4
 1087              		.loc 18 78 33 view .LVU295
 1088 0124 FFB2     		uxtb	r7, r7
  77:../../libdaisy/src/util/ringbuffer.h ****         T      result = buffer_[r];
 1089              		.loc 18 77 16 view .LVU296
 1090 0126 01F50371 		add	r1, r1, #524
 1091 012a FFF7FEFF 		bl	memcpy
 1092              	.LVL71:
  77:../../libdaisy/src/util/ringbuffer.h ****         T      result = buffer_[r];
 1093              		.loc 18 77 16 view .LVU297
 1094              	.LBE598:
ARM GAS  /tmp/ccgxtOMv.s 			page 47


 1095              	.LBE597:
 1096              	.LBE594:
 1097              	.LBE593:
 1098              	.LBE592:
  96:Midi.cpp      ****         {
  97:Midi.cpp      ****             HandleMidiMessage(hw.midi.PopEvent());
 1099              		.loc 15 97 30 view .LVU298
 1100 012e 26A9     		add	r1, sp, #152
 1101 0130 8022     		movs	r2, #128
 1102 0132 6846     		mov	r0, sp
 1103              	.LBB603:
 1104              	.LBB602:
 1105              	.LBB601:
 1106              	.LBB600:
 1107              	.LBB599:
 1108              		.loc 18 78 9 view .LVU299
 1109 0134 2760     		str	r7, [r4]
 1110              		.loc 18 78 9 view .LVU300
 1111              	.LBE599:
 1112              	.LBE600:
 1113              	.LBE601:
 1114              	.LBE602:
 1115              	.LBE603:
 1116              		.loc 15 97 30 view .LVU301
 1117 0136 FFF7FEFF 		bl	memcpy
 1118              	.LVL72:
 1119 013a 96E80F00 		ldm	r6, {r0, r1, r2, r3}
 1120 013e FFF7FEFF 		bl	_Z17HandleMidiMessageN5daisy9MidiEventE
 1121              	.LVL73:
  95:Midi.cpp      ****         {
 1122              		.loc 15 95 9 is_stmt 1 view .LVU302
  95:Midi.cpp      ****         {
 1123              		.loc 15 95 32 view .LVU303
 1124              	.LBB604:
 133:../../libdaisy/src/hid/midi.h **** 
 1125              		.loc 2 133 10 view .LVU304
 1126              	.LBB591:
  36:../../libdaisy/src/util/ringbuffer.h **** 
 1127              		.loc 18 36 19 view .LVU305
 1128 0142 DBE7     		b	.L56
 1129              	.LVL74:
 1130              	.L37:
  36:../../libdaisy/src/util/ringbuffer.h **** 
 1131              		.loc 18 36 19 is_stmt 0 view .LVU306
 1132              	.LBE591:
 1133              	.LBE604:
 1134              	.LBB605:
 1135              	.LBB587:
 1136              	.LBB577:
 1137              	.LBB570:
 258:../../libdaisy/src/hid/midi.h ****                 {
 1138              		.loc 2 258 26 view .LVU307
 1139 0144 9BF80030 		ldrb	r3, [fp]	@ zero_extendqisi2
 258:../../libdaisy/src/hid/midi.h ****                 {
 1140              		.loc 2 258 17 view .LVU308
 1141 0148 0340     		ands	r3, r0, r3
 1142 014a 2CD1     		bne	.L47
ARM GAS  /tmp/ccgxtOMv.s 			page 48


 260:../../libdaisy/src/hid/midi.h **** 
 1143              		.loc 2 260 54 view .LVU309
 1144 014c 694A     		ldr	r2, .L97+28
 263:../../libdaisy/src/hid/midi.h ****                        && incoming_message_.data[1] == 0)
 1145              		.loc 2 263 21 view .LVU310
 1146 014e 6A49     		ldr	r1, .L97+32
 260:../../libdaisy/src/hid/midi.h **** 
 1147              		.loc 2 260 54 view .LVU311
 1148 0150 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 263:../../libdaisy/src/hid/midi.h ****                        && incoming_message_.data[1] == 0)
 1149              		.loc 2 263 21 view .LVU312
 1150 0152 0978     		ldrb	r1, [r1]	@ zero_extendqisi2
 260:../../libdaisy/src/hid/midi.h **** 
 1151              		.loc 2 260 54 view .LVU313
 1152 0154 1040     		ands	r0, r0, r2
 1153              	.LVL75:
 264:../../libdaisy/src/hid/midi.h ****                     {
 1154              		.loc 2 264 24 view .LVU314
 1155 0156 0129     		cmp	r1, #1
 260:../../libdaisy/src/hid/midi.h **** 
 1156              		.loc 2 260 21 view .LVU315
 1157 0158 88F88501 		strb	r0, [r8, #389]
 264:../../libdaisy/src/hid/midi.h ****                     {
 1158              		.loc 2 264 24 view .LVU316
 1159 015c 02D1     		bne	.L52
 1160 015e 0028     		cmp	r0, #0
 1161 0160 00F0FD80 		beq	.L95
 1162              	.L52:
 1163              	.LVL76:
 264:../../libdaisy/src/hid/midi.h ****                     {
 1164              		.loc 2 264 24 view .LVU317
 1165 0164 9022     		movs	r2, #144
 1166 0166 6549     		ldr	r1, .L97+36
 1167 0168 46A8     		add	r0, sp, #280
 1168 016a FFF7FEFF 		bl	memcpy
 1169              	.LVL77:
 1170              	.LBB541:
 1171              	.LBI541:
  44:../../libdaisy/src/util/ringbuffer.h ****     {
 1172              		.loc 18 44 17 is_stmt 1 view .LVU318
 1173              	.L53:
 1174              	.LBB542:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1175              		.loc 18 46 15 view .LVU319
 1176              	.LBB543:
 1177              	.LBI543:
  30:../../libdaisy/src/util/ringbuffer.h ****     {
 1178              		.loc 18 30 19 view .LVU320
 1179              	.LBB544:
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1180              		.loc 18 32 17 is_stmt 0 view .LVU321
 1181 016e 2368     		ldr	r3, [r4]
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1182              		.loc 18 32 29 view .LVU322
 1183 0170 2A68     		ldr	r2, [r5]
 1184              	.LVL78:
  32:../../libdaisy/src/util/ringbuffer.h ****     }
ARM GAS  /tmp/ccgxtOMv.s 			page 49


 1185              		.loc 18 32 40 view .LVU323
 1186 0172 013B     		subs	r3, r3, #1
 1187 0174 9B1A     		subs	r3, r3, r2
 1188              	.LBE544:
 1189              	.LBE543:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1190              		.loc 18 46 15 view .LVU324
 1191 0176 13F0FF0F 		tst	r3, #255
 1192 017a F8D0     		beq	.L53
 1193              	.LVL79:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1194              		.loc 18 46 15 view .LVU325
 1195 017c 9022     		movs	r2, #144
 1196 017e 46A9     		add	r1, sp, #280
 1197 0180 6AA8     		add	r0, sp, #424
 1198 0182 FFF7FEFF 		bl	memcpy
 1199              	.LVL80:
 1200              	.LBB545:
 1201              	.LBI545:
  54:../../libdaisy/src/util/ringbuffer.h ****     {
 1202              		.loc 18 54 17 is_stmt 1 view .LVU326
 1203              	.LBB546:
  56:../../libdaisy/src/util/ringbuffer.h ****         buffer_[w] = v;
 1204              		.loc 18 56 16 is_stmt 0 view .LVU327
 1205 0186 D5F80090 		ldr	r9, [r5]
 1206              	.LVL81:
  57:../../libdaisy/src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 1207              		.loc 18 57 9 view .LVU328
 1208 018a 9022     		movs	r2, #144
 1209 018c 6AA9     		add	r1, sp, #424
 1210 018e 09EBC900 		add	r0, r9, r9, lsl #3
 1211 0192 08EB0010 		add	r0, r8, r0, lsl #4
 1212 0196 00F50370 		add	r0, r0, #524
 1213 019a FFF7FEFF 		bl	memcpy
 1214              	.LVL82:
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1215              		.loc 18 58 25 view .LVU329
 1216 019e 09F10103 		add	r3, r9, #1
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1217              		.loc 18 58 30 view .LVU330
 1218 01a2 DBB2     		uxtb	r3, r3
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1219              		.loc 18 58 9 view .LVU331
 1220 01a4 2B60     		str	r3, [r5]
 1221              	.LVL83:
 1222              	.L47:
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1223              		.loc 18 58 9 view .LVU332
 1224              	.LBE546:
 1225              	.LBE545:
 1226              	.LBE542:
 1227              	.LBE541:
 254:../../libdaisy/src/hid/midi.h ****                 }
 1228              		.loc 2 254 21 view .LVU333
 1229 01a6 0023     		movs	r3, #0
 1230 01a8 88F87831 		strb	r3, [r8, #376]
 1231 01ac 79E7     		b	.L32
ARM GAS  /tmp/ccgxtOMv.s 			page 50


 1232              	.LVL84:
 1233              	.L39:
 161:../../libdaisy/src/hid/midi.h ****                 {
 1234              		.loc 2 161 25 view .LVU334
 1235 01ae 9BF80030 		ldrb	r3, [fp]	@ zero_extendqisi2
 161:../../libdaisy/src/hid/midi.h ****                 {
 1236              		.loc 2 161 17 view .LVU335
 1237 01b2 1842     		tst	r0, r3
 1238 01b4 7AD0     		beq	.L40
 166:../../libdaisy/src/hid/midi.h **** 
 1239              		.loc 2 166 31 view .LVU336
 1240 01b6 524B     		ldr	r3, .L97+40
 164:../../libdaisy/src/hid/midi.h ****                     incoming_message_.type    = static_cast<MidiMessageType>(
 1241              		.loc 2 164 54 view .LVU337
 1242 01b8 524A     		ldr	r2, .L97+44
 166:../../libdaisy/src/hid/midi.h **** 
 1243              		.loc 2 166 31 view .LVU338
 1244 01ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 164:../../libdaisy/src/hid/midi.h ****                     incoming_message_.type    = static_cast<MidiMessageType>(
 1245              		.loc 2 164 54 view .LVU339
 1246 01bc 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 166:../../libdaisy/src/hid/midi.h **** 
 1247              		.loc 2 166 31 view .LVU340
 1248 01be 0340     		ands	r3, r3, r0
 164:../../libdaisy/src/hid/midi.h ****                     incoming_message_.type    = static_cast<MidiMessageType>(
 1249              		.loc 2 164 54 view .LVU341
 1250 01c0 0240     		ands	r2, r2, r0
 166:../../libdaisy/src/hid/midi.h **** 
 1251              		.loc 2 166 47 view .LVU342
 1252 01c2 1909     		lsrs	r1, r3, #4
 169:../../libdaisy/src/hid/midi.h ****                     {
 1253              		.loc 2 169 21 view .LVU343
 1254 01c4 9F2B     		cmp	r3, #159
 166:../../libdaisy/src/hid/midi.h **** 
 1255              		.loc 2 166 47 view .LVU344
 1256 01c6 4FEA231C 		asr	ip, r3, #4
 164:../../libdaisy/src/hid/midi.h ****                     incoming_message_.type    = static_cast<MidiMessageType>(
 1257              		.loc 2 164 54 view .LVU345
 1258 01ca C8F88021 		str	r2, [r8, #384]
 165:../../libdaisy/src/hid/midi.h ****                         (byte & kMessageMask) >> 4);
 1259              		.loc 2 165 21 view .LVU346
 1260 01ce 88F87C11 		strb	r1, [r8, #380]
 169:../../libdaisy/src/hid/midi.h ****                     {
 1261              		.loc 2 169 21 view .LVU347
 1262 01d2 3FF666AF 		bhi	.L32
 171:../../libdaisy/src/hid/midi.h ****                         // Mark this status byte as running_status
 1263              		.loc 2 171 25 view .LVU348
 1264 01d6 0123     		movs	r3, #1
 173:../../libdaisy/src/hid/midi.h **** 
 1265              		.loc 2 173 25 view .LVU349
 1266 01d8 474A     		ldr	r2, .L97+32
 175:../../libdaisy/src/hid/midi.h ****                         {
 1267              		.loc 2 175 25 view .LVU350
 1268 01da BCF1070F 		cmp	ip, #7
 173:../../libdaisy/src/hid/midi.h **** 
 1269              		.loc 2 173 25 view .LVU351
 1270 01de 1170     		strb	r1, [r2]
ARM GAS  /tmp/ccgxtOMv.s 			page 51


 171:../../libdaisy/src/hid/midi.h ****                         // Mark this status byte as running_status
 1271              		.loc 2 171 25 view .LVU352
 1272 01e0 88F87831 		strb	r3, [r8, #376]
 175:../../libdaisy/src/hid/midi.h ****                         {
 1273              		.loc 2 175 25 view .LVU353
 1274 01e4 7FF45DAF 		bne	.L32
 177:../../libdaisy/src/hid/midi.h ****                             //system real time = 1111 1xxx
 1275              		.loc 2 177 29 view .LVU354
 1276 01e8 0022     		movs	r2, #0
 179:../../libdaisy/src/hid/midi.h ****                             {
 1277              		.loc 2 179 29 view .LVU355
 1278 01ea 10F0080C 		ands	ip, r0, #8
 177:../../libdaisy/src/hid/midi.h ****                             //system real time = 1111 1xxx
 1279              		.loc 2 177 29 view .LVU356
 1280 01ee C8F88021 		str	r2, [r8, #384]
 179:../../libdaisy/src/hid/midi.h ****                             {
 1281              		.loc 2 179 29 view .LVU357
 1282 01f2 40F0CB80 		bne	.L96
 196:../../libdaisy/src/hid/midi.h ****                                 //sysex
 1283              		.loc 2 196 69 view .LVU358
 1284 01f6 00F00703 		and	r3, r0, #7
 194:../../libdaisy/src/hid/midi.h ****                                     = static_cast<SystemCommonType>(byte
 1285              		.loc 2 194 33 view .LVU359
 1286 01fa 88F80732 		strb	r3, [r8, #519]
 198:../../libdaisy/src/hid/midi.h ****                                 {
 1287              		.loc 2 198 33 view .LVU360
 1288 01fe 002B     		cmp	r3, #0
 1289 0200 40F0B280 		bne	.L45
 200:../../libdaisy/src/hid/midi.h ****                                     incoming_message_.sysex_message_len = 0;
 1290              		.loc 2 200 37 view .LVU361
 1291 0204 0322     		movs	r2, #3
 201:../../libdaisy/src/hid/midi.h ****                                 }
 1292              		.loc 2 201 37 view .LVU362
 1293 0206 88F80632 		strb	r3, [r8, #518]
 200:../../libdaisy/src/hid/midi.h ****                                     incoming_message_.sysex_message_len = 0;
 1294              		.loc 2 200 37 view .LVU363
 1295 020a 88F87821 		strb	r2, [r8, #376]
 1296 020e 48E7     		b	.L32
 1297              	.L38:
 223:../../libdaisy/src/hid/midi.h ****                 {
 1298              		.loc 2 223 26 view .LVU364
 1299 0210 9BF80030 		ldrb	r3, [fp]	@ zero_extendqisi2
 223:../../libdaisy/src/hid/midi.h ****                 {
 1300              		.loc 2 223 17 view .LVU365
 1301 0214 1842     		tst	r0, r3
 1302 0216 C6D1     		bne	.L47
 225:../../libdaisy/src/hid/midi.h ****                     if(running_status_ == ChannelPressure
 1303              		.loc 2 225 54 view .LVU366
 1304 0218 364B     		ldr	r3, .L97+28
 1305 021a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 226:../../libdaisy/src/hid/midi.h ****                        || running_status_ == ProgramChange
 1306              		.loc 2 226 24 view .LVU367
 1307 021c 123B     		subs	r3, r3, #18
 1308 021e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 225:../../libdaisy/src/hid/midi.h ****                     if(running_status_ == ChannelPressure
 1309              		.loc 2 225 54 view .LVU368
 1310 0220 00EA0209 		and	r9, r0, r2
ARM GAS  /tmp/ccgxtOMv.s 			page 52


 226:../../libdaisy/src/hid/midi.h ****                        || running_status_ == ProgramChange
 1311              		.loc 2 226 21 view .LVU369
 1312 0224 1A1F     		subs	r2, r3, #4
 226:../../libdaisy/src/hid/midi.h ****                        || running_status_ == ProgramChange
 1313              		.loc 2 226 24 view .LVU370
 1314 0226 2093     		str	r3, [sp, #128]
 225:../../libdaisy/src/hid/midi.h ****                     if(running_status_ == ChannelPressure
 1315              		.loc 2 225 21 view .LVU371
 1316 0228 88F88491 		strb	r9, [r8, #388]
 226:../../libdaisy/src/hid/midi.h ****                        || running_status_ == ProgramChange
 1317              		.loc 2 226 21 view .LVU372
 1318 022c 012A     		cmp	r2, #1
 1319 022e 06D9     		bls	.L48
 228:../../libdaisy/src/hid/midi.h ****                        || incoming_message_.sc_type == SongSelect)
 1320              		.loc 2 228 24 view .LVU373
 1321 0230 98F80722 		ldrb	r2, [r8, #519]	@ zero_extendqisi2
 229:../../libdaisy/src/hid/midi.h ****                     {
 1322              		.loc 2 229 24 view .LVU374
 1323 0234 02F0FD02 		and	r2, r2, #253
 1324 0238 012A     		cmp	r2, #1
 1325 023a 40F08C80 		bne	.L49
 1326              	.L48:
 232:../../libdaisy/src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 1327              		.loc 2 232 25 view .LVU375
 1328 023e 4FF0000C 		mov	ip, #0
 1329 0242 9022     		movs	r2, #144
 1330 0244 2D49     		ldr	r1, .L97+36
 1331 0246 46A8     		add	r0, sp, #280
 1332              	.LVL85:
 232:../../libdaisy/src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 1333              		.loc 2 232 25 view .LVU376
 1334 0248 88F878C1 		strb	ip, [r8, #376]
 1335              	.LVL86:
 232:../../libdaisy/src/hid/midi.h ****                         event_q_.Write(incoming_message_);
 1336              		.loc 2 232 25 view .LVU377
 1337 024c FFF7FEFF 		bl	memcpy
 1338              	.LVL87:
 1339              	.LBB547:
 1340              	.LBI547:
  44:../../libdaisy/src/util/ringbuffer.h ****     {
 1341              		.loc 18 44 17 is_stmt 1 view .LVU378
 1342              	.L50:
 1343              	.LBB548:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1344              		.loc 18 46 15 view .LVU379
 1345              	.LBB549:
 1346              	.LBI549:
  30:../../libdaisy/src/util/ringbuffer.h ****     {
 1347              		.loc 18 30 19 view .LVU380
 1348              	.LBB550:
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1349              		.loc 18 32 17 is_stmt 0 view .LVU381
 1350 0250 2368     		ldr	r3, [r4]
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1351              		.loc 18 32 29 view .LVU382
 1352 0252 2A68     		ldr	r2, [r5]
 1353              	.LVL88:
ARM GAS  /tmp/ccgxtOMv.s 			page 53


  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1354              		.loc 18 32 40 view .LVU383
 1355 0254 013B     		subs	r3, r3, #1
 1356 0256 9B1A     		subs	r3, r3, r2
 1357              	.LBE550:
 1358              	.LBE549:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1359              		.loc 18 46 15 view .LVU384
 1360 0258 13F0FF0F 		tst	r3, #255
 1361 025c F8D0     		beq	.L50
 1362              	.LVL89:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1363              		.loc 18 46 15 view .LVU385
 1364 025e 9022     		movs	r2, #144
 1365 0260 46A9     		add	r1, sp, #280
 1366 0262 6AA8     		add	r0, sp, #424
 1367 0264 FFF7FEFF 		bl	memcpy
 1368              	.LVL90:
 1369              	.LBB551:
 1370              	.LBI551:
  54:../../libdaisy/src/util/ringbuffer.h ****     {
 1371              		.loc 18 54 17 is_stmt 1 view .LVU386
 1372              	.LBB552:
  56:../../libdaisy/src/util/ringbuffer.h ****         buffer_[w] = v;
 1373              		.loc 18 56 16 is_stmt 0 view .LVU387
 1374 0268 2B68     		ldr	r3, [r5]
 1375              	.LVL91:
  57:../../libdaisy/src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 1376              		.loc 18 57 9 view .LVU388
 1377 026a 9022     		movs	r2, #144
 1378 026c 6AA9     		add	r1, sp, #424
 1379 026e 03EBC300 		add	r0, r3, r3, lsl #3
 1380 0272 2193     		str	r3, [sp, #132]
 1381 0274 08EB0010 		add	r0, r8, r0, lsl #4
 1382 0278 00F50370 		add	r0, r0, #524
 1383 027c FFF7FEFF 		bl	memcpy
 1384              	.LVL92:
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1385              		.loc 18 58 25 view .LVU389
 1386 0280 219B     		ldr	r3, [sp, #132]
 1387 0282 5A1C     		adds	r2, r3, #1
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1388              		.loc 18 58 30 view .LVU390
 1389 0284 D2B2     		uxtb	r2, r2
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1390              		.loc 18 58 9 view .LVU391
 1391 0286 2A60     		str	r2, [r5]
 1392              	.LVL93:
 1393              	.L51:
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1394              		.loc 18 58 9 view .LVU392
 1395              	.LBE552:
 1396              	.LBE551:
 1397              	.LBE548:
 1398              	.LBE547:
 242:../../libdaisy/src/hid/midi.h ****                     {
 1399              		.loc 2 242 24 view .LVU393
ARM GAS  /tmp/ccgxtOMv.s 			page 54


 1400 0288 209B     		ldr	r3, [sp, #128]
 1401 028a 032B     		cmp	r3, #3
 1402 028c 7FF409AF 		bne	.L32
 1403 0290 B9F1770F 		cmp	r9, #119
 1404 0294 7FF605AF 		bls	.L32
 248:../../libdaisy/src/hid/midi.h ****                     }
 1405              		.loc 2 248 59 view .LVU394
 1406 0298 A9F17803 		sub	r3, r9, #120
 244:../../libdaisy/src/hid/midi.h ****                         running_status_        = ChannelMode;
 1407              		.loc 2 244 25 view .LVU395
 1408 029c 0922     		movs	r2, #9
 246:../../libdaisy/src/hid/midi.h ****                             = static_cast<ChannelModeType>(
 1409              		.loc 2 246 25 view .LVU396
 1410 029e 88F80932 		strb	r3, [r8, #521]
 245:../../libdaisy/src/hid/midi.h ****                         incoming_message_.cm_type
 1411              		.loc 2 245 25 view .LVU397
 1412 02a2 154B     		ldr	r3, .L97+32
 244:../../libdaisy/src/hid/midi.h ****                         running_status_        = ChannelMode;
 1413              		.loc 2 244 25 view .LVU398
 1414 02a4 88F87C21 		strb	r2, [r8, #380]
 245:../../libdaisy/src/hid/midi.h ****                         incoming_message_.cm_type
 1415              		.loc 2 245 25 view .LVU399
 1416 02a8 1A70     		strb	r2, [r3]
 1417 02aa FAE6     		b	.L32
 1418              	.LVL94:
 1419              	.L40:
 218:../../libdaisy/src/hid/midi.h ****                     pstate_                   = ParserHasData0;
 1420              		.loc 2 218 54 view .LVU400
 1421 02ac 114B     		ldr	r3, .L97+28
 219:../../libdaisy/src/hid/midi.h ****                 }
 1422              		.loc 2 219 21 view .LVU401
 1423 02ae 0222     		movs	r2, #2
 218:../../libdaisy/src/hid/midi.h ****                     pstate_                   = ParserHasData0;
 1424              		.loc 2 218 54 view .LVU402
 1425 02b0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 219:../../libdaisy/src/hid/midi.h ****                 }
 1426              		.loc 2 219 21 view .LVU403
 1427 02b2 88F87821 		strb	r2, [r8, #376]
 218:../../libdaisy/src/hid/midi.h ****                     pstate_                   = ParserHasData0;
 1428              		.loc 2 218 54 view .LVU404
 1429 02b6 1840     		ands	r0, r0, r3
 1430              	.LVL95:
 217:../../libdaisy/src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
 1431              		.loc 2 217 21 view .LVU405
 1432 02b8 0F4B     		ldr	r3, .L97+32
 1433 02ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 218:../../libdaisy/src/hid/midi.h ****                     pstate_                   = ParserHasData0;
 1434              		.loc 2 218 21 view .LVU406
 1435 02bc 88F88401 		strb	r0, [r8, #388]
 217:../../libdaisy/src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
 1436              		.loc 2 217 21 view .LVU407
 1437 02c0 88F87C31 		strb	r3, [r8, #380]
 1438 02c4 EDE6     		b	.L32
 1439              	.LVL96:
 1440              	.L94:
 217:../../libdaisy/src/hid/midi.h ****                     incoming_message_.data[0] = byte & kDataByteMask;
 1441              		.loc 2 217 21 view .LVU408
ARM GAS  /tmp/ccgxtOMv.s 			page 55


 1442              	.LBE570:
 1443              	.LBE577:
 1444              	.LBB578:
 1445              	.LBB579:
  64:../../libdaisy/src/hid/midi.h ****     inline void    Tx(uint8_t* buff, size_t size) { uart_.PollTx(buff, size); }
 1446              		.loc 2 64 45 view .LVU409
 1447 02c6 0A48     		ldr	r0, .L97+24
 1448              	.LBE579:
 1449              	.LBE578:
 124:../../libdaisy/src/hid/midi.h ****             transport_.FlushRx();
 1450              		.loc 2 124 13 view .LVU410
 1451 02c8 88F87831 		strb	r3, [r8, #376]
 1452              	.LVL97:
 1453              	.LBB581:
 1454              	.LBI578:
  64:../../libdaisy/src/hid/midi.h ****     inline void    Tx(uint8_t* buff, size_t size) { uart_.PollTx(buff, size); }
 1455              		.loc 2 64 20 is_stmt 1 view .LVU411
 1456              	.LBB580:
  64:../../libdaisy/src/hid/midi.h ****     inline void    Tx(uint8_t* buff, size_t size) { uart_.PollTx(buff, size); }
 1457              		.loc 2 64 32 view .LVU412
  64:../../libdaisy/src/hid/midi.h ****     inline void    Tx(uint8_t* buff, size_t size) { uart_.PollTx(buff, size); }
 1458              		.loc 2 64 45 is_stmt 0 view .LVU413
 1459 02cc FFF7FEFF 		bl	_ZN5daisy11UartHandler7FlushRxEv
 1460              	.LVL98:
  64:../../libdaisy/src/hid/midi.h ****     inline void    Tx(uint8_t* buff, size_t size) { uart_.PollTx(buff, size); }
 1461              		.loc 2 64 45 view .LVU414
 1462              	.LBE580:
 1463              	.LBE581:
 1464              	.LBB582:
 1465              	.LBI582:
 106:../../libdaisy/src/hid/midi.h **** 
 1466              		.loc 2 106 10 is_stmt 1 view .LVU415
 1467              	.LBB583:
 1468              	.LBB584:
 1469              	.LBI584:
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 1470              		.loc 2 60 20 view .LVU416
 1471              	.LBB585:
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 1472              		.loc 2 60 32 view .LVU417
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 1473              		.loc 2 60 45 is_stmt 0 view .LVU418
 1474 02d0 0748     		ldr	r0, .L97+24
 1475              	.LVL99:
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 1476              		.loc 2 60 45 view .LVU419
 1477 02d2 FFF7FEFF 		bl	_ZN5daisy11UartHandler7StartRxEv
 1478              	.LVL100:
  60:../../libdaisy/src/hid/midi.h ****     inline size_t  Readable() { return uart_.Readable(); }
 1479              		.loc 2 60 45 view .LVU420
 1480              	.LBE585:
 1481              	.LBE584:
 106:../../libdaisy/src/hid/midi.h **** 
 1482              		.loc 2 106 49 view .LVU421
 1483 02d6 11E7     		b	.L56
 1484              	.L98:
 1485              		.align	2
ARM GAS  /tmp/ccgxtOMv.s 			page 56


 1486              	.L97:
 1487 02d8 00000000 		.word	hw
 1488 02dc 00000000 		.word	.LANCHOR0
 1489 02e0 24000000 		.word	hw+36
 1490 02e4 0000C842 		.word	1120403456
 1491 02e8 00000000 		.word	.LANCHOR1
 1492 02ec 00000000 		.word	_Z13AudioCallbackPKfPfj
 1493 02f0 24920000 		.word	hw+37412
 1494 02f4 2A920000 		.word	hw+37418
 1495 02f8 18920000 		.word	hw+37400
 1496 02fc 7C010000 		.word	hw+380
 1497 0300 29920000 		.word	hw+37417
 1498 0304 2C920000 		.word	hw+37420
 1499 0308 14920000 		.word	hw+37396
 1500              	.LVL101:
 1501              	.L92:
 106:../../libdaisy/src/hid/midi.h **** 
 1502              		.loc 2 106 49 view .LVU422
 1503              	.LBE583:
 1504              	.LBE582:
 1505              	.LBB586:
 1506              	.LBB571:
 280:../../libdaisy/src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 1507              		.loc 2 280 21 view .LVU423
 1508 030c 0023     		movs	r3, #0
 1509 030e 9022     		movs	r2, #144
 1510 0310 2C49     		ldr	r1, .L99
 1511 0312 46A8     		add	r0, sp, #280
 1512              	.LVL102:
 280:../../libdaisy/src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 1513              		.loc 2 280 21 view .LVU424
 1514 0314 88F87831 		strb	r3, [r8, #376]
 1515              	.LVL103:
 280:../../libdaisy/src/hid/midi.h ****                     event_q_.Write(incoming_message_);
 1516              		.loc 2 280 21 view .LVU425
 1517 0318 FFF7FEFF 		bl	memcpy
 1518              	.LVL104:
 1519              	.LBB553:
 1520              	.LBI553:
  44:../../libdaisy/src/util/ringbuffer.h ****     {
 1521              		.loc 18 44 17 is_stmt 1 view .LVU426
 1522              	.L55:
 1523              	.LBB554:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1524              		.loc 18 46 15 view .LVU427
 1525              	.LBB555:
 1526              	.LBI555:
  30:../../libdaisy/src/util/ringbuffer.h ****     {
 1527              		.loc 18 30 19 view .LVU428
 1528              	.LBB556:
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1529              		.loc 18 32 17 is_stmt 0 view .LVU429
 1530 031c 2368     		ldr	r3, [r4]
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1531              		.loc 18 32 29 view .LVU430
 1532 031e 2A68     		ldr	r2, [r5]
 1533              	.LVL105:
ARM GAS  /tmp/ccgxtOMv.s 			page 57


  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1534              		.loc 18 32 40 view .LVU431
 1535 0320 013B     		subs	r3, r3, #1
 1536 0322 9B1A     		subs	r3, r3, r2
 1537              	.LBE556:
 1538              	.LBE555:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1539              		.loc 18 46 15 view .LVU432
 1540 0324 13F0FF0F 		tst	r3, #255
 1541 0328 F8D0     		beq	.L55
 1542              	.LVL106:
 1543              	.L91:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1544              		.loc 18 46 15 view .LVU433
 1545 032a 9022     		movs	r2, #144
 1546 032c 46A9     		add	r1, sp, #280
 1547 032e 6AA8     		add	r0, sp, #424
 1548 0330 FFF7FEFF 		bl	memcpy
 1549              	.LVL107:
 1550              	.LBB557:
 1551              	.LBI557:
  54:../../libdaisy/src/util/ringbuffer.h ****     {
 1552              		.loc 18 54 17 is_stmt 1 view .LVU434
 1553              	.LBB558:
  56:../../libdaisy/src/util/ringbuffer.h ****         buffer_[w] = v;
 1554              		.loc 18 56 16 is_stmt 0 view .LVU435
 1555 0334 D5F80090 		ldr	r9, [r5]
 1556              	.LVL108:
  57:../../libdaisy/src/util/ringbuffer.h ****         write_ptr_ = (w + 1) % size;
 1557              		.loc 18 57 9 view .LVU436
 1558 0338 9022     		movs	r2, #144
 1559 033a 6AA9     		add	r1, sp, #424
 1560 033c 09EBC900 		add	r0, r9, r9, lsl #3
 1561 0340 08EB0010 		add	r0, r8, r0, lsl #4
 1562 0344 00F50370 		add	r0, r0, #524
 1563 0348 FFF7FEFF 		bl	memcpy
 1564              	.LVL109:
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1565              		.loc 18 58 25 view .LVU437
 1566 034c 09F10103 		add	r3, r9, #1
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1567              		.loc 18 58 30 view .LVU438
 1568 0350 DBB2     		uxtb	r3, r3
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1569              		.loc 18 58 9 view .LVU439
 1570 0352 2B60     		str	r3, [r5]
 1571              	.LVL110:
  58:../../libdaisy/src/util/ringbuffer.h ****     }
 1572              		.loc 18 58 9 view .LVU440
 1573              	.LBE558:
 1574              	.LBE557:
 1575              	.LBE554:
 1576              	.LBE553:
 1577 0354 A5E6     		b	.L32
 1578              	.LVL111:
 1579              	.L49:
 237:../../libdaisy/src/hid/midi.h ****                     }
ARM GAS  /tmp/ccgxtOMv.s 			page 58


 1580              		.loc 2 237 25 view .LVU441
 1581 0356 0222     		movs	r2, #2
 1582 0358 88F87821 		strb	r2, [r8, #376]
 1583 035c 94E7     		b	.L51
 1584              	.LVL112:
 1585              	.L95:
 266:../../libdaisy/src/hid/midi.h ****                     }
 1586              		.loc 2 266 25 view .LVU442
 1587 035e 1A4A     		ldr	r2, .L99+4
 1588 0360 88F87C31 		strb	r3, [r8, #380]
 1589 0364 1370     		strb	r3, [r2]
 1590 0366 FDE6     		b	.L52
 1591              	.LVL113:
 1592              	.L45:
 204:../../libdaisy/src/hid/midi.h ****                                 {
 1593              		.loc 2 204 38 view .LVU443
 1594 0368 4307     		lsls	r3, r0, #29
 1595 036a 7FF59AAE 		bpl	.L32
 1596 036e 9022     		movs	r2, #144
 1597 0370 1449     		ldr	r1, .L99
 1598 0372 46A8     		add	r0, sp, #280
 1599              	.LVL114:
 206:../../libdaisy/src/hid/midi.h ****                                     event_q_.Write(incoming_message_);
 1600              		.loc 2 206 37 view .LVU444
 1601 0374 88F878C1 		strb	ip, [r8, #376]
 1602              	.LVL115:
 206:../../libdaisy/src/hid/midi.h ****                                     event_q_.Write(incoming_message_);
 1603              		.loc 2 206 37 view .LVU445
 1604 0378 FFF7FEFF 		bl	memcpy
 1605              	.LVL116:
 1606              	.LBB559:
 1607              	.LBI559:
  44:../../libdaisy/src/util/ringbuffer.h ****     {
 1608              		.loc 18 44 17 is_stmt 1 view .LVU446
 1609              	.L46:
 1610              	.LBB560:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1611              		.loc 18 46 15 view .LVU447
 1612              	.LBB561:
 1613              	.LBI561:
  30:../../libdaisy/src/util/ringbuffer.h ****     {
 1614              		.loc 18 30 19 view .LVU448
 1615              	.LBB562:
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1616              		.loc 18 32 17 is_stmt 0 view .LVU449
 1617 037c 2368     		ldr	r3, [r4]
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1618              		.loc 18 32 29 view .LVU450
 1619 037e 2A68     		ldr	r2, [r5]
 1620              	.LVL117:
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1621              		.loc 18 32 40 view .LVU451
 1622 0380 013B     		subs	r3, r3, #1
 1623 0382 9B1A     		subs	r3, r3, r2
 1624              	.LBE562:
 1625              	.LBE561:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
ARM GAS  /tmp/ccgxtOMv.s 			page 59


 1626              		.loc 18 46 15 view .LVU452
 1627 0384 13F0FF0F 		tst	r3, #255
 1628 0388 F8D0     		beq	.L46
 1629 038a CEE7     		b	.L91
 1630              	.LVL118:
 1631              	.L96:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1632              		.loc 18 46 15 view .LVU453
 1633              	.LBE560:
 1634              	.LBE559:
 1635              	.LBB563:
 1636              	.LBI563:
 155:../../libdaisy/src/hid/midi.h ****     {
 1637              		.loc 2 155 10 is_stmt 1 view .LVU454
 1638              	.LBB564:
 185:../../libdaisy/src/hid/midi.h **** 
 1639              		.loc 2 185 46 is_stmt 0 view .LVU455
 1640 038c 0F4B     		ldr	r3, .L99+8
 181:../../libdaisy/src/hid/midi.h ****                                 running_status_        = SystemRealTime;
 1641              		.loc 2 181 33 view .LVU456
 1642 038e 4FF0080C 		mov	ip, #8
 188:../../libdaisy/src/hid/midi.h ****                                 event_q_.Write(incoming_message_);
 1643              		.loc 2 188 33 view .LVU457
 1644 0392 88F87821 		strb	r2, [r8, #376]
 1645              	.LVL119:
 188:../../libdaisy/src/hid/midi.h ****                                 event_q_.Write(incoming_message_);
 1646              		.loc 2 188 33 view .LVU458
 1647 0396 9022     		movs	r2, #144
 185:../../libdaisy/src/hid/midi.h **** 
 1648              		.loc 2 185 46 view .LVU459
 1649 0398 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1650 039a 0A49     		ldr	r1, .L99
 1651 039c 0340     		ands	r3, r3, r0
 1652 039e 46A8     		add	r0, sp, #280
 1653              	.LVL120:
 181:../../libdaisy/src/hid/midi.h ****                                 running_status_        = SystemRealTime;
 1654              		.loc 2 181 33 view .LVU460
 1655 03a0 88F87CC1 		strb	ip, [r8, #380]
 183:../../libdaisy/src/hid/midi.h ****                                     = static_cast<SystemRealTimeType>(
 1656              		.loc 2 183 33 view .LVU461
 1657 03a4 88F80832 		strb	r3, [r8, #520]
 182:../../libdaisy/src/hid/midi.h ****                                 incoming_message_.srt_type
 1658              		.loc 2 182 33 view .LVU462
 1659 03a8 074B     		ldr	r3, .L99+4
 1660 03aa 83F800C0 		strb	ip, [r3]
 1661 03ae FFF7FEFF 		bl	memcpy
 1662              	.LVL121:
 1663              	.LBB565:
 1664              	.LBI565:
  44:../../libdaisy/src/util/ringbuffer.h ****     {
 1665              		.loc 18 44 17 is_stmt 1 view .LVU463
 1666              	.L44:
 1667              	.LBB566:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1668              		.loc 18 46 15 view .LVU464
 1669              	.LBB567:
 1670              	.LBI567:
ARM GAS  /tmp/ccgxtOMv.s 			page 60


  30:../../libdaisy/src/util/ringbuffer.h ****     {
 1671              		.loc 18 30 19 view .LVU465
 1672              	.LBB568:
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1673              		.loc 18 32 17 is_stmt 0 view .LVU466
 1674 03b2 2368     		ldr	r3, [r4]
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1675              		.loc 18 32 29 view .LVU467
 1676 03b4 2A68     		ldr	r2, [r5]
 1677              	.LVL122:
  32:../../libdaisy/src/util/ringbuffer.h ****     }
 1678              		.loc 18 32 40 view .LVU468
 1679 03b6 013B     		subs	r3, r3, #1
 1680 03b8 9B1A     		subs	r3, r3, r2
 1681              	.LBE568:
 1682              	.LBE567:
  46:../../libdaisy/src/util/ringbuffer.h ****             ;
 1683              		.loc 18 46 15 view .LVU469
 1684 03ba 13F0FF0F 		tst	r3, #255
 1685 03be F8D0     		beq	.L44
 1686 03c0 B3E7     		b	.L91
 1687              	.L100:
 1688 03c2 00BF     		.align	2
 1689              	.L99:
 1690 03c4 7C010000 		.word	hw+380
 1691 03c8 18920000 		.word	hw+37400
 1692 03cc 2E920000 		.word	hw+37422
 1693              	.LBE566:
 1694              	.LBE565:
 1695              	.LBE564:
 1696              	.LBE563:
 1697              	.LBE571:
 1698              	.LBE586:
 1699              	.LBE587:
 1700              	.LBE605:
 1701              		.cfi_endproc
 1702              	.LFE4221:
 1704              		.section	.text.startup._GLOBAL__sub_I_hw,"ax",%progbits
 1705              		.align	1
 1706              		.p2align 2,,3
 1707              		.syntax unified
 1708              		.thumb
 1709              		.thumb_func
 1710              		.fpu fpv5-d16
 1712              	_GLOBAL__sub_I_hw:
 1713              	.LFB4790:
  98:Midi.cpp      ****         }
  99:Midi.cpp      ****     }
 100:Midi.cpp      **** }
 1714              		.loc 15 100 1 is_stmt 1 view -0
 1715              		.cfi_startproc
 1716              		@ args = 0, pretend = 0, frame = 0
 1717              		@ frame_needed = 0, uses_anonymous_args = 0
 1718              	.LBB671:
 1719              	.LBI671:
 1720              		.loc 15 100 1 view .LVU471
 1721              	.LVL123:
ARM GAS  /tmp/ccgxtOMv.s 			page 61


 1722              	.LBB672:
 1723              	.LBB673:
 1724              	.LBI673:
  35:../../libdaisy/src/daisy_pod.h ****     ~DaisyPod() {}
 1725              		.loc 1 35 5 view .LVU472
 1726              	.LBB674:
 1727              	.LBB675:
 1728              	.LBI675:
  21:../../libdaisy/src/daisy_seed.h ****     ~DaisySeed() {}
 1729              		.loc 8 21 5 view .LVU473
 1730              	.LBB676:
 1731              	.LBB677:
 1732              	.LBI677:
  62:../../libdaisy/src/hid/audio.h ****     ~AudioHandle() {}
 1733              		.loc 12 62 5 view .LVU474
 1734              	.LBE677:
 1735              	.LBE676:
 1736              	.LBE675:
 1737              	.LBB696:
 1738              	.LBB697:
 1739              	.LBB698:
 1740              	.LBB699:
 1741              	.LBB700:
 1742              	.LBB701:
 1743              	.LBB702:
  36:../../libdaisy/src/hid/midi.h ****             tx     = {DSY_GPIOB, 6};
 1744              		.loc 2 36 20 is_stmt 0 view .LVU475
 1745 0000 1949     		ldr	r1, .L103
 1746              	.LBE702:
 1747              	.LBE701:
 1748              	.LBE700:
 1749              	.LBE699:
 1750              	.LBE698:
 1751              	.LBE697:
 1752              	.LBE696:
 1753              	.LBB739:
 1754              	.LBB693:
 1755              	.LBB684:
 1756              	.LBB678:
 1757              	.LBB679:
  62:../../libdaisy/src/hid/audio.h ****     ~AudioHandle() {}
 1758              		.loc 12 62 35 view .LVU476
 1759 0002 1A48     		ldr	r0, .L103+4
 1760              	.LBE679:
 1761              	.LBE678:
 1762              	.LBE684:
 1763              	.LBE693:
 1764              	.LBE739:
 1765              	.LBE674:
 1766              	.LBE673:
   9:Midi.cpp      **** Oscillator osc;
 1767              		.loc 15 9 12 view .LVU477
 1768 0004 1A4A     		ldr	r2, .L103+8
 1769              	.LBE672:
 1770              	.LBE671:
 1771              		.loc 15 100 1 view .LVU478
 1772 0006 F8B5     		push	{r3, r4, r5, r6, r7, lr}
ARM GAS  /tmp/ccgxtOMv.s 			page 62


 1773              		.cfi_def_cfa_offset 24
 1774              		.cfi_offset 3, -24
 1775              		.cfi_offset 4, -20
 1776              		.cfi_offset 5, -16
 1777              		.cfi_offset 6, -12
 1778              		.cfi_offset 7, -8
 1779              		.cfi_offset 14, -4
 1780              	.LBB768:
 1781              	.LBB766:
 1782              	.LBB763:
 1783              	.LBB762:
 1784              	.LBB740:
 1785              	.LBB736:
 1786              	.LBB733:
 1787              	.LBB715:
 1788              	.LBB711:
 1789              	.LBB707:
 1790              	.LBB703:
  36:../../libdaisy/src/hid/midi.h ****             tx     = {DSY_GPIOB, 6};
 1791              		.loc 2 36 20 view .LVU479
 1792 0008 0E88     		ldrh	r6, [r1]
 1793 000a 49F22025 		movw	r5, #37408
  37:../../libdaisy/src/hid/midi.h ****         }
 1794              		.loc 2 37 20 view .LVU480
 1795 000e 8988     		ldrh	r1, [r1, #4]
 1796 0010 49F22224 		movw	r4, #37410
 1797              	.LBE703:
 1798              	.LBE707:
 1799              	.LBE711:
 1800              	.LBE715:
 1801              	.LBE733:
 1802              	.LBE736:
 1803              	.LBE740:
 1804              	.LBB741:
 1805              	.LBB694:
 1806              	.LBB685:
 1807              	.LBB682:
 1808              	.LBB680:
  62:../../libdaisy/src/hid/audio.h ****     ~AudioHandle() {}
 1809              		.loc 12 62 35 view .LVU481
 1810 0014 0023     		movs	r3, #0
 1811              	.LBE680:
 1812              	.LBE682:
 1813              	.LBE685:
 1814              	.LBE694:
 1815              	.LBE741:
 1816              	.LBB742:
 1817              	.LBB737:
 1818              	.LBB734:
 1819              	.LBB716:
 1820              	.LBB712:
 1821              	.LBB708:
 1822              	.LBB704:
  36:../../libdaisy/src/hid/midi.h ****             tx     = {DSY_GPIOB, 6};
 1823              		.loc 2 36 20 view .LVU482
 1824 0016 4653     		strh	r6, [r0, r5]	@ movhi
  37:../../libdaisy/src/hid/midi.h ****         }
ARM GAS  /tmp/ccgxtOMv.s 			page 63


 1825              		.loc 2 37 20 view .LVU483
 1826 0018 0153     		strh	r1, [r0, r4]	@ movhi
  35:../../libdaisy/src/hid/midi.h ****             rx     = {DSY_GPIOB, 7};
 1827              		.loc 2 35 20 view .LVU484
 1828 001a 49F21C27 		movw	r7, #37404
 1829              	.LBE704:
 1830              	.LBE708:
 1831              	.LBE712:
 1832              	.LBE716:
 1833              	.LBB717:
 1834              	.LBB718:
 1835              	.LBB719:
 1836              	.LBB720:
 1837              		.file 19 "../../libdaisy/src/per/uart.h"
   1:../../libdaisy/src/per/uart.h **** /* 
   2:../../libdaisy/src/per/uart.h **** TODO
   3:../../libdaisy/src/per/uart.h **** - UART1 defaults to DMA, add flexible config for DMA on all periphs
   4:../../libdaisy/src/per/uart.h **** - Transmit function improvements.
   5:../../libdaisy/src/per/uart.h **** - Overflow handling, etc. for Rx Queue.
   6:../../libdaisy/src/per/uart.h **** */
   7:../../libdaisy/src/per/uart.h **** 
   8:../../libdaisy/src/per/uart.h **** #pragma once
   9:../../libdaisy/src/per/uart.h **** #ifndef DSY_UART_H
  10:../../libdaisy/src/per/uart.h **** #define DSY_UART_H /**< macro */
  11:../../libdaisy/src/per/uart.h **** #include "daisy_core.h"
  12:../../libdaisy/src/per/uart.h **** 
  13:../../libdaisy/src/per/uart.h **** 
  14:../../libdaisy/src/per/uart.h **** namespace daisy
  15:../../libdaisy/src/per/uart.h **** {
  16:../../libdaisy/src/per/uart.h **** /** @addtogroup serial
  17:../../libdaisy/src/per/uart.h ****     @{
  18:../../libdaisy/src/per/uart.h ****     */
  19:../../libdaisy/src/per/uart.h **** 
  20:../../libdaisy/src/per/uart.h **** /** 
  21:../../libdaisy/src/per/uart.h ****     Uart Peripheral
  22:../../libdaisy/src/per/uart.h ****     @author shensley
  23:../../libdaisy/src/per/uart.h ****     @date March 2020
  24:../../libdaisy/src/per/uart.h ****     */
  25:../../libdaisy/src/per/uart.h **** class UartHandler
  26:../../libdaisy/src/per/uart.h **** {
  27:../../libdaisy/src/per/uart.h ****   public:
  28:../../libdaisy/src/per/uart.h ****     struct Config
  29:../../libdaisy/src/per/uart.h ****     {
  30:../../libdaisy/src/per/uart.h ****         enum class Peripheral
  31:../../libdaisy/src/per/uart.h ****         {
  32:../../libdaisy/src/per/uart.h ****             USART_1,
  33:../../libdaisy/src/per/uart.h ****             USART_2,
  34:../../libdaisy/src/per/uart.h ****             USART_3,
  35:../../libdaisy/src/per/uart.h ****             UART_4,
  36:../../libdaisy/src/per/uart.h ****             UART_5,
  37:../../libdaisy/src/per/uart.h ****             USART_6,
  38:../../libdaisy/src/per/uart.h ****             UART_7,
  39:../../libdaisy/src/per/uart.h ****             UART_8,
  40:../../libdaisy/src/per/uart.h ****             LPUART_1,
  41:../../libdaisy/src/per/uart.h ****         };
  42:../../libdaisy/src/per/uart.h **** 
  43:../../libdaisy/src/per/uart.h ****         enum class StopBits
ARM GAS  /tmp/ccgxtOMv.s 			page 64


  44:../../libdaisy/src/per/uart.h ****         {
  45:../../libdaisy/src/per/uart.h ****             BITS_0_5,
  46:../../libdaisy/src/per/uart.h ****             BITS_1,
  47:../../libdaisy/src/per/uart.h ****             BITS_1_5,
  48:../../libdaisy/src/per/uart.h ****             BITS_2,
  49:../../libdaisy/src/per/uart.h ****         };
  50:../../libdaisy/src/per/uart.h **** 
  51:../../libdaisy/src/per/uart.h ****         enum class Parity
  52:../../libdaisy/src/per/uart.h ****         {
  53:../../libdaisy/src/per/uart.h ****             NONE,
  54:../../libdaisy/src/per/uart.h ****             EVEN,
  55:../../libdaisy/src/per/uart.h ****             ODD,
  56:../../libdaisy/src/per/uart.h ****         };
  57:../../libdaisy/src/per/uart.h **** 
  58:../../libdaisy/src/per/uart.h ****         enum class Mode
  59:../../libdaisy/src/per/uart.h ****         {
  60:../../libdaisy/src/per/uart.h ****             RX,
  61:../../libdaisy/src/per/uart.h ****             TX,
  62:../../libdaisy/src/per/uart.h ****             TX_RX,
  63:../../libdaisy/src/per/uart.h ****         };
  64:../../libdaisy/src/per/uart.h **** 
  65:../../libdaisy/src/per/uart.h ****         enum class WordLength
  66:../../libdaisy/src/per/uart.h ****         {
  67:../../libdaisy/src/per/uart.h ****             BITS_7,
  68:../../libdaisy/src/per/uart.h ****             BITS_8,
  69:../../libdaisy/src/per/uart.h ****             BITS_9,
  70:../../libdaisy/src/per/uart.h ****         };
  71:../../libdaisy/src/per/uart.h **** 
  72:../../libdaisy/src/per/uart.h ****         struct
  73:../../libdaisy/src/per/uart.h ****         {
  74:../../libdaisy/src/per/uart.h ****             dsy_gpio_pin tx; /**< & */
  75:../../libdaisy/src/per/uart.h ****             dsy_gpio_pin rx; /**< & */
  76:../../libdaisy/src/per/uart.h ****         } pin_config;        /**< & */
  77:../../libdaisy/src/per/uart.h **** 
  78:../../libdaisy/src/per/uart.h ****         Peripheral periph;
  79:../../libdaisy/src/per/uart.h ****         StopBits   stopbits;
  80:../../libdaisy/src/per/uart.h ****         Parity     parity;
  81:../../libdaisy/src/per/uart.h ****         Mode       mode;
  82:../../libdaisy/src/per/uart.h ****         WordLength wordlength;
  83:../../libdaisy/src/per/uart.h ****         uint32_t   baudrate;
  84:../../libdaisy/src/per/uart.h ****     };
  85:../../libdaisy/src/per/uart.h **** 
  86:../../libdaisy/src/per/uart.h **** 
  87:../../libdaisy/src/per/uart.h ****     UartHandler() : pimpl_(nullptr) {}
 1838              		.loc 19 87 35 view .LVU485
 1839 001e 49F22425 		movw	r5, #37412
 1840              	.LBE720:
 1841              	.LBE719:
 1842              	.LBE718:
 1843              	.LBE717:
  82:../../libdaisy/src/hid/midi.h ****     ~MidiHandler() {}
 1844              		.loc 2 82 19 view .LVU486
 1845 0022 49F22C21 		movw	r1, #37420
 1846 0026 4FF60F06 		movw	r6, #63503
 1847              	.LBB725:
 1848              	.LBB713:
 1849              	.LBB709:
ARM GAS  /tmp/ccgxtOMv.s 			page 65


 1850              	.LBB705:
  35:../../libdaisy/src/hid/midi.h ****             rx     = {DSY_GPIOB, 7};
 1851              		.loc 2 35 20 view .LVU487
 1852 002a C351     		str	r3, [r0, r7]
 1853              	.LBE705:
 1854              	.LBE709:
 1855              	.LBE713:
 1856              	.LBE725:
 1857              	.LBB726:
 1858              	.LBB723:
 1859              	.LBB722:
 1860              	.LBB721:
 1861              		.loc 19 87 35 view .LVU488
 1862 002c 4351     		str	r3, [r0, r5]
 1863              	.LBE721:
 1864              	.LBE722:
 1865              	.LBE723:
 1866              	.LBE726:
  82:../../libdaisy/src/hid/midi.h ****     ~MidiHandler() {}
 1867              		.loc 2 82 19 view .LVU489
 1868 002e 49F22824 		movw	r4, #37416
 1869 0032 4652     		strh	r6, [r0, r1]	@ movhi
 1870 0034 0721     		movs	r1, #7
 1871 0036 0F4D     		ldr	r5, .L103+12
 1872              	.LBE734:
 1873              	.LBE737:
 1874              	.LBE742:
 1875              	.LBB743:
 1876              	.LBB695:
 1877              	.LBB686:
 1878              	.LBB683:
 1879              	.LBB681:
  62:../../libdaisy/src/hid/audio.h ****     ~AudioHandle() {}
 1880              		.loc 12 62 35 view .LVU490
 1881 0038 4361     		str	r3, [r0, #20]
 1882              	.LVL124:
  62:../../libdaisy/src/hid/audio.h ****     ~AudioHandle() {}
 1883              		.loc 12 62 35 view .LVU491
 1884              	.LBE681:
 1885              	.LBE683:
 1886              	.LBE686:
 1887              	.LBB687:
 1888              	.LBI687:
  84:../../libdaisy/src/per/adc.h ****     ~AdcHandle() {}
 1889              		.loc 11 84 5 is_stmt 1 view .LVU492
  84:../../libdaisy/src/per/adc.h ****     ~AdcHandle() {}
 1890              		.loc 11 84 5 is_stmt 0 view .LVU493
 1891              	.LBE687:
 1892              	.LBB688:
 1893              	.LBI688:
 1894              		.file 20 "../../libdaisy/src/per/dac.h"
   1:../../libdaisy/src/per/dac.h **** #pragma once
   2:../../libdaisy/src/per/dac.h **** #ifndef DSY_DAC_H
   3:../../libdaisy/src/per/dac.h **** #define DSY_DAC_H
   4:../../libdaisy/src/per/dac.h **** 
   5:../../libdaisy/src/per/dac.h **** #include "daisy_core.h"
   6:../../libdaisy/src/per/dac.h **** 
ARM GAS  /tmp/ccgxtOMv.s 			page 66


   7:../../libdaisy/src/per/dac.h **** namespace daisy
   8:../../libdaisy/src/per/dac.h **** {
   9:../../libdaisy/src/per/dac.h **** /** DAC handle for Built-in DAC Peripheral 
  10:../../libdaisy/src/per/dac.h ****  ** 
  11:../../libdaisy/src/per/dac.h ****  ** For now only Normal Mode is supported,
  12:../../libdaisy/src/per/dac.h ****  ** Sample and hold mode provides reduced power consumption, but requires a bit more setup.
  13:../../libdaisy/src/per/dac.h ****  **
  14:../../libdaisy/src/per/dac.h ****  ** For now connecting the DAC through other internal periphearls is also not supported.
  15:../../libdaisy/src/per/dac.h ****  **
  16:../../libdaisy/src/per/dac.h ****  ** Since the DAC channels have dedicated pins we don't need to pass in a pin config like with
  17:../../libdaisy/src/per/dac.h ****  ** other modules. However, it is still important to not try to use the DAC pins for anything else.
  18:../../libdaisy/src/per/dac.h ****  ** DAC Channel 1 is on PA4, and DAC Channel 2 is on PA5
  19:../../libdaisy/src/per/dac.h ****  ***/
  20:../../libdaisy/src/per/dac.h **** class DacHandle
  21:../../libdaisy/src/per/dac.h **** {
  22:../../libdaisy/src/per/dac.h ****   public:
  23:../../libdaisy/src/per/dac.h ****     /** Return Values for the DacHandle class */
  24:../../libdaisy/src/per/dac.h ****     enum class Result
  25:../../libdaisy/src/per/dac.h ****     {
  26:../../libdaisy/src/per/dac.h ****         OK,
  27:../../libdaisy/src/per/dac.h ****         ERR,
  28:../../libdaisy/src/per/dac.h ****     };
  29:../../libdaisy/src/per/dac.h **** 
  30:../../libdaisy/src/per/dac.h ****     /** Selects which channel(s) will be configured for use. */
  31:../../libdaisy/src/per/dac.h ****     enum class Channel
  32:../../libdaisy/src/per/dac.h ****     {
  33:../../libdaisy/src/per/dac.h ****         ONE,
  34:../../libdaisy/src/per/dac.h ****         TWO,
  35:../../libdaisy/src/per/dac.h ****         BOTH,
  36:../../libdaisy/src/per/dac.h ****     };
  37:../../libdaisy/src/per/dac.h **** 
  38:../../libdaisy/src/per/dac.h ****     /** Sets the Mode for the DAC channels.
  39:../../libdaisy/src/per/dac.h ****      **
  40:../../libdaisy/src/per/dac.h ****      ** Polling mode uses the blocking mode to transmit a single value at a time.
  41:../../libdaisy/src/per/dac.h ****      **
  42:../../libdaisy/src/per/dac.h ****      ** DMA mode uses a buffer, and periodically transmits it triggering a 
  43:../../libdaisy/src/per/dac.h ****      ** callback to fill the buffer when it is ready for more samples.
  44:../../libdaisy/src/per/dac.h ****      ***/
  45:../../libdaisy/src/per/dac.h ****     enum class Mode
  46:../../libdaisy/src/per/dac.h ****     {
  47:../../libdaisy/src/per/dac.h ****         POLLING,
  48:../../libdaisy/src/per/dac.h ****         DMA,
  49:../../libdaisy/src/per/dac.h ****     };
  50:../../libdaisy/src/per/dac.h **** 
  51:../../libdaisy/src/per/dac.h ****     /** Sets the number of bits per sample transmitted out of the DAC.
  52:../../libdaisy/src/per/dac.h ****      ** The output range will be: 0V - VDDA
  53:../../libdaisy/src/per/dac.h ****      ** The resolution will be roughly: bitdepth / (VDDA - 0V) 
  54:../../libdaisy/src/per/dac.h ****      ***/
  55:../../libdaisy/src/per/dac.h ****     enum class BitDepth
  56:../../libdaisy/src/per/dac.h ****     {
  57:../../libdaisy/src/per/dac.h ****         BITS_8,
  58:../../libdaisy/src/per/dac.h ****         BITS_12
  59:../../libdaisy/src/per/dac.h ****     };
  60:../../libdaisy/src/per/dac.h **** 
  61:../../libdaisy/src/per/dac.h ****     /** Sets whether the DAC output is buffered for higher drive ability. */
  62:../../libdaisy/src/per/dac.h ****     enum class BufferState
  63:../../libdaisy/src/per/dac.h ****     {
ARM GAS  /tmp/ccgxtOMv.s 			page 67


  64:../../libdaisy/src/per/dac.h ****         ENABLED,
  65:../../libdaisy/src/per/dac.h ****         DISABLED,
  66:../../libdaisy/src/per/dac.h ****     };
  67:../../libdaisy/src/per/dac.h **** 
  68:../../libdaisy/src/per/dac.h ****     /** Configuration structure for initializing the DAC structure. */
  69:../../libdaisy/src/per/dac.h ****     struct Config
  70:../../libdaisy/src/per/dac.h ****     {
  71:../../libdaisy/src/per/dac.h ****         /** Target Samplerate in Hz used to configure the internal 
  72:../../libdaisy/src/per/dac.h ****          ** timebase for DMA mode. Does nothing in POLLING mode.
  73:../../libdaisy/src/per/dac.h ****          ** If the value is 0 at Init time this will default to 48000Hz 
  74:../../libdaisy/src/per/dac.h ****          ** otherwise the driver will attempt meet the target.*/
  75:../../libdaisy/src/per/dac.h ****         uint32_t target_samplerate;
  76:../../libdaisy/src/per/dac.h **** 
  77:../../libdaisy/src/per/dac.h ****         Channel     chn;
  78:../../libdaisy/src/per/dac.h ****         Mode        mode;
  79:../../libdaisy/src/per/dac.h ****         BitDepth    bitdepth;
  80:../../libdaisy/src/per/dac.h ****         BufferState buff_state;
  81:../../libdaisy/src/per/dac.h ****     };
  82:../../libdaisy/src/per/dac.h **** 
  83:../../libdaisy/src/per/dac.h ****     DacHandle() : pimpl_(nullptr) {}
 1895              		.loc 20 83 5 is_stmt 1 view .LVU494
 1896              	.LBB689:
 1897              	.LBB690:
 1898              		.loc 20 83 33 is_stmt 0 view .LVU495
 1899 003a 0362     		str	r3, [r0, #32]
 1900              	.LVL125:
 1901              		.loc 20 83 33 view .LVU496
 1902              	.LBE690:
 1903              	.LBE689:
 1904              	.LBE688:
 1905              	.LBB691:
 1906              	.LBI691:
  40:../../libdaisy/src/hid/usb.h **** 
 1907              		.loc 10 40 5 is_stmt 1 view .LVU497
  40:../../libdaisy/src/hid/usb.h **** 
 1908              		.loc 10 40 5 is_stmt 0 view .LVU498
 1909              	.LBE691:
 1910              	.LBB692:
 1911              	.LBI692:
  58:../../libdaisy/src/sys/system.h ****     ~System() {}
 1912              		.loc 9 58 5 is_stmt 1 view .LVU499
  58:../../libdaisy/src/sys/system.h ****     ~System() {}
 1913              		.loc 9 58 5 is_stmt 0 view .LVU500
 1914              	.LBE692:
 1915              	.LBE695:
 1916              	.LBE743:
 1917              	.LBB744:
 1918              	.LBI744:
  20:../../libdaisy/src/hid/encoder.h ****     ~Encoder() {}
 1919              		.loc 7 20 5 is_stmt 1 view .LVU501
 1920              	.LBB745:
 1921              	.LBB746:
 1922              	.LBI746:
  40:../../libdaisy/src/hid/switch.h ****     ~Switch() {}
 1923              		.loc 5 40 5 view .LVU502
  40:../../libdaisy/src/hid/switch.h ****     ~Switch() {}
 1924              		.loc 5 40 5 is_stmt 0 view .LVU503
ARM GAS  /tmp/ccgxtOMv.s 			page 68


 1925              	.LBE746:
 1926              	.LBE745:
 1927              	.LBE744:
 1928              	.LBB747:
 1929              	.LBI747:
  21:../../libdaisy/src/hid/ctrl.h ****     /** destructor */
 1930              		.loc 6 21 5 is_stmt 1 view .LVU504
  21:../../libdaisy/src/hid/ctrl.h ****     /** destructor */
 1931              		.loc 6 21 5 is_stmt 0 view .LVU505
 1932              	.LBE747:
 1933              	.LBB748:
 1934              	.LBI748:
  21:../../libdaisy/src/hid/ctrl.h ****     /** destructor */
 1935              		.loc 6 21 5 is_stmt 1 view .LVU506
  21:../../libdaisy/src/hid/ctrl.h ****     /** destructor */
 1936              		.loc 6 21 5 is_stmt 0 view .LVU507
 1937              	.LBE748:
 1938              	.LBB749:
 1939              	.LBI749:
  40:../../libdaisy/src/hid/switch.h ****     ~Switch() {}
 1940              		.loc 5 40 5 is_stmt 1 view .LVU508
  40:../../libdaisy/src/hid/switch.h ****     ~Switch() {}
 1941              		.loc 5 40 5 is_stmt 0 view .LVU509
 1942              	.LBE749:
 1943              	.LBB750:
 1944              	.LBI750:
  40:../../libdaisy/src/hid/switch.h ****     ~Switch() {}
 1945              		.loc 5 40 5 is_stmt 1 view .LVU510
  40:../../libdaisy/src/hid/switch.h ****     ~Switch() {}
 1946              		.loc 5 40 5 is_stmt 0 view .LVU511
 1947              	.LBE750:
 1948              	.LBB751:
 1949              	.LBI751:
  17:../../libdaisy/src/hid/rgb_led.h ****     ~RgbLed() {}
 1950              		.loc 3 17 5 is_stmt 1 view .LVU512
 1951              	.LBB752:
 1952              	.LBB753:
 1953              	.LBI753:
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1954              		.loc 4 24 5 view .LVU513
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1955              		.loc 4 24 5 is_stmt 0 view .LVU514
 1956              	.LBE753:
 1957              	.LBB754:
 1958              	.LBI754:
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1959              		.loc 4 24 5 is_stmt 1 view .LVU515
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1960              		.loc 4 24 5 is_stmt 0 view .LVU516
 1961              	.LBE754:
 1962              	.LBB755:
 1963              	.LBI755:
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1964              		.loc 4 24 5 is_stmt 1 view .LVU517
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1965              		.loc 4 24 5 is_stmt 0 view .LVU518
 1966              	.LBE755:
ARM GAS  /tmp/ccgxtOMv.s 			page 69


 1967              	.LBE752:
 1968              	.LBE751:
 1969              	.LBB756:
 1970              	.LBI756:
  17:../../libdaisy/src/hid/rgb_led.h ****     ~RgbLed() {}
 1971              		.loc 3 17 5 is_stmt 1 view .LVU519
 1972              	.LBB757:
 1973              	.LBB758:
 1974              	.LBI758:
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1975              		.loc 4 24 5 view .LVU520
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1976              		.loc 4 24 5 is_stmt 0 view .LVU521
 1977              	.LBE758:
 1978              	.LBB759:
 1979              	.LBI759:
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1980              		.loc 4 24 5 is_stmt 1 view .LVU522
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1981              		.loc 4 24 5 is_stmt 0 view .LVU523
 1982              	.LBE759:
 1983              	.LBB760:
 1984              	.LBI760:
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1985              		.loc 4 24 5 is_stmt 1 view .LVU524
  24:../../libdaisy/src/hid/led.h ****     ~Led() {}
 1986              		.loc 4 24 5 is_stmt 0 view .LVU525
 1987              	.LBE760:
 1988              	.LBE757:
 1989              	.LBE756:
 1990              	.LBB761:
 1991              	.LBI696:
  82:../../libdaisy/src/hid/midi.h ****     ~MidiHandler() {}
 1992              		.loc 2 82 5 is_stmt 1 view .LVU526
 1993              	.LBB738:
 1994              	.LBB735:
 1995              	.LBB727:
 1996              	.LBI727:
 1997              		.loc 19 87 5 view .LVU527
 1998              	.LBB728:
 1999              	.LBB729:
 2000              		.loc 19 87 35 is_stmt 0 view .LVU528
 2001 003c C0F87431 		str	r3, [r0, #372]
 2002              	.LVL126:
 2003              		.loc 19 87 35 view .LVU529
 2004              	.LBE729:
 2005              	.LBE728:
 2006              	.LBE727:
 2007              	.LBB730:
 2008              	.LBI730:
  21:../../libdaisy/src/util/ringbuffer.h **** 
 2009              		.loc 18 21 5 is_stmt 1 view .LVU530
  21:../../libdaisy/src/util/ringbuffer.h **** 
 2010              		.loc 18 21 5 is_stmt 0 view .LVU531
 2011              	.LBE730:
 2012              	.LBB731:
 2013              	.LBI699:
ARM GAS  /tmp/ccgxtOMv.s 			page 70


  85:../../libdaisy/src/hid/midi.h ****     {
 2014              		.loc 2 85 12 is_stmt 1 view .LVU532
 2015              	.LBB714:
 2016              	.LBI700:
  33:../../libdaisy/src/hid/midi.h ****         {
 2017              		.loc 2 33 9 view .LVU533
 2018              	.LBB710:
 2019              	.LBB706:
  35:../../libdaisy/src/hid/midi.h ****             rx     = {DSY_GPIOB, 7};
 2020              		.loc 2 35 13 view .LVU534
  36:../../libdaisy/src/hid/midi.h ****             tx     = {DSY_GPIOB, 6};
 2021              		.loc 2 36 13 view .LVU535
  37:../../libdaisy/src/hid/midi.h ****         }
 2022              		.loc 2 37 13 view .LVU536
  37:../../libdaisy/src/hid/midi.h ****         }
 2023              		.loc 2 37 13 is_stmt 0 view .LVU537
 2024              	.LBE706:
 2025              	.LBE710:
 2026              	.LBE714:
 2027              	.LBE731:
 2028              	.LBB732:
 2029              	.LBI717:
  24:../../libdaisy/src/hid/midi.h ****     ~MidiUartTransport() {}
 2030              		.loc 2 24 5 is_stmt 1 view .LVU538
 2031              	.LBB724:
 2032              	.LBI718:
 2033              		.loc 19 87 5 view .LVU539
 2034              		.loc 19 87 5 is_stmt 0 view .LVU540
 2035              	.LBE724:
 2036              	.LBE732:
  82:../../libdaisy/src/hid/midi.h ****     ~MidiHandler() {}
 2037              		.loc 2 82 19 view .LVU541
 2038 0040 49F22E23 		movw	r3, #37422
 2039 0044 0551     		str	r5, [r0, r4]
 2040 0046 C154     		strb	r1, [r0, r3]
 2041              	.LVL127:
  82:../../libdaisy/src/hid/midi.h ****     ~MidiHandler() {}
 2042              		.loc 2 82 19 view .LVU542
 2043              	.LBE735:
 2044              	.LBE738:
 2045              	.LBE761:
 2046              	.LBE762:
 2047              	.LBE763:
   9:Midi.cpp      **** Oscillator osc;
 2048              		.loc 15 9 12 view .LVU543
 2049 0048 0B49     		ldr	r1, .L103+16
 2050 004a FFF7FEFF 		bl	__aeabi_atexit
 2051              	.LVL128:
 2052              	.LBB764:
 2053              	.LBI764:
  15:../../DaisySP/Source/Synthesis/oscillator.h ****     ~Oscillator() {}
 2054              		.loc 13 15 5 is_stmt 1 view .LVU544
  15:../../DaisySP/Source/Synthesis/oscillator.h ****     ~Oscillator() {}
 2055              		.loc 13 15 5 is_stmt 0 view .LVU545
 2056              	.LBE764:
  10:Midi.cpp      **** Svf        filt;
 2057              		.loc 15 10 12 view .LVU546
ARM GAS  /tmp/ccgxtOMv.s 			page 71


 2058 004e 084A     		ldr	r2, .L103+8
 2059 0050 0A49     		ldr	r1, .L103+20
 2060 0052 0B48     		ldr	r0, .L103+24
 2061 0054 FFF7FEFF 		bl	__aeabi_atexit
 2062              	.LVL129:
 2063              	.LBB765:
 2064              	.LBI765:
  21:../../DaisySP/Source/Filters/svf.h ****     ~Svf() {}
 2065              		.loc 14 21 5 is_stmt 1 view .LVU547
  21:../../DaisySP/Source/Filters/svf.h ****     ~Svf() {}
 2066              		.loc 14 21 5 is_stmt 0 view .LVU548
 2067              	.LBE765:
  11:Midi.cpp      **** 
 2068              		.loc 15 11 12 view .LVU549
 2069 0058 054A     		ldr	r2, .L103+8
 2070 005a 0A49     		ldr	r1, .L103+28
 2071 005c 0A48     		ldr	r0, .L103+32
 2072              	.LBE766:
 2073              	.LBE768:
 2074              		.loc 15 100 1 view .LVU550
 2075 005e BDE8F840 		pop	{r3, r4, r5, r6, r7, lr}
 2076              		.cfi_restore 14
 2077              		.cfi_restore 7
 2078              		.cfi_restore 6
 2079              		.cfi_restore 5
 2080              		.cfi_restore 4
 2081              		.cfi_restore 3
 2082              		.cfi_def_cfa_offset 0
 2083              	.LBB769:
 2084              	.LBB767:
  11:Midi.cpp      **** 
 2085              		.loc 15 11 12 view .LVU551
 2086 0062 FFF7FEBF 		b	__aeabi_atexit
 2087              	.LVL130:
 2088              	.L104:
 2089 0066 00BF     		.align	2
 2090              	.L103:
 2091 0068 00000000 		.word	.LANCHOR2
 2092 006c 00000000 		.word	hw
 2093 0070 00000000 		.word	__dso_handle
 2094 0074 80707FF0 		.word	-260083584
 2095 0078 00000000 		.word	_ZN5daisy8DaisyPodD1Ev
 2096 007c 00000000 		.word	_ZN7daisysp10OscillatorD1Ev
 2097 0080 00000000 		.word	.LANCHOR0
 2098 0084 00000000 		.word	_ZN7daisysp3SvfD1Ev
 2099 0088 00000000 		.word	.LANCHOR1
 2100              	.LBE767:
 2101              	.LBE769:
 2102              		.cfi_endproc
 2103              	.LFE4790:
 2105              		.section	.init_array,"aw",%init_array
 2106              		.align	2
 2107 0000 00000000 		.word	_GLOBAL__sub_I_hw(target1)
 2108              		.global	filt
 2109              		.global	osc
 2110              		.global	hw
 2111              		.section	.rodata
ARM GAS  /tmp/ccgxtOMv.s 			page 72


 2112              		.align	2
 2113              		.set	.LANCHOR2,. + 0
 2114              	.LC0:
 2115 0000 01       		.byte	1
 2116 0001 07       		.byte	7
 2117 0002 0000     		.space	2
 2118              	.LC1:
 2119 0004 01       		.byte	1
 2120 0005 06       		.byte	6
 2121              		.section	.bss.filt,"aw",%nobits
 2122              		.align	2
 2123              		.set	.LANCHOR1,. + 0
 2126              	filt:
 2127 0000 00000000 		.space	76
 2127      00000000 
 2127      00000000 
 2127      00000000 
 2127      00000000 
 2128              		.section	.bss.hw,"aw",%nobits
 2129              		.align	2
 2132              	hw:
 2133 0000 00000000 		.space	37424
 2133      00000000 
 2133      00000000 
 2133      00000000 
 2133      00000000 
 2134              		.section	.bss.osc,"aw",%nobits
 2135              		.align	2
 2136              		.set	.LANCHOR0,. + 0
 2139              	osc:
 2140 0000 00000000 		.space	40
 2140      00000000 
 2140      00000000 
 2140      00000000 
 2140      00000000 
 2141              		.text
 2142              	.Letext0:
 2143              		.file 21 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 2144              		.file 22 "../../libdaisy/Drivers/CMSIS/Include/core_cm7.h"
 2145              		.file 23 "../../libdaisy/Drivers/CMSIS/Device/ST/STM32H7xx/Include/system_stm32h7xx.h"
 2146              		.file 24 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 2147              		.file 25 "/usr/include/newlib/c++/9.2.1/cmath"
 2148              		.file 26 "/usr/include/newlib/c++/9.2.1/bits/std_abs.h"
 2149              		.file 27 "/usr/include/newlib/c++/9.2.1/cstdlib"
 2150              		.file 28 "/usr/include/newlib/c++/9.2.1/cstdint"
 2151              		.file 29 "/usr/include/newlib/c++/9.2.1/type_traits"
 2152              		.file 30 "/usr/include/newlib/c++/9.2.1/arm-none-eabi/thumb/v7e-m+dp/hard/bits/c++config.h"
 2153              		.file 31 "/usr/include/newlib/c++/9.2.1/bits/stl_pair.h"
 2154              		.file 32 "/usr/include/newlib/c++/9.2.1/debug/debug.h"
 2155              		.file 33 "/usr/include/newlib/c++/9.2.1/bits/algorithmfwd.h"
 2156              		.file 34 "/usr/include/newlib/c++/9.2.1/bits/exception_ptr.h"
 2157              		.file 35 "/usr/include/newlib/c++/9.2.1/new"
 2158              		.file 36 "/usr/include/newlib/c++/9.2.1/cstdarg"
 2159              		.file 37 "/usr/include/newlib/c++/9.2.1/cstdio"
 2160              		.file 38 "/usr/include/newlib/c++/9.2.1/cwchar"
 2161              		.file 39 "/usr/include/newlib/c++/9.2.1/clocale"
 2162              		.file 40 "/usr/include/newlib/c++/9.2.1/bits/basic_string.h"
ARM GAS  /tmp/ccgxtOMv.s 			page 73


 2163              		.file 41 "/usr/include/newlib/c++/9.2.1/bits/uniform_int_dist.h"
 2164              		.file 42 "/usr/include/newlib/c++/9.2.1/bits/random.h"
 2165              		.file 43 "/usr/include/newlib/c++/9.2.1/cstring"
 2166              		.file 44 "/usr/include/newlib/c++/9.2.1/bits/predefined_ops.h"
 2167              		.file 45 "/usr/include/newlib/c++/9.2.1/ext/numeric_traits.h"
 2168              		.file 46 "/usr/include/newlib/c++/9.2.1/ext/new_allocator.h"
 2169              		.file 47 "/usr/include/newlib/sys/_types.h"
 2170              		.file 48 "<built-in>"
 2171              		.file 49 "/usr/include/newlib/sys/reent.h"
 2172              		.file 50 "/usr/include/newlib/sys/lock.h"
 2173              		.file 51 "/usr/include/newlib/math.h"
 2174              		.file 52 "/usr/include/newlib/stdlib.h"
 2175              		.file 53 "/usr/include/newlib/c++/9.2.1/math.h"
 2176              		.file 54 "../../libdaisy/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_def.h"
 2177              		.file 55 "../../libdaisy/Drivers/STM32H7xx_HAL_Driver/Inc/stm32h7xx_hal_flash.h"
 2178              		.file 56 "/usr/include/newlib/c++/9.2.1/stdlib.h"
 2179              		.file 57 "../../libdaisy/src/daisy_core.h"
 2180              		.file 58 "../../libdaisy/src/per/tim.h"
 2181              		.file 59 "../../libdaisy/src/per/sai.h"
 2182              		.file 60 "../../libdaisy/src/util/wav_format.h"
 2183              		.file 61 "../../libdaisy/src/util/color.h"
 2184              		.file 62 "../../libdaisy/src/per/qspi.h"
 2185              		.file 63 "../../libdaisy/src/per/gpio.h"
 2186              		.file 64 "../../libdaisy/src/dev/sdram.h"
 2187              		.file 65 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdarg.h"
 2188              		.file 66 "/usr/include/newlib/stdio.h"
 2189              		.file 67 "/usr/include/newlib/sys/unistd.h"
 2190              		.file 68 "../../libdaisy/src/util/oled_fonts.h"
 2191              		.file 69 "../../libdaisy/Middlewares/Third_Party/FatFs/src/integer.h"
 2192              		.file 70 "../../libdaisy/Middlewares/Third_Party/FatFs/src/ff.h"
 2193              		.file 71 "../../libdaisy/Middlewares/Third_Party/FatFs/src/diskio.h"
 2194              		.file 72 "../../libdaisy/Middlewares/Third_Party/FatFs/src/ff_gen_drv.h"
 2195              		.file 73 "../../libdaisy/src/util/sd_diskio.h"
 2196              		.file 74 "../../libdaisy/src/sys/fatfs.h"
 2197              		.file 75 "../../DaisySP/Source/Control/adenv.h"
 2198              		.file 76 "/usr/include/newlib/wchar.h"
 2199              		.file 77 "/usr/include/newlib/locale.h"
 2200              		.file 78 "/usr/include/newlib/ctype.h"
 2201              		.file 79 "/usr/include/newlib/sys/errno.h"
 2202              		.file 80 "/usr/include/newlib/string.h"
 2203              		.file 81 "../../libdaisy/src/dev/sr_595.h"
ARM GAS  /tmp/ccgxtOMv.s 			page 74


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Midi.cpp
     /tmp/ccgxtOMv.s:17     .text._ZN5daisy8DaisyPodD2Ev:0000000000000000 $t
     /tmp/ccgxtOMv.s:26     .text._ZN5daisy8DaisyPodD2Ev:0000000000000000 _ZN5daisy8DaisyPodD2Ev
     /tmp/ccgxtOMv.s:26     .text._ZN5daisy8DaisyPodD2Ev:0000000000000000 _ZN5daisy8DaisyPodD1Ev
     /tmp/ccgxtOMv.s:154    .text._ZN7daisysp10OscillatorD2Ev:0000000000000000 $t
     /tmp/ccgxtOMv.s:162    .text._ZN7daisysp10OscillatorD2Ev:0000000000000000 _ZN7daisysp10OscillatorD2Ev
     /tmp/ccgxtOMv.s:162    .text._ZN7daisysp10OscillatorD2Ev:0000000000000000 _ZN7daisysp10OscillatorD1Ev
     /tmp/ccgxtOMv.s:179    .text._ZN7daisysp3SvfD2Ev:0000000000000000 $t
     /tmp/ccgxtOMv.s:187    .text._ZN7daisysp3SvfD2Ev:0000000000000000 _ZN7daisysp3SvfD2Ev
     /tmp/ccgxtOMv.s:187    .text._ZN7daisysp3SvfD2Ev:0000000000000000 _ZN7daisysp3SvfD1Ev
     /tmp/ccgxtOMv.s:204    .text._Z13AudioCallbackPKfPfj:0000000000000000 $t
     /tmp/ccgxtOMv.s:212    .text._Z13AudioCallbackPKfPfj:0000000000000000 _Z13AudioCallbackPKfPfj
     /tmp/ccgxtOMv.s:293    .text._Z13AudioCallbackPKfPfj:0000000000000030 $d
     /tmp/ccgxtOMv.s:299    .rodata._Z17HandleMidiMessageN5daisy9MidiEventE.str1.4:0000000000000000 $d
     /tmp/ccgxtOMv.s:303    .text._Z17HandleMidiMessageN5daisy9MidiEventE:0000000000000000 $t
     /tmp/ccgxtOMv.s:311    .text._Z17HandleMidiMessageN5daisy9MidiEventE:0000000000000000 _Z17HandleMidiMessageN5daisy9MidiEventE
     /tmp/ccgxtOMv.s:676    .text._Z17HandleMidiMessageN5daisy9MidiEventE:000000000000010c $d
     /tmp/ccgxtOMv.s:2132   .bss.hw:0000000000000000 hw
     /tmp/ccgxtOMv.s:687    .text.startup.main:0000000000000000 $t
     /tmp/ccgxtOMv.s:695    .text.startup.main:0000000000000000 main
     /tmp/ccgxtOMv.s:944    .text.startup.main:00000000000000c0 $d
     /tmp/ccgxtOMv.s:948    .text.startup.main:00000000000000c4 $t
     /tmp/ccgxtOMv.s:1487   .text.startup.main:00000000000002d8 $d
     /tmp/ccgxtOMv.s:1508   .text.startup.main:000000000000030c $t
     /tmp/ccgxtOMv.s:1690   .text.startup.main:00000000000003c4 $d
     /tmp/ccgxtOMv.s:1705   .text.startup._GLOBAL__sub_I_hw:0000000000000000 $t
     /tmp/ccgxtOMv.s:1712   .text.startup._GLOBAL__sub_I_hw:0000000000000000 _GLOBAL__sub_I_hw
     /tmp/ccgxtOMv.s:2091   .text.startup._GLOBAL__sub_I_hw:0000000000000068 $d
     /tmp/ccgxtOMv.s:2106   .init_array:0000000000000000 $d
     /tmp/ccgxtOMv.s:2126   .bss.filt:0000000000000000 filt
     /tmp/ccgxtOMv.s:2139   .bss.osc:0000000000000000 osc
     /tmp/ccgxtOMv.s:2112   .rodata:0000000000000000 $d
     /tmp/ccgxtOMv.s:2122   .bss.filt:0000000000000000 $d
     /tmp/ccgxtOMv.s:2129   .bss.hw:0000000000000000 $d
     /tmp/ccgxtOMv.s:2135   .bss.osc:0000000000000000 $d
                           .group:0000000000000000 _ZN5daisy8DaisyPodD5Ev
                           .group:0000000000000000 _ZN7daisysp10OscillatorD5Ev
                           .group:0000000000000000 _ZN7daisysp3SvfD5Ev

UNDEFINED SYMBOLS
_ZN7daisysp10Oscillator7ProcessEv
_ZN7daisysp3Svf7ProcessEf
sprintf
strlen
_ZN5daisy9UsbHandle16TransmitInternalEPhj
powf
_ZN7daisysp10Oscillator12CalcPhaseIncEf
_ZN7daisysp3Svf6SetResEf
_ZN7daisysp3Svf7SetFreqEf
_ZN5daisy8DaisyPod4InitEb
_ZN5daisy9UsbHandle4InitENS0_9UsbPeriphE
_ZN5daisy6System5DelayEm
_ZN5daisy8DaisyPod15AudioSampleRateEv
_ZN7daisysp3Svf4InitEf
_ZN5daisy8DaisyPod8StartAdcEv
_ZN5daisy8DaisyPod10StartAudioEPFvPKfPfjE
ARM GAS  /tmp/ccgxtOMv.s 			page 75


_ZN5daisy11UartHandler7StartRxEv
_ZN5daisy6System6GetNowEv
_ZN5daisy11UartHandler8ReadableEv
_ZN5daisy11UartHandler5PopRxEv
_ZN5daisy11UartHandler8RxActiveEv
memcpy
_ZN5daisy11UartHandler7FlushRxEv
__aeabi_atexit
__dso_handle
